!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function($){"use strict";$.jgrid=$.jgrid||{},$.jgrid.hasOwnProperty("defaults")||($.jgrid.defaults={}),$.extend($.jgrid,{version:"5.3.1",htmlDecode:function(e){return e&&("&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0))?"":e?String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):e},htmlEncode:function(e){return e?String(e).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},template:function(e){var o,a=$.makeArray(arguments).slice(1),n=a.length;return null==e&&(e=""),e.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(e,t){if(!isNaN(parseInt(t,10)))return a[parseInt(t,10)];for(o=0;o<n;o++)if($.isArray(a[o]))for(var r=a[o],i=r.length;i--;)if(t===r[i].nm)return r[i].v})},msie:function(){return 0<$.jgrid.msiever()},msiever:function(){var e=0,t=window.navigator.userAgent,r=t.indexOf("MSIE");return 0<r?e=parseInt(t.substring(r+5,t.indexOf(".",r))):navigator.userAgent.match(/Trident\/7\./)&&(e=11),e},getCellIndex:function(e){var t=$(e);return t.is("tr")?-1:(t=(t.is("td")||t.is("th")?t:t.closest("td,th"))[0],$.jgrid.msie()?$.inArray(t,t.parentNode.cells):t.cellIndex)},stripHtml:function(e){return(e=String(e))?(e=e.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""))&&"&nbsp;"!==e&&"&#160;"!==e?e.replace(/\"/g,"'"):"":e},stripPref:function(e,t){var r=$.type(e);return"string"!==r&&"number"!==r||(t=""!==(e=String(e))?String(t).replace(String(e),""):t),t},useJSON:!0,parse:function(jsonString){var js=jsonString;return"while(1);"===js.substr(0,9)&&(js=js.substr(9)),"/*"===js.substr(0,2)&&(js=js.substr(2,js.length-4)),js||(js="{}"),!0===$.jgrid.useJSON&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(js):eval("("+js+")")},parseDate:function(e,t,r,i){var o,a,n,l=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),s="string"==typeof t?t.match(l):null,d=function(e,t){for(e=String(e),t=parseInt(t,10)||2;e.length<t;)e="0"+e;return e},p={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},c=0,u=function(e,t){return 0===e?12===t&&(t=0):12!==t&&(t+=12),t},g=0;if(void 0===i&&(i=$.jgrid.getRegional(this,"formatter.date")),void 0===i.parseRe&&(i.parseRe=/[#%\\\/:_;.,\t\s-]/),i.masks.hasOwnProperty(e)&&(e=i.masks[e]),t&&null!=t)if(isNaN(t-0)||"u"!==String(e).toLowerCase())if(t.constructor===Date)c=t;else if(null!==s)c=new Date(parseInt(s[1],10)),s[3]&&(g=60*Number(s[5])+Number(s[6]),g*="-"===s[4]?1:-1,g-=c.getTimezoneOffset(),c.setTime(Number(Number(c)+60*g*1e3)));else{for("ISO8601Long"===i.srcformat&&"Z"===t.charAt(t.length-1)&&(g-=(new Date).getTimezoneOffset()),t=String(t).replace(/\T/g,"#").replace(/\t/,"%").split(i.parseRe),a=0,n=(e=e.replace(/\T/g,"#").replace(/\t/,"%").split(i.parseRe)).length;a<n;a++){switch(e[a]){case"M":-1!==(o=$.inArray(t[a],i.monthNames))&&o<12&&(t[a]=o+1,p.m=t[a]);break;case"F":-1!==(o=$.inArray(t[a],i.monthNames,12))&&11<o&&(t[a]=o+1-12,p.m=t[a]);break;case"n":e[a]="m";break;case"j":e[a]="d";break;case"a":-1!==(o=$.inArray(t[a],i.AmPm))&&o<2&&t[a]===i.AmPm[o]&&(t[a]=o,p.h=u(t[a],p.h));break;case"A":-1!==(o=$.inArray(t[a],i.AmPm))&&1<o&&t[a]===i.AmPm[o]&&(t[a]=o-2,p.h=u(t[a],p.h));break;case"g":p.h=parseInt(t[a],10)}void 0!==t[a]&&(p[e[a].toLowerCase()]=parseInt(t[a],10))}if(p.f&&(p.m=p.f),0===p.m&&0===p.y&&0===p.d)return"&#160;";p.m=parseInt(p.m,10)-1;var h=p.y;70<=h&&h<=99?p.y=1900+p.y:0<=h&&h<=69&&(p.y=2e3+p.y),c=new Date(p.y,p.m,p.d,p.h,p.i,p.s,p.u),0!==g&&c.setTime(Number(Number(c)+60*g*1e3))}else c=new Date(1e3*parseFloat(t));else c=new Date(p.y,p.m,p.d,p.h,p.i,p.s,p.u);if(i.userLocalTime&&0===g&&0!==(g-=(new Date).getTimezoneOffset())&&c.setTime(Number(Number(c)+60*g*1e3)),void 0===r)return c;i.masks.hasOwnProperty(r)?r=i.masks[r]:r||(r="Y-m-d");var f=c.getHours(),m=c.getMinutes(),v=c.getDate(),b=c.getMonth()+1,j=c.getTimezoneOffset(),y=c.getSeconds(),w=c.getMilliseconds(),_=c.getDay(),x=c.getFullYear(),q=(_+6)%7+1,I=(new Date(x,b-1,v)-new Date(x,0,1))/864e5,D={d:d(v),D:i.dayNames[_],j:v,l:i.dayNames[_+7],N:q,S:i.S(v),w:_,z:I,W:q<5?Math.floor((I+q-1)/7)+1:Math.floor((I+q-1)/7)||((new Date(x-1,0,1).getDay()+6)%7<4?53:52),F:i.monthNames[b-1+12],m:d(b),M:i.monthNames[b-1],n:b,t:"?",L:"?",o:"?",Y:x,y:String(x).substring(2),a:f<12?i.AmPm[0]:i.AmPm[1],A:f<12?i.AmPm[2]:i.AmPm[3],B:"?",g:f%12||12,G:f,h:d(f%12||12),H:d(f),i:d(m),s:d(y),u:w,e:"?",I:"?",O:(0<j?"-":"+")+d(100*Math.floor(Math.abs(j)/60)+Math.abs(j)%60,4),P:"?",T:(String(c).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(c/1e3)};return r.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(e){return D.hasOwnProperty(e)?D[e]:e.substring(1)})},jqID:function(e){return String(e).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(e){return(e||$.jgrid.uidPref)+$.jgrid.guid++},getAccessor:function(e,t){var r,i,o=[];if("function"==typeof t)return t(e);if(void 0===(r=e[t]))try{if("string"==typeof t&&(o=t.split(".")),i=o.length)for(r=e;r&&i--;)r=r[o.shift()]}catch(e){}return r},getXmlData:function(e,t,r){var i,o="string"==typeof t?t.match(/^(.*)\[(\w+)\]$/):null;return"function"==typeof t?t(e):o&&o[2]?o[1]?$(o[1],e).attr(o[2]):$(e).attr(o[2]):(i=$(t,e),r?i:0<i.length?$(i).text():void 0)},cellWidth:function(){var e=$("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable ui-common-table' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div>"),t=e.appendTo("body").find("td").width();return e.remove(),.1<Math.abs(t-5)},isLocalStorage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}},getRegional:function(e,t,r){var i;return void 0!==r?r:(e.p&&e.p.regional&&$.jgrid.regional&&(i=$.jgrid.getAccessor($.jgrid.regional[e.p.regional]||{},t)),void 0===i&&(i=$.jgrid.getAccessor($.jgrid,t)),i)},isMobile:function(){try{return!!/Android|webOS|iPhone|iPad|iPod|pocket|psp|kindle|avantgo|blazer|midori|Tablet|Palm|maemo|plucker|phone|BlackBerry|symbian|IEMobile|mobile|ZuneWP7|Windows Phone|Opera Mini/i.test(navigator.userAgent)}catch(e){return!1}},cell_width:!0,scrollbarWidth:function(){var e=$('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');$("body").append(e);var t=$("div",e).innerWidth();e.css("overflow-y","scroll");var r=$("div",e).innerWidth();return $(e).remove(),t-r<0?18:t-r},ajaxOptions:{},from:function(source){var $t=this,QueryObject=function(d,q){"string"==typeof d&&(d=$.data(d));var self=this,_data=d,_usecase=!0,_trim=!1,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=!1,_queuedOperator="",_sorting=[],_useProperties=!0;if("object"!=typeof d||!d.push)throw"data provides is not an array";return 0<d.length&&(_useProperties="object"==typeof d[0]),this._hasData=function(){return null!==_data&&0!==_data.length},this._getStr=function(e){var t=[];return _trim&&t.push("jQuery.trim("),t.push("String("+e+")"),_trim&&t.push(")"),_usecase||t.push(".toLowerCase()"),t.join("")},this._strComp=function(e){return"string"==typeof e?".toString()":""},this._group=function(e,t){return{field:e.toString(),unique:t,items:[]}},this._toStr=function(e){return _trim&&(e=$.trim(e)),e=e.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),_usecase?e:e.toLowerCase()},this._funcLoop=function(r){var i=[];return $.each(_data,function(e,t){i.push(r(t))}),i},this._append=function(e){var t;for(null===_query?_query="":_query+=""===_queuedOperator?" && ":_queuedOperator,t=0;t<_orDepth;t++)_query+="(";_negate&&(_query+="!"),_query+="("+e+")",_negate=!1,_queuedOperator="",_orDepth=0},this._setCommand=function(e,t){_lastCommand=e,_lastField=t},this._resetNegate=function(){_negate=!1},this._repeatCommand=function(e,t){return null===_lastCommand?self:null!==e&&null!==t?_lastCommand(e,t):null===_lastField?_lastCommand(e):_useProperties?_lastCommand(_lastField,e):_lastCommand(e)},this._equals=function(e,t){return 0===self._compare(e,t,1)},this._compare=function(e,t,r){var i=Object.prototype.toString;return void 0===r&&(r=1),void 0===e&&(e=null),void 0===t&&(t=null),null===e&&null===t?0:null===e&&null!==t?1:null!==e&&null===t?-1:("[object Date]"===i.call(e)&&"[object Date]"===i.call(t)||_usecase||"number"==typeof e||"number"==typeof t||(e=String(e),t=String(t)),e<t?-r:t<e?r:0)},this._performSort=function(){0!==_sorting.length&&(_data=self._doSort(_data,0))},this._doSort=function(e,t){var r=_sorting[t].by,i=_sorting[t].dir,o=_sorting[t].type,a=_sorting[t].datefmt,n=_sorting[t].sfunc;if(t===_sorting.length-1)return self._getOrder(e,r,i,o,a,n);t++;var l,s,d,p=self._getGroup(e,r,i,o,a),c=[];for(l=0;l<p.length;l++)for(d=self._doSort(p[l].items,t),s=0;s<d.length;s++)c.push(d[s]);return c},this._getOrder=function(e,r,t,i,o,a){var n,l,s,d,p=[],c=[],u="a"===t?1:-1;void 0===i&&(i="text"),d="float"===i||"number"===i||"currency"===i||"numeric"===i?function(e){var t=parseFloat(String(e).replace(_stripNum,""));return isNaN(t)?Number.NEGATIVE_INFINITY:t}:"int"===i||"integer"===i?function(e){return e?parseFloat(String(e).replace(_stripNum,"")):Number.NEGATIVE_INFINITY}:"date"===i||"datetime"===i?function(e){return $.jgrid.parseDate.call($t,o,e).getTime()}:$.isFunction(i)?i:function(e){return e=e?$.trim(String(e)):"",_usecase?e:e.toLowerCase()},$.each(e,function(e,t){void 0===(l=""!==r?$.jgrid.getAccessor(t,r):t)&&(l=""),l=d(l,t),c.push({vSort:l,index:e})}),$.isFunction(a)?c.sort(function(e,t){return a.call(this,e.vSort,t.vSort,u,e,t)}):c.sort(function(e,t){return self._compare(e.vSort,t.vSort,u)}),s=0;for(var g=e.length;s<g;)n=c[s].index,p.push(e[n]),s++;return p},this._getGroup=function(e,r,t,i,o){var a,n=[],l=null,s=null;return $.each(self._getOrder(e,r,t,i,o),function(e,t){null==(a=$.jgrid.getAccessor(t,r))&&(a=""),self._equals(s,a)||(s=a,null!==l&&n.push(l),l=self._group(r,a)),l.items.push(t)}),null!==l&&n.push(l),n},this.ignoreCase=function(){return _usecase=!1,self},this.useCase=function(){return _usecase=!0,self},this.trim=function(){return _trim=!0,self},this.noTrim=function(){return _trim=!1,self},this.execute=function(){var match=_query,results=[];return null===match||($.each(_data,function(){eval(match)&&results.push(this)}),_data=results),self},this.data=function(){return _data},this.select=function(r){if(self._performSort(),!self._hasData())return[];if(self.execute(),$.isFunction(r)){var i=[];return $.each(_data,function(e,t){i.push(r(t))}),i}return _data},this.hasMatch=function(){return!!self._hasData()&&(self.execute(),0<_data.length)},this.andNot=function(e,t,r){return _negate=!_negate,self.and(e,t,r)},this.orNot=function(e,t,r){return _negate=!_negate,self.or(e,t,r)},this.not=function(e,t,r){return self.andNot(e,t,r)},this.and=function(e,t,r){return _queuedOperator=" && ",void 0===e?self:self._repeatCommand(e,t,r)},this.or=function(e,t,r){return _queuedOperator=" || ",void 0===e?self:self._repeatCommand(e,t,r)},this.orBegin=function(){return _orDepth++,self},this.orEnd=function(){return null!==_query&&(_query+=")"),self},this.isNot=function(e){return _negate=!_negate,self.is(e)},this.is=function(e){return self._append("this."+e),self._resetNegate(),self},this._compareValues=function(e,t,r,i,o){var a;a=_useProperties?"jQuery.jgrid.getAccessor(this,'"+t+"')":"this",void 0===r&&(r=null);var n=r,l=void 0===o.stype?"text":o.stype;if(null!==r)switch(l){case"int":case"integer":a="parseInt("+a+",10)",n="parseInt("+(n=isNaN(Number(n))||""===n?"0":n)+",10)";break;case"float":case"number":case"numeric":n=String(n).replace(_stripNum,""),a="parseFloat("+a+")",n="parseFloat("+(n=isNaN(Number(n))||""===n?"0":Number(n))+")";break;case"date":case"datetime":n=String($.jgrid.parseDate.call($t,o.srcfmt||"Y-m-d",n).getTime()),a='jQuery.jgrid.parseDate.call(jQuery("#'+$.jgrid.jqID($t.p.id)+'")[0],"'+o.srcfmt+'",'+a+").getTime()";break;default:a=self._getStr(a),n=self._getStr('"'+self._toStr(n)+'"')}return self._append(a+" "+i+" "+n),self._setCommand(e,t),self._resetNegate(),self},this.equals=function(e,t,r){return self._compareValues(self.equals,e,t,"==",r)},this.notEquals=function(e,t,r){return self._compareValues(self.equals,e,t,"!==",r)},this.isNull=function(e,t,r){return self._compareValues(self.equals,e,null,"===",r)},this.greater=function(e,t,r){return self._compareValues(self.greater,e,t,">",r)},this.less=function(e,t,r){return self._compareValues(self.less,e,t,"<",r)},this.greaterOrEquals=function(e,t,r){return self._compareValues(self.greaterOrEquals,e,t,">=",r)},this.lessOrEquals=function(e,t,r){return self._compareValues(self.lessOrEquals,e,t,"<=",r)},this.startsWith=function(e,t){var r=null==t?e:t,i=_trim?$.trim(r.toString()).length:r.toString().length;return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".substr(0,"+i+") == "+self._getStr('"'+self._toStr(t)+'"')):(null!=t&&(i=_trim?$.trim(t.toString()).length:t.toString().length),self._append(self._getStr("this")+".substr(0,"+i+") == "+self._getStr('"'+self._toStr(e)+'"'))),self._setCommand(self.startsWith,e),self._resetNegate(),self},this.endsWith=function(e,t){var r=null==t?e:t,i=_trim?$.trim(r.toString()).length:r.toString().length;return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".substr("+self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".length-"+i+","+i+') == "'+self._toStr(t)+'"'):self._append(self._getStr("this")+".substr("+self._getStr("this")+'.length-"'+self._toStr(e)+'".length,"'+self._toStr(e)+'".length) == "'+self._toStr(e)+'"'),self._setCommand(self.endsWith,e),self._resetNegate(),self},this.contains=function(e,t){return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+'.indexOf("'+self._toStr(t)+'",0) > -1'):self._append(self._getStr("this")+'.indexOf("'+self._toStr(e)+'",0) > -1'),self._setCommand(self.contains,e),self._resetNegate(),self},this.groupBy=function(e,t,r,i){return self._hasData()?self._getGroup(_data,e,t,r,i):null},this.orderBy=function(e,t,r,i,o){return null==r&&(r="text"),null==i&&(i="Y-m-d"),null==o&&(o=!1),"desc"!==(t=null==t?"a":$.trim(t.toString().toLowerCase()))&&"descending"!==t||(t="d"),"asc"!==t&&"ascending"!==t||(t="a"),_sorting.push({by:e,dir:t,type:r,datefmt:i,sfunc:o}),self},self};return new QueryObject(source,null)},getMethod:function(e){return this.getAccessor($.fn.jqGrid,e)},extend:function(e){$.extend($.fn.jqGrid,e),this.no_legacy_api||$.fn.extend(e)},clearBeforeUnload:function(e){var t,r=$("#"+$.jgrid.jqID(e))[0];if(r.grid){t=r.grid,$.isFunction(t.emptyRows)&&t.emptyRows.call(r,!0,!0),$(document).off("mouseup.jqGrid"+r.p.id),$(t.hDiv).off("mousemove"),$(r).off();var i,o=t.headers.length,a=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","formatter","addXmlData","addJSONData","grid","p","addLocalData"];for(i=0;i<o;i++)t.headers[i].el=null;for(i in t)t.hasOwnProperty(i)&&(t[i]=null);for(i in r.p)r.p.hasOwnProperty(i)&&(r.p[i]=$.isArray(r.p[i])?[]:null);for(o=a.length,i=0;i<o;i++)r.hasOwnProperty(a[i])&&(r[a[i]]=null,delete r[a[i]])}},gridUnload:function(e){if(e){0===(e=$.trim(e)).indexOf("#")&&(e=e.substring(1));var t=$("#"+$.jgrid.jqID(e))[0];if(t.grid){var r={id:$(t).attr("id"),cl:$(t).attr("class")};t.p.pager&&$(t.p.pager).off().empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom");var i=document.createElement("table");i.className=r.cl;var o=$.jgrid.jqID(t.id);$(i).removeClass("ui-jqgrid-btable ui-common-table").insertBefore("#gbox_"+o),1===$(t.p.pager).parents("#gbox_"+o).length&&$(t.p.pager).insertBefore("#gbox_"+o),$.jgrid.clearBeforeUnload(e),$("#gbox_"+o).remove(),$(i).attr({id:r.id}),$("#alertmod_"+$.jgrid.jqID(e)).remove()}}},gridDestroy:function(e){if(e){0===(e=$.trim(e)).indexOf("#")&&(e=e.substring(1));var t=$("#"+$.jgrid.jqID(e))[0];if(t.grid){t.p.pager&&$(t.p.pager).remove();try{$.jgrid.clearBeforeUnload(e),$("#gbox_"+$.jgrid.jqID(e)).remove()}catch(e){}}}},isElementInViewport:function(e){var t=e.getBoundingClientRect();return 0<=t.left&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},styleUI:{jQueryUI:{common:{disabled:"ui-state-disabled",highlight:"ui-state-highlight",hover:"ui-state-hover",cornerall:"ui-corner-all",cornertop:"ui-corner-top",cornerbottom:"ui-corner-bottom",hidden:"ui-helper-hidden",icon_base:"ui-icon",overlay:"ui-widget-overlay",active:"ui-state-active",error:"ui-state-error",button:"ui-state-default ui-corner-all",content:"ui-widget-content"},base:{entrieBox:"ui-widget ui-widget-content ui-corner-all",viewBox:"",headerTable:"",headerBox:"ui-state-default",rowTable:"",rowBox:"ui-widget-content",stripedTable:"ui-jqgrid-table-striped",footerTable:"",footerBox:"ui-widget-content",headerDiv:"ui-state-default",gridtitleBox:"ui-widget-header ui-corner-top ui-helper-clearfix",customtoolbarBox:"ui-state-default",loadingBox:"ui-state-default ui-state-active",rownumBox:"ui-state-default",scrollBox:"ui-widget-content",multiBox:"",pagerBox:"ui-state-default ui-corner-bottom",pagerTable:"",toppagerBox:"ui-state-default",pgInput:"ui-corner-all",pgSelectBox:"ui-widget-content ui-corner-all",pgButtonBox:"ui-corner-all",icon_first:"ui-icon-seek-first",icon_prev:"ui-icon-seek-prev",icon_next:"ui-icon-seek-next",icon_end:"ui-icon-seek-end",icon_asc:"ui-icon-triangle-1-n",icon_desc:"ui-icon-triangle-1-s",icon_caption_open:"ui-icon-circle-triangle-n",icon_caption_close:"ui-icon-circle-triangle-s"},modal:{modal:"ui-widget ui-widget-content ui-corner-all ui-dialog",header:"ui-widget-header ui-corner-all ui-helper-clearfix",content:"ui-widget-content",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"ui-icon-closethick",icon_resizable:"ui-icon-gripsmall-diagonal-se"},celledit:{inputClass:"ui-widget-content ui-corner-all"},inlinedit:{inputClass:"ui-widget-content ui-corner-all",icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_save_nav:"ui-icon-disk",icon_cancel_nav:"ui-icon-cancel"},formedit:{inputClass:"ui-widget-content ui-corner-all",icon_prev:"ui-icon-triangle-1-w",icon_next:"ui-icon-triangle-1-e",icon_save:"ui-icon-disk",icon_close:"ui-icon-close",icon_del:"ui-icon-scissors",icon_cancel:"ui-icon-cancel"},navigator:{icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_del_nav:"ui-icon-trash",icon_search_nav:"ui-icon-search",icon_refresh_nav:"ui-icon-refresh",icon_view_nav:"ui-icon-document",icon_newbutton_nav:"ui-icon-newwin"},grouping:{icon_plus:"ui-icon-circlesmall-plus",icon_minus:"ui-icon-circlesmall-minus"},filter:{table_widget:"ui-widget ui-widget-content",srSelect:"ui-widget-content ui-corner-all",srInput:"ui-widget-content ui-corner-all",menu_widget:"ui-widget ui-widget-content ui-corner-all",icon_search:"ui-icon-search",icon_reset:"ui-icon-arrowreturnthick-1-w",icon_query:"ui-icon-comment"},subgrid:{icon_plus:"ui-icon-plus",icon_minus:"ui-icon-minus",icon_open:"ui-icon-carat-1-sw"},treegrid:{icon_plus:"ui-icon-triangle-1-",icon_minus:"ui-icon-triangle-1-s",icon_leaf:"ui-icon-radio-off"},fmatter:{icon_edit:"ui-icon-pencil",icon_add:"ui-icon-plus",icon_save:"ui-icon-disk",icon_cancel:"ui-icon-cancel",icon_del:"ui-icon-trash"},colmenu:{menu_widget:"ui-widget ui-widget-content ui-corner-all",input_checkbox:"ui-widget ui-widget-content",filter_select:"ui-widget-content ui-corner-all",filter_input:"ui-widget-content ui-corner-all",icon_menu:"ui-icon-comment",icon_sort_asc:"ui-icon-arrow-1-n",icon_sort_desc:"ui-icon-arrow-1-s",icon_columns:"ui-icon-extlink",icon_filter:"ui-icon-calculator",icon_group:"ui-icon-grip-solid-horizontal",icon_freeze:"ui-icon-grip-solid-vertical",icon_move:"ui-icon-arrow-4",icon_new_item:"ui-icon-newwin",icon_toolbar_menu:"ui-icon-document"}},Bootstrap:{common:{disabled:"ui-disabled",highlight:"success",hover:"active",cornerall:"",cornertop:"",cornerbottom:"",hidden:"",icon_base:"glyphicon",overlay:"ui-overlay",active:"active",error:"bg-danger",button:"btn btn-default",content:""},base:{entrieBox:"",viewBox:"table-responsive",headerTable:"table table-bordered",headerBox:"",rowTable:"table table-bordered",rowBox:"",stripedTable:"table-striped",footerTable:"table table-bordered",footerBox:"",headerDiv:"",gridtitleBox:"",customtoolbarBox:"",loadingBox:"row",rownumBox:"active",scrollBox:"",multiBox:"checkbox",pagerBox:"",pagerTable:"table",toppagerBox:"",pgInput:"form-control",pgSelectBox:"form-control",pgButtonBox:"",icon_first:"glyphicon-step-backward",icon_prev:"glyphicon-backward",icon_next:"glyphicon-forward",icon_end:"glyphicon-step-forward",icon_asc:"glyphicon-triangle-top",icon_desc:"glyphicon-triangle-bottom",icon_caption_open:"glyphicon-circle-arrow-up",icon_caption_close:"glyphicon-circle-arrow-down"},modal:{modal:"modal-content",header:"modal-header",title:"modal-title",content:"modal-body",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"glyphicon-remove-circle",icon_resizable:"glyphicon-import"},celledit:{inputClass:"form-control"},inlinedit:{inputClass:"form-control",icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_save_nav:"glyphicon-save",icon_cancel_nav:"glyphicon-remove-circle"},formedit:{inputClass:"form-control",icon_prev:"glyphicon-step-backward",icon_next:"glyphicon-step-forward",icon_save:"glyphicon-save",icon_close:"glyphicon-remove-circle",icon_del:"glyphicon-trash",icon_cancel:"glyphicon-remove-circle"},navigator:{icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_del_nav:"glyphicon-trash",icon_search_nav:"glyphicon-search",icon_refresh_nav:"glyphicon-refresh",icon_view_nav:"glyphicon-info-sign",icon_newbutton_nav:"glyphicon-new-window"},grouping:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom"},filter:{table_widget:"table table-condensed",srSelect:"form-control",srInput:"form-control",menu_widget:"",icon_search:"glyphicon-search",icon_reset:"glyphicon-refresh",icon_query:"glyphicon-comment"},subgrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_open:"glyphicon-indent-left"},treegrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_leaf:"glyphicon-unchecked"},fmatter:{icon_edit:"glyphicon-edit",icon_add:"glyphicon-plus",icon_save:"glyphicon-save",icon_cancel:"glyphicon-remove-circle",icon_del:"glyphicon-trash"},colmenu:{menu_widget:"",input_checkbox:"",filter_select:"form-control",filter_input:"form-control",icon_menu:"glyphicon-menu-hamburger",icon_sort_asc:"glyphicon-sort-by-alphabet",icon_sort_desc:"glyphicon-sort-by-alphabet-alt",icon_columns:"glyphicon-list-alt",icon_filter:"glyphicon-filter",icon_group:"glyphicon-align-left",icon_freeze:"glyphicon-object-align-horizontal",icon_move:"glyphicon-move",icon_new_item:"glyphicon-new-window",icon_toolbar_menu:"glyphicon-menu-hamburger"}},Bootstrap4:{common:{disabled:"ui-disabled",highlight:"table-success",hover:"table-active",cornerall:"",cornertop:"",cornerbottom:"",hidden:"",overlay:"ui-overlay",active:"active",error:"alert-danger",button:"btn btn-light",content:""},base:{entrieBox:"",viewBox:"table-responsive",headerTable:"table table-bordered",headerBox:"",rowTable:"table table-bordered",rowBox:"",stripedTable:"table-striped",footerTable:"table table-bordered",footerBox:"",headerDiv:"",gridtitleBox:"",customtoolbarBox:"",loadingBox:"row",rownumBox:"active",scrollBox:"",multiBox:"checkbox",pagerBox:"",pagerTable:"table",toppagerBox:"",pgInput:"form-control",pgSelectBox:"form-control",pgButtonBox:""},modal:{modal:"modal-content",header:"modal-header",title:"modal-title",content:"modal-body",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"oi-circle-x",icon_resizable:"oi-circle-x"},celledit:{inputClass:"form-control"},inlinedit:{inputClass:"form-control"},formedit:{inputClass:"form-control"},navigator:{},grouping:{},filter:{table_widget:"table table-condensed",srSelect:"form-control",srInput:"form-control",menu_widget:""},subgrid:{},treegrid:{},fmatter:{},colmenu:{menu_widget:"",input_checkbox:"",filter_select:"form-control",filter_input:"form-control"}}},iconSet:{Iconic:{common:{icon_base:"oi"},base:{icon_first:"oi-media-step-backward",icon_prev:"oi-caret-left",icon_next:"oi-caret-right",icon_end:"oi-media-step-forward",icon_asc:"oi-caret-top",icon_desc:"oi-caret-bottom",icon_caption_open:"oi-collapse-up",icon_caption_close:"oi-expand-down"},modal:{icon_close:"oi-circle-x",icon_resizable:"oi-plus"},inlinedit:{icon_edit_nav:"oi-pencil",icon_add_nav:"oi-plus",icon_save_nav:"oi-check",icon_cancel_nav:"oi-action-undo"},formedit:{icon_prev:"oi-chevron-left",icon_next:"oi-chevron-right",icon_save:"oi-check",icon_close:"oi-ban",icon_del:"oi-delete",icon_cancel:"oi-ban"},navigator:{icon_edit_nav:"oi-pencil",icon_add_nav:"oi-plus",icon_del_nav:"oi-trash",icon_search_nav:"oi-zoom-in",icon_refresh_nav:"oi-reload",icon_view_nav:"oi-browser",icon_newbutton_nav:"oi-book"},grouping:{icon_plus:"oi-caret-right",icon_minus:"oi-caret-bottom"},filter:{icon_search:"oi-magnifying-glass",icon_reset:"oi-reload",icon_query:"oi-comment-square"},subgrid:{icon_plus:"oi-chevron-right",icon_minus:"oi-chevron-bottom",icon_open:"oi-expand-left"},treegrid:{icon_plus:"oi-plus",icon_minus:"oi-minus",icon_leaf:"oi-media-record"},fmatter:{icon_edit:"oi-pencil",icon_add:"oi-plus",icon_save:"oi-check",icon_cancel:"oi-action-undo",icon_del:"oi-trash"},colmenu:{icon_menu:"oi-list",icon_sort_asc:"oi-sort-ascending",icon_sort_desc:"oi-sort-descending",icon_columns:"oi-project",icon_filter:"oi-magnifying-glass",icon_group:"oi-list-rich",icon_freeze:"oi-spreadsheet",icon_move:"oi-move",icon_new_item:"oi-external-link",icon_toolbar_menu:"oi-menu"}},Octicons:{common:{icon_base:"octicon"},base:{icon_first:"octicon-triangle-left",icon_prev:"octicon-chevron-left",icon_next:"octicon-chevron-right",icon_end:"octicon-triangle-right",icon_asc:"octicon-triangle-up",icon_desc:"octicon-triangle-down",icon_caption_open:"octicon-triangle-up",icon_caption_close:"octicon-triangle-down"},modal:{icon_close:"octicon-x",icon_resizable:"octicon-plus"},inlinedit:{icon_edit_nav:"octicon-pencil",icon_add_nav:"octicon-plus",icon_save_nav:"octicon-check",icon_cancel_nav:"octicon-circle-slash"},formedit:{icon_prev:"octicon-chevron-left",icon_next:"octicon-chevron-right",icon_save:"octicon-check",icon_close:"octicon-x",icon_del:"octicon-trashcan",icon_cancel:"octicon-circle-slash"},navigator:{icon_edit_nav:"octicon-pencil",icon_add_nav:"octicon-plus",icon_del_nav:"octicon-trashcan",icon_search_nav:"octicon-search",icon_refresh_nav:"octicon-sync",icon_view_nav:"octicon-file",icon_newbutton_nav:"octicon-link-external"},grouping:{icon_plus:"octicon-triangle-right",icon_minus:"octicon-triangle-down"},filter:{icon_search:"octicon-search",icon_reset:"octicon-sync",icon_query:"octicon-file-code"},subgrid:{icon_plus:"octicon-triangle-right",icon_minus:"octicon-triangle-down",icon_open:"octicon-git-merge"},treegrid:{icon_plus:"octicon-triangle-right",icon_minus:"octicon-triangle-down",icon_leaf:"octicon-primitive-dot"},fmatter:{icon_edit:"octicon-pencil",icon_add:"octicon-plus",icon_save:"octicon-check",icon_cancel:"octicon-circle-slash",icon_del:"octicon-trashcan"},colmenu:{icon_menu:"octicon-grabber",icon_sort_asc:"octicon-arrow-down",icon_sort_desc:"octicon-arrow-up",icon_columns:"octicon-repo",icon_filter:"octicon-search",icon_group:"octicon-list-unordered",icon_freeze:"octicon-repo",icon_move:"octicon-git-compare",icon_new_item:"octicon-link-external",icon_toolbar_menu:"octicon-three-bars"}},fontAwesome:{common:{icon_base:"fas"},base:{icon_first:"fa-step-backward",icon_prev:"fa-backward",icon_next:"fa-forward",icon_end:"fa-step-forward",icon_asc:"fa-caret-up",icon_desc:"fa-caret-down",icon_caption_open:"fa-caret-square-up",icon_caption_close:"fa-caret-square-down "},modal:{icon_close:"fa-window-close",icon_resizable:"fa-plus"},inlinedit:{icon_edit_nav:"fa-edit",icon_add_nav:"fa-plus",icon_save_nav:"fa-save",icon_cancel_nav:"fa-replay"},formedit:{icon_prev:"fa-chevron-left",icon_next:"fa-chevron-right",icon_save:"fa-save",icon_close:"fa-window-close",icon_del:"fa-trash",icon_cancel:"fa-times"},navigator:{icon_edit_nav:"fa-edit",icon_add_nav:"fa-plus",icon_del_nav:"fa-trash",icon_search_nav:"fa-search",icon_refresh_nav:"fa-sync",icon_view_nav:"fa-sticky-note",icon_newbutton_nav:"fa-external-link-alt"},grouping:{icon_plus:"fa-caret-right",icon_minus:"fa-caret-down"},filter:{icon_search:"fa-search",icon_reset:"fa-reply",icon_query:"fa-pen-square "},subgrid:{icon_plus:"fa-arrow-circle-right",icon_minus:"fa-arrow-circle-down",icon_open:"fa-ellipsis-v"},treegrid:{icon_plus:"fa-plus",icon_minus:"fa-minus",icon_leaf:"fa-circle"},fmatter:{icon_edit:"fa-edit",icon_add:"fa-plus",icon_save:"fa-save",icon_cancel:"fa-undo",icon_del:"fa-trash"},colmenu:{icon_menu:"fa-ellipsis-v",icon_sort_asc:"fa-sort-amount-down",icon_sort_desc:"fa-sort-amount-up",icon_columns:"fa-columns",icon_filter:"fa-filter",icon_group:"fa-object-group",icon_freeze:"fa-snowflake",icon_move:"fa-expand-arrows-alt",icon_new_item:"fa-external-link-alt",icon_toolbar_menu:"fa-list"}}}}),$.fn.jqGrid=function(Ue){if("string"==typeof Ue){var e=$.jgrid.getMethod(Ue);if(!e)throw"jqGrid - No such method: "+Ue;var t=$.makeArray(arguments).slice(1);return e.apply(this,t)}return this.each(function(){if(!this.grid){var e;null!=Ue&&void 0!==Ue.data&&(e=Ue.data,Ue.data=[]);var u=$.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],preserveSelection:!1,savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,multiboxonly:!1,multimail:!1,multiselectWidth:30,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:$.jgrid.scrollbarWidth()+3,cellLayout:5,subGridWidth:20,gridview:!0,rownumWidth:35,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"",minusicon:"",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1},ignoreCase:!0,cmTemplate:{},idPrefix:"",multiSort:!1,minColWidth:33,scrollPopUp:!1,scrollTopOffset:0,scrollLeftOffset:"100%",scrollMaxBuffer:0,storeNavOptions:!1,regional:"en",styleUI:"jQueryUI",iconSet:"Iconic",responsive:!1,restoreCellonFail:!0,editNextRowCell:!1,colFilters:{},colMenu:!1,colMenuCustom:{},colMenuColumnDone:null,treeGrid_bigData:!1,treeGrid_rootParams:{otherData:{}},treeGrid_beforeRequest:null,treeGrid_afterLoadComplete:null,useNameForSearch:!1},$.jgrid.defaults,Ue);void 0!==e&&(u.data=e,Ue.data=e);var V=this,b={headers:[],cols:[],footers:[],dragStart:function(e,t,r){var i=$(this.bDiv).offset().left,o=parseInt(u.colModel[e].minResizeWidth?u.colModel[e].minResizeWidth:u.minColWidth,10);isNaN(o)&&(o=33),this.resizing={idx:e,startX:t.pageX,sOL:t.pageX-i,minW:o},this.hDiv.style.cursor="col-resize",this.curGbox=$("#rs_m"+$.jgrid.jqID(u.id),"#gbox_"+$.jgrid.jqID(u.id)),this.curGbox.css({display:"block",left:t.pageX-i,top:r[1],height:r[2]}),$(V).triggerHandler("jqGridResizeStart",[t,e]),$.isFunction(u.resizeStart)&&u.resizeStart.call(V,t,e),document.onselectstart=function(){return!1}},dragMove:function(e){if(this.resizing){var t,r,i=e.pageX-this.resizing.startX,o=this.headers[this.resizing.idx],a="ltr"===u.direction?o.width+i:o.width-i;a>this.resizing.minW&&(this.curGbox.css({left:this.resizing.sOL+i}),!0===u.forceFit?(t=this.headers[this.resizing.idx+u.nv],(r="ltr"===u.direction?t.width-i:t.width+i)>this.resizing.minW&&(o.newWidth=a,t.newWidth=r)):(this.newWidth="ltr"===u.direction?u.tblwidth+i:u.tblwidth-i,o.newWidth=a))}},dragEnd:function(e){if(this.hDiv.style.cursor="default",this.resizing){var t=this.resizing.idx,r=this.headers[t].newWidth||this.headers[t].width;r=parseInt(r,10),this.resizing=!1,$("#rs_m"+$.jgrid.jqID(u.id)).css("display","none"),u.colModel[t].width=r,this.headers[t].width=r,this.headers[t].el.style.width=r+"px",this.cols[t].style.width=r+"px",0<this.footers.length&&(this.footers[t].style.width=r+"px"),!0===u.forceFit?(r=this.headers[t+u.nv].newWidth||this.headers[t+u.nv].width,this.headers[t+u.nv].width=r,this.headers[t+u.nv].el.style.width=r+"px",this.cols[t+u.nv].style.width=r+"px",0<this.footers.length&&(this.footers[t+u.nv].style.width=r+"px"),u.colModel[t+u.nv].width=r):(u.tblwidth=this.newWidth||u.tblwidth,$("table:first",this.bDiv).css("width",u.tblwidth+"px"),$("table:first",this.hDiv).css("width",u.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,u.footerrow&&($("table:first",this.sDiv).css("width",u.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft)),e&&($(V).triggerHandler("jqGridResizeStop",[r,t]),$.isFunction(u.resizeStop)&&u.resizeStop.call(V,r,t))}this.curGbox=null,document.onselectstart=function(){return!0}},populateVisible:function(){b.timer&&clearTimeout(b.timer),b.timer=null;var e=$(b.bDiv).height();if(e){var t,r,i=$("table:first",b.bDiv);if(i[0].rows.length)try{r=(t=i[0].rows[1])&&$(t).outerHeight()||b.prevRowHeight}catch(e){r=b.prevRowHeight}if(r){b.prevRowHeight=r;var o,a,n,l=u.rowNum,s=b.scrollTop=b.bDiv.scrollTop,d=Math.round(i.position().top)-s,p=d+i.height(),c=r*l;if(p<e&&d<=0&&(void 0===u.lastpage||(parseInt((p+s+c-1)/c,10)||0)<=u.lastpage)&&(a=parseInt((e-p+c-1)/c,10)||1,0<=p||a<2||!0===u.scroll?(o=(Math.round((p+s)/c)||0)+1,d=-1):d=1),0<d&&(o=(parseInt(s/c,10)||0)+1,a=(parseInt((s+e)/c,10)||0)+2-o,n=!0),a){if(u.lastpage&&(o>u.lastpage||1===u.lastpage||o===u.page&&o===u.lastpage))return;b.hDiv.loading?b.timer=setTimeout(b.populateVisible,u.scrollTimeout):(u.page=o,0<u.scrollMaxBuffer&&(0<l&&u.scrollMaxBuffer<l&&(u.scrollMaxBuffer=l+1),u.reccount>u.scrollMaxBuffer-(0<l?l:0)&&(n=!0)),n&&(b.selectionPreserver(i[0]),b.emptyRows.call(i[0],!1,!1)),b.populate(a)),u.scrollPopUp&&null!=u.lastpage&&($("#scroll_g"+u.id).show().html($.jgrid.template($.jgrid.getRegional(V,"defaults.pgtext",u.pgtext),u.page,u.lastpage)).css({top:u.scrollTopOffset+s*((parseInt(u.height,10)-45)/(parseInt(r,10)*parseInt(u.records,10)))+"px",left:u.scrollLeftOffset}),$(this).mouseout(function(){$("#scroll_g"+u.id).hide()}))}}}},scrollGrid:function(e){if(u.scroll){var t=b.bDiv.scrollTop;void 0===b.scrollTop&&(b.scrollTop=0),t!==b.scrollTop&&(b.scrollTop=t,b.timer&&clearTimeout(b.timer),b.timer=setTimeout(b.populateVisible,u.scrollTimeout))}b.hDiv.scrollLeft=b.bDiv.scrollLeft,u.footerrow&&(b.sDiv.scrollLeft=b.bDiv.scrollLeft),u.frozenColumns&&$(b.fbDiv).scrollTop(b.bDiv.scrollTop),e&&e.stopPropagation()},selectionPreserver:function(t){var r=t.p,i=r.selrow,o=r.selarrrow?$.makeArray(r.selarrrow):null,a=t.grid.bDiv.scrollLeft,n=function(){var e;if(r.selrow=null,r.selarrrow=[],r.multiselect&&o&&0<o.length)for(e=0;e<o.length;e++)o[e]!==i&&$(t).jqGrid("setSelection",o[e],!1,null);i&&$(t).jqGrid("setSelection",i,!1,null),t.grid.bDiv.scrollLeft=a,$(t).off(".selectionPreserver",n)};$(t).on("jqGridGridComplete.selectionPreserver",n)}};if("TABLE"===this.tagName.toUpperCase()&&null!=this.id)if(void 0!==document.documentMode&&document.documentMode<=5)alert("Grid can not be used in this ('quirks') mode!");else{var t,r,j,W,i=0;for(r in $.jgrid.regional)$.jgrid.regional.hasOwnProperty(r)&&(0===i&&(t=r),i++);if(1===i&&t!==u.regional&&(u.regional=t),$(this).empty().attr("tabindex","0"),this.p=u,this.p.useProp=!!$.fn.prop,0===this.p.colNames.length)for(i=0;i<this.p.colModel.length;i++)this.p.colNames[i]=this.p.colModel[i].label||this.p.colModel[i].name;if(this.p.colNames.length===this.p.colModel.length){"Bootstrap4"===V.p.styleUI&&$.jgrid.iconSet.hasOwnProperty(V.p.iconSet)&&$.extend(!0,$.jgrid.styleUI.Bootstrap4,$.jgrid.iconSet[V.p.iconSet]);var o,Q=$.jgrid.getMethod("getStyleUI"),X=V.p.styleUI+".common",y=Q(X,"disabled",!0),Y=Q(X,"highlight",!0),_=Q(X,"hover",!0),a=Q(X,"cornerall",!0),w=Q(X,"icon_base",!0),x=$.jgrid.styleUI[V.p.styleUI||"jQueryUI"].colmenu,n=$.jgrid.msie(),F=[],G=[],l=[];X=V.p.styleUI+".base",o=$("<div "+Q(X,"viewBox",!1,"ui-jqgrid-view")+" role='grid'></div>"),V.p.direction=$.trim(V.p.direction.toLowerCase()),V.p._ald=!1,-1===$.inArray(V.p.direction,["ltr","rtl"])&&(V.p.direction="ltr"),j=V.p.direction,$(o).insertBefore(this),$(this).appendTo(o);var s=$("<div "+Q(X,"entrieBox",!1,"ui-jqgrid")+"></div>");$(s).attr({id:"gbox_"+this.id,dir:j}).insertBefore(o),$(o).attr("id","gview_"+this.id).appendTo(s),$("<div "+Q(V.p.styleUI+".common","overlay",!1,"jqgrid-overlay")+" id='lui_"+this.id+"'></div>").insertBefore(o),$("<div "+Q(X,"loadingBox",!1,"loading")+" id='load_"+this.id+"'>"+$.jgrid.getRegional(V,"defaults.loadtext",this.p.loadtext)+"</div>").insertBefore(o),$(this).attr({role:"presentation","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var d,K=function(e,t){return e=parseInt(e,10),isNaN(e)?t||0:e},p=function(e,t,r,i,o,a){var n,l=V.p.colModel[e],s=l.align,d='style="',p=l.classes,c=l.name,u=[];return s&&(d+="text-align:"+s+";"),!0===l.hidden&&(d+="display:none;"),0===t?d+="width: "+b.headers[e].width+"px;":($.isFunction(l.cellattr)||"string"==typeof l.cellattr&&null!=$.jgrid.cellattr&&$.isFunction($.jgrid.cellattr[l.cellattr]))&&(n=($.isFunction(l.cellattr)?l.cellattr:$.jgrid.cellattr[l.cellattr]).call(V,o,r,i,l,a))&&"string"==typeof n&&(-1<n.indexOf("title")&&(l.title=!1),-1<n.indexOf("class")&&(p=void 0),2===(u=(n=String(n).replace(/\s+\=/g,"=")).split("style=")).length?(u[1]=$.trim(u[1]),0!==u[1].indexOf("'")&&0!==u[1].indexOf('"')||(u[1]=u[1].substring(1)),d+=u[1].replace(/'/gi,'"')):d+='"'),u.length?2<u.length&&(u[0]=""):(u[0]="",d+='"'),d+=(void 0!==p?' class="'+p+'"':"")+(l.title&&r?' title="'+$.jgrid.stripHtml(r)+'"':""),(d+=' aria-describedby="'+V.p.id+"_"+c+'"')+u[0]},c=function(e){return null==e||""===e?"&#160;":V.p.autoencode?$.jgrid.htmlEncode(e):String(e)},g=function(e,t,r,i,o){var a,n=V.p.colModel[r];if(void 0!==n.formatter){var l={rowId:e=""!==String(V.p.idPrefix)?$.jgrid.stripPref(V.p.idPrefix,e):e,colModel:n,gid:V.p.id,pos:r,styleUI:V.p.styleUI};a=$.isFunction(n.formatter)?n.formatter.call(V,t,l,i,o):$.fmatter?$.fn.fmatter.call(V,n.formatter,t,l,i,o):c(t)}else a=c(t);return a},J=function(e,t,r,i,o,a){var n;return n=g(e,t,r,o,"add"),'<td role="gridcell" '+p(r,i,n,o,e,a)+">"+n+"</td>"},Z=function(e,t,r,i,o){var a='<input role="checkbox" type="checkbox" id="jqg_'+V.p.id+"_"+e+'" '+o+' name="jqg_'+V.p.id+"_"+e+'"'+(i?'checked="checked"':"")+"/>";return'<td role="gridcell" '+p(t,r,"",null,e,!0)+">"+a+"</td>"},ee=function(e,t,r,i,o){var a=(parseInt(r,10)-1)*parseInt(i,10)+1+t;return'<td role="gridcell" '+o+" "+p(e,t,a,null,t,!0)+">"+a+"</td>"},te=function(e){var t,r,i=[],o=0;for(r=0;r<V.p.colModel.length;r++)"cb"!==(t=V.p.colModel[r]).name&&"subgrid"!==t.name&&"rn"!==t.name&&(i[o]="local"===e?t.name:"xml"===e||"xmlstring"===e?t.xmlmap||t.name:t.jsonmap||t.name,!1!==V.p.keyName&&!0===t.key&&(V.p.keyName=i[o],V.p.keyIndex=o),o++);return i},re=function(t){var e=V.p.remapColumns;return e&&e.length||(e=$.map(V.p.colModel,function(e,t){return t})),t&&(e=$.map(e,function(e){return e<t?null:e-t})),e},ie=function(e,t){var r;this.p.deepempty?$(this.rows).slice(1).remove():(r=0<this.rows.length?this.rows[0]:null,$(this.firstChild).empty().append(r)),e&&this.p.scroll&&($(this.grid.bDiv.firstChild).css({height:"auto"}),$(this.grid.bDiv.firstChild.firstChild).css({height:"0px",display:"none"}),0!==this.grid.bDiv.scrollTop&&(this.grid.bDiv.scrollTop=0)),!0===t&&this.p.treeGrid&&!this.p.loadonce&&(this.p.data=[],this.p._index={})},h=function(){var e,t,r,i,o,a,n,l,s,d,p,c=V.p,u=c.data,g=u.length,h=c.localReader,f=c.colModel,m=h.cell,v=(!0===c.multiselect?1:0)+(!0===c.subGrid?1:0)+(!0===c.rownumbers?1:0),b=c.scroll?$.jgrid.randId():1;if("local"===c.datatype&&!0===h.repeatitems)for(s=re(v),d=te("local"),i=!1===c.keyName?$.isFunction(h.id)?h.id.call(V,u):h.id:c.keyName,e=0;e<g;e++){for(r=u[e],void 0===(o=$.jgrid.getAccessor(r,i))&&("number"==typeof i&&null!=f[i+v]&&(o=$.jgrid.getAccessor(r,f[i+v].name)),void 0===o&&(o=b+e,m&&(o=null!=(a=$.jgrid.getAccessor(r,m)||r)&&void 0!==a[i]?a[i]:o,a=null))),(l={})[h.id]=o,m&&(r=$.jgrid.getAccessor(r,m)||r),p=$.isArray(r)?s:d,t=0;t<p.length;t++)n=$.jgrid.getAccessor(r,p[t]),l[f[t+v].name]=n;u[e]=l}},f=function(){var e,t,r,i=V.p.data.length;for(e=!1===V.p.keyName||!0===V.p.loadonce?V.p.localReader.id:V.p.keyName,V.p._index=[],t=0;t<i;t++)void 0===(r=$.jgrid.getAccessor(V.p.data[t],e))&&(r=String(t+1)),V.p._index[r]=t},oe=function(e,t,r,i,o){var a,n="-1",l="",s=t?"display:none;":"",d=$(V).triggerHandler("jqGridRowAttr",[i,o,e]);if("object"!=typeof d&&(d=$.isFunction(V.p.rowattr)?V.p.rowattr.call(V,i,o,e):"string"==typeof V.p.rowattr&&null!=$.jgrid.rowattr&&$.isFunction($.jgrid.rowattr[V.p.rowattr])?$.jgrid.rowattr[V.p.rowattr].call(V,i,o,e):{}),!$.isEmptyObject(d)){d.hasOwnProperty("id")&&(e=d.id,delete d.id),d.hasOwnProperty("tabindex")&&(n=d.tabindex,delete d.tabindex),d.hasOwnProperty("style")&&(s+=d.style,delete d.style),d.hasOwnProperty("class")&&(r+=" "+d.class,delete d.class);try{delete d.role}catch(e){}for(a in d)d.hasOwnProperty(a)&&(l+=" "+a+"="+d[a])}return'<tr role="row" id="'+e+'" tabindex="'+n+'" class="'+r+'"'+(""===s?"":' style="'+s+'"')+l+">"},m=function(e,r,t,i){var o=new Date,a="local"!==V.p.datatype&&V.p.loadonce||"xmlstring"===V.p.datatype,n="_id_",l=V.p.xmlReader,s="local"===V.p.datatype?"local":"xml";if(a&&(V.p.data=[],V.p._index={},V.p.localReader.id=n),V.p.reccount=0,$.isXMLDoc(e)){-1!==V.p.treeANode||V.p.scroll?r=1<r?r:1:(ie.call(V,!1,!0),r=1);var d,p,c,u,g,h,f,m,v,b=$(V),j=0,y=!0===V.p.multiselect?1:0,w=0,_=!0===V.p.rownumbers?1:0,x=[],q={},I=[],D=Q(X,"rowBox",!0,"jqgrow ui-row-"+V.p.direction);!0===V.p.subGrid&&(w=1,u=$.jgrid.getMethod("addSubGridCell")),l.repeatitems||(x=te(s)),g=!1===V.p.keyName?$.isFunction(l.id)?l.id.call(V,e):l.id:V.p.keyName,l.repeatitems&&V.p.keyName&&isNaN(g)&&(g=V.p.keyIndex),h=-1===String(g).indexOf("[")?x.length?function(e,t){return $(g,e).text()||t}:function(e,t){return $(l.cell,e).eq(g).text()||t}:function(e,t){return e.getAttribute(g.replace(/[\[\]]/g,""))||t},V.p.userData={},V.p.page=K($.jgrid.getXmlData(e,l.page),V.p.page),V.p.lastpage=K($.jgrid.getXmlData(e,l.total),1),V.p.records=K($.jgrid.getXmlData(e,l.records)),$.isFunction(l.userdata)?V.p.userData=l.userdata.call(V,e)||{}:$.jgrid.getXmlData(e,l.userdata,!0).each(function(){V.p.userData[this.getAttribute("name")]=$(this).text()});var C=$.jgrid.getXmlData(e,l.root,!0);(C=$.jgrid.getXmlData(C,l.row,!0))||(C=[]);var F,G,k=C.length,S=0,R=[],M=parseInt(V.p.rowNum,10),N=V.p.scroll?$.jgrid.randId():1,O=$(V).find("tbody:first"),T=!1;if(V.p.grouping&&(T=!0===V.p.groupingView.groupCollapse,F=$.jgrid.getMethod("groupingPrepare")),0<k&&V.p.page<=0&&(V.p.page=1),C&&k){i&&(M*=i+1);for(var A=$.isFunction(V.p.afterInsertRow),P=_?Q(X,"rownumBox",!1,"jqgrid-rownum"):"",E=y?Q(X,"multiBox",!1,"cbox"):"";S<k;){m=C[S],v=h(m,N+S),v=V.p.idPrefix+v,V.p.preserveSelection&&(V.p.multiselect?(G=-1!==V.p.selarrrow.indexOf(v),W=G?W+1:W):G=v===V.p.selrow);var B=I.length;if(I.push(""),_&&I.push(ee(0,S,V.p.page,V.p.rowNum,P)),y&&I.push(Z(v,_,S,G,E)),w&&I.push(u.call(b,y+_,S+r)),l.repeatitems){f||(f=re(y+w+_));var z=$.jgrid.getXmlData(m,l.cell,!0);$.each(f,function(e){var t=z[this];if(!t)return!1;c=t.textContent||t.text||"",q[V.p.colModel[e+y+w+_].name]=c,I.push(J(v,c,e+y+w+_,S+r,m,q))})}else for(d=0;d<x.length;d++)c=$.jgrid.getXmlData(m,x[d]),q[V.p.colModel[d+y+w+_].name]=c,I.push(J(v,c,d+y+w+_,S+r,m,q));if(I[B]=oe(v,T,D,q,m),I.push("</tr>"),V.p.grouping&&(R.push(I),V.p.groupingView._locgr||F.call(b,q,S),I=[]),(a||!0===V.p.treeGrid&&!V.p._ald)&&(q[n]=$.jgrid.stripPref(V.p.idPrefix,v),V.p.data.push(q),V.p._index[q[n]]=V.p.data.length-1),!1===V.p.gridview&&(O.append(I.join("")),b.triggerHandler("jqGridAfterInsertRow",[v,q,m]),A&&V.p.afterInsertRow.call(V,v,q,m),I=[]),q={},S++,++j===M)break}}if(W=V.p.multiselect&&V.p.preserveSelection&&j===W,!0===V.p.gridview&&(p=-1<V.p.treeANode?V.p.treeANode:0,V.p.grouping?a||(b.jqGrid("groupingRender",R,V.p.colModel.length,V.p.page,M),R=null):!0===V.p.treeGrid&&0<p?$(V.rows[p]).after(I.join("")):(O.append(I.join("")),V.grid.cols=V.rows[0].cells)),V.p.totaltime=new Date-o,I=null,0<j&&0===V.p.records&&(V.p.records=k),!0===V.p.treeGrid)try{b.jqGrid("setTreeNode",p+1,j+p+1)}catch(e){}if(V.p.reccount=j,V.p.treeANode=-1,V.p.userDataOnFooter&&b.jqGrid("footerData","set",V.p.userData,!0),a&&(V.p.records=k,V.p.lastpage=Math.ceil(k/M)),t||V.updatepager(!1,!0),W&&ae(!0),a){for(;j<k;){if(m=C[j],v=h(m,j+N),v=V.p.idPrefix+v,l.repeatitems){f||(f=re(y+w+_));var U=$.jgrid.getXmlData(m,l.cell,!0);$.each(f,function(e){var t=U[this];if(!t)return!1;c=t.textContent||t.text||"",q[V.p.colModel[e+y+w+_].name]=c})}else for(d=0;d<x.length;d++)c=$.jgrid.getXmlData(m,x[d]),q[V.p.colModel[d+y+w+_].name]=c;q[n]=$.jgrid.stripPref(V.p.idPrefix,v),V.p.grouping&&F.call(b,q,j),V.p.data.push(q),V.p._index[q[n]]=V.p.data.length-1,q={},j++}V.p.grouping&&(V.p.groupingView._locgr=!0,b.jqGrid("groupingRender",R,V.p.colModel.length,V.p.page,M),R=null)}if(!0===V.p.subGrid)try{b.jqGrid("addSubGrid",y+_)}catch(e){}}},v=function(e,t,r,i){var o=new Date;if(e){-1!==V.p.treeANode||V.p.scroll?t=1<t?t:1:(ie.call(V,!1,!0),t=1);var a,n,l,s,d,p,c,u,g,h,f,m,v,b,j,y="_id_",w="local"!==V.p.datatype&&V.p.loadonce||"jsonstring"===V.p.datatype,_=$(V),x=0,q=[],I=V.p.multiselect?1:0,D=!0===V.p.subGrid?1:0,C=!0===V.p.rownumbers?1:0,F=V.p.scroll&&"local"!==V.p.datatype?$.jgrid.randId():1,G=parseInt(V.p.rowNum,10),k=!1,S=re(I+D+C),R=te(n),M={},N=[],O=Q(X,"rowBox",!0,"jqgrow ui-row-"+V.p.direction),T=$.isFunction(V.p.afterInsertRow),A=[],P=!1,E=$(V).find("tbody:first"),B=C?Q(X,"rownumBox",!1,"jqgrid-rownum"):"",z=I?Q(X,"multiBox",!1,"cbox"):"";for(w&&(V.p.data=[],V.p._index={},V.p.localReader.id=y),V.p.reccount=0,"local"===V.p.datatype?(a=V.p.localReader,n="local"):(a=V.p.jsonReader,n="json"),V.p.page=K($.jgrid.getAccessor(e,a.page),V.p.page),V.p.lastpage=K($.jgrid.getAccessor(e,a.total),1),V.p.records=K($.jgrid.getAccessor(e,a.records)),V.p.userData=$.jgrid.getAccessor(e,a.userdata)||{},D&&(c=$.jgrid.getMethod("addSubGridCell")),m=!1===V.p.keyName?$.isFunction(a.id)?a.id.call(V,e):a.id:V.p.keyName,a.repeatitems&&V.p.keyName&&isNaN(m)&&(m=V.p.keyIndex),null==(f=$.jgrid.getAccessor(e,a.root))&&$.isArray(e)&&(f=e),f||(f=[]),(s=0)<(h=f.length)&&V.p.page<=0&&(V.p.page=1),i&&(G*=i+1),"local"!==V.p.datatype||V.p.deselectAfterSort||(k=!0),V.p.grouping&&(P=!0===V.p.groupingView.groupCollapse,j=$.jgrid.getMethod("groupingPrepare"));s<h;){if(p=f[s],void 0===(b=$.jgrid.getAccessor(p,m))&&("number"==typeof m&&null!=V.p.colModel[m+I+D+C]&&(b=$.jgrid.getAccessor(p,V.p.colModel[m+I+D+C].name)),void 0===b&&(b=F+s,0===q.length&&a.cell))){var U=$.jgrid.getAccessor(p,a.cell)||p;b=null!=U&&void 0!==U[m]?U[m]:b,U=null}b=V.p.idPrefix+b,(k||V.p.preserveSelection)&&(V.p.multiselect?(u=-1!==V.p.selarrrow.indexOf(b),W=u?W+1:W):u=b===V.p.selrow);var H=N.length;for(N.push(""),C&&N.push(ee(0,s,V.p.page,V.p.rowNum,B)),I&&N.push(Z(b,C,s,u,z)),D&&N.push(c.call(_,I+C,s+t)),g=R,a.repeatitems&&(a.cell&&(p=$.jgrid.getAccessor(p,a.cell)||p),$.isArray(p)&&(g=S)),d=0;d<g.length;d++)l=$.jgrid.getAccessor(p,g[d]),M[V.p.colModel[d+I+D+C].name]=l,N.push(J(b,l,d+I+D+C,s+t,p,M));if(N[H]=oe(b,P,u?O+" "+Y:O,M,p),N.push("</tr>"),V.p.grouping&&(A.push(N),V.p.groupingView._locgr||j.call(_,M,s),N=[]),(w||!0===V.p.treeGrid&&!V.p._ald)&&(M[y]=$.jgrid.stripPref(V.p.idPrefix,b),V.p.data.push(M),V.p._index[M[y]]=V.p.data.length-1),!1===V.p.gridview&&(E.append(N.join("")),_.triggerHandler("jqGridAfterInsertRow",[b,M,p]),T&&V.p.afterInsertRow.call(V,b,M,p),N=[]),M={},s++,++x===G)break}if(W=V.p.multiselect&&(V.p.preserveSelection||k)&&x===W,!0===V.p.gridview&&(v=-1<V.p.treeANode?V.p.treeANode:0,V.p.grouping?w||(_.jqGrid("groupingRender",A,V.p.colModel.length,V.p.page,G),A=null):!0===V.p.treeGrid&&0<v?$(V.rows[v]).after(N.join("")):(E.append(N.join("")),V.grid.cols=V.rows[0].cells)),V.p.totaltime=new Date-o,N=null,0<x&&0===V.p.records&&(V.p.records=h),!0===V.p.treeGrid)try{_.jqGrid("setTreeNode",v+1,x+v+1)}catch(e){}if(V.p.reccount=x,V.p.treeANode=-1,V.p.userDataOnFooter&&_.jqGrid("footerData","set",V.p.userData,!0),w&&(V.p.records=h,V.p.lastpage=Math.ceil(h/G)),r||V.updatepager(!1,!0),W&&ae(!0),w){for(;x<h&&f[x];){if(p=f[x],void 0===(b=$.jgrid.getAccessor(p,m))&&("number"==typeof m&&null!=V.p.colModel[m+I+D+C]&&(b=$.jgrid.getAccessor(p,V.p.colModel[m+I+D+C].name)),void 0===b&&(b=F+x,0===q.length&&a.cell))){var L=$.jgrid.getAccessor(p,a.cell)||p;b=null!=L&&void 0!==L[m]?L[m]:b,L=null}if(p){for(b=V.p.idPrefix+b,g=R,a.repeatitems&&(a.cell&&(p=$.jgrid.getAccessor(p,a.cell)||p),$.isArray(p)&&(g=S)),d=0;d<g.length;d++)M[V.p.colModel[d+I+D+C].name]=$.jgrid.getAccessor(p,g[d]);M[y]=$.jgrid.stripPref(V.p.idPrefix,b),V.p.grouping&&j.call(_,M,x),V.p.data.push(M),V.p._index[M[y]]=V.p.data.length-1,M={}}x++}V.p.grouping&&(V.p.groupingView._locgr=!0,_.jqGrid("groupingRender",A,V.p.colModel.length,V.p.page,G),A=null)}if(!0===V.p.subGrid)try{_.jqGrid("addSubGrid",I+C)}catch(e){}}},q=function(e){var t,r,i,o,a=V.p.multiSort?[]:"",n=[],l=!1,p={},s=[],d=[];if($.isArray(V.p.data)){var c,u,g,h=!!V.p.grouping&&V.p.groupingView;if($.each(V.p.colModel,function(){if("cb"===this.name||"subgrid"===this.name||"rn"===this.name)return!0;if(r=this.sorttype||"text",g=this.index||this.name,"date"===r||"datetime"===r?(this.formatter&&"string"==typeof this.formatter&&"date"===this.formatter?(t=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:$.jgrid.getRegional(V,"formatter.date.srcformat"),i=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:$.jgrid.getRegional(V,"formatter.date.newformat")):t=i=this.datefmt||"Y-m-d",p[g]={stype:r,srcfmt:t,newfmt:i,sfunc:this.sortfunc||null,name:this.name}):p[g]={stype:r,srcfmt:"",newfmt:"",sfunc:this.sortfunc||null,name:this.name},V.p.grouping)for(u=0,c=h.groupField.length;u<c;u++)this.name===h.groupField[u]&&(s[u]=p[g],d[u]=g);V.p.multiSort||l||g!==V.p.sortname||(a=g,l=!0)}),V.p.multiSort&&(a=F,n=G),!V.p.treeGrid||!V.p._sort){var f={eq:function(e){return e.equals},ne:function(e){return e.notEquals},lt:function(e){return e.less},le:function(e){return e.lessOrEquals},gt:function(e){return e.greater},ge:function(e){return e.greaterOrEquals},cn:function(e){return e.contains},nc:function(e,t){return"OR"===t?e.orNot().contains:e.andNot().contains},bw:function(e){return e.startsWith},bn:function(e,t){return"OR"===t?e.orNot().startsWith:e.andNot().startsWith},en:function(e,t){return"OR"===t?e.orNot().endsWith:e.andNot().endsWith},ew:function(e){return e.endsWith},ni:function(e,t){return"OR"===t?e.orNot().equals:e.andNot().equals},in:function(e){return e.equals},nu:function(e){return e.isNull},nn:function(e,t){return"OR"===t?e.orNot().isNull:e.andNot().isNull}},m=$.jgrid.from.call(V,V.p.data);if(V.p.ignoreCase&&(m=m.ignoreCase()),!0===V.p.search){var v=V.p.postData.filters;if(v)"string"==typeof v&&(v=$.jgrid.parse(v)),function e(t){var r,i,o,a,n,l,s=0;if(null!=t.groups){for((i=t.groups.length&&"OR"===t.groupOp.toString().toUpperCase())&&m.orBegin(),r=0;r<t.groups.length;r++){0<s&&i&&m.or();try{e(t.groups[r])}catch(e){alert(e)}s++}i&&m.orEnd()}if(null!=t.rules)try{var d;for((o=t.rules.length&&"OR"===t.groupOp.toString().toUpperCase())&&m.orBegin(),r=0;r<t.rules.length;r++){if(n=t.rules[r],a=t.groupOp.toString().toUpperCase(),f[n.op]&&n.field){0<s&&a&&"OR"===a&&(m=m.or()),d=n.field,V.p.useNameForSearch&&p.hasOwnProperty(n.field)&&(d=p[n.field].name);try{"date"===(l=p[n.field]).stype&&l.srcfmt&&l.newfmt&&l.srcfmt!==l.newfmt&&(n.data=$.jgrid.parseDate.call(V,l.newfmt,n.data,l.srcfmt)),m=f[n.op](m,a)(d,n.data,l)}catch(e){}}s++}o&&m.orEnd()}catch(e){alert(e)}}(v);else try{"date"===(o=p[V.p.postData.searchField]).stype&&o.srcfmt&&o.newfmt&&o.srcfmt!==o.newfmt&&(V.p.postData.searchString=$.jgrid.parseDate.call(V,o.newfmt,V.p.postData.searchString,o.srcfmt)),m=f[V.p.postData.searchOper](m)(V.p.postData.searchField,V.p.postData.searchString,p[V.p.postData.searchField])}catch(e){}}else V.p.treeGrid&&"nested"===V.p.treeGridModel&&m.orderBy(V.p.treeReader.left_field,"asc","integer","",null);if(V.p.treeGrid&&"adjacency"===V.p.treeGridModel&&(c=0,a=null),V.p.grouping)for(u=0;u<c;u++)m.orderBy(d[u],h.groupOrder[u],s[u].stype,s[u].srcfmt);V.p.multiSort?$.each(a,function(e){m.orderBy(this,n[e],p[this].stype,p[this].srcfmt,p[this].sfunc)}):a&&V.p.sortorder&&l&&("DESC"===V.p.sortorder.toUpperCase()?m.orderBy(V.p.sortname,"d",p[a].stype,p[a].srcfmt,p[a].sfunc):m.orderBy(V.p.sortname,"a",p[a].stype,p[a].srcfmt,p[a].sfunc));var b=m.select(),j=parseInt(V.p.rowNum,10),y=b.length,w=parseInt(V.p.page,10),_=Math.ceil(y/j),x={};if((V.p.search||V.p.resetsearch)&&V.p.grouping&&V.p.groupingView._locgr){V.p.groupingView.groups=[];var q,I,D,C=$.jgrid.getMethod("groupingPrepare");if(V.p.footerrow&&V.p.userDataOnFooter){for(I in V.p.userData)V.p.userData.hasOwnProperty(I)&&(V.p.userData[I]=0);D=!0}for(q=0;q<y;q++){if(D)for(I in V.p.userData)V.p.userData.hasOwnProperty(I)&&(V.p.userData[I]+=parseFloat(b[q][I]||0));C.call($(V),b[q],q,j)}}return e?b:(b=V.p.treeGrid&&V.p.search?$(V).jqGrid("searchTree",b):b.slice((w-1)*j,w*j),p=m=null,x[V.p.localReader.total]=_,x[V.p.localReader.page]=w,x[V.p.localReader.records]=y,x[V.p.localReader.root]=b,x[V.p.localReader.userdata]=V.p.userData,b=null,x)}$(V).jqGrid("SortTree",a,V.p.sortorder,p[a].stype||"text",p[a].srcfmt||"")}},I=function(){V.grid.hDiv.loading=!0,V.p.hiddengrid||$(V).jqGrid("progressBar",{method:"show",loadtype:V.p.loadui,htmlcontent:$.jgrid.getRegional(V,"defaults.loadtext",V.p.loadtext)})},D=function(){V.grid.hDiv.loading=!1,$(V).jqGrid("progressBar",{method:"hide",loadtype:V.p.loadui})},C=function(e,t,r){var i=$(V).triggerHandler("jqGridBeforeProcessing",[e,t,r]);return i=void 0===i||"boolean"!=typeof i||i,$.isFunction(V.p.beforeProcessing)&&!1===V.p.beforeProcessing.call(V,e,t,r)&&(i=!1),i},k=function(e,t){$(V).triggerHandler("jqGridLoadComplete",[e]),t&&V.p.loadComplete.call(V,e),$(V).triggerHandler("jqGridAfterLoadComplete",[e]),V.p.datatype="local",V.p.datastr=null,D()},S=function(i){if(!V.grid.hDiv.loading){var o,e,a=V.p.scroll&&!1===i,t={},r=V.p.prmNames;W=0,V.p.page<=0&&(V.p.page=Math.min(1,V.p.lastpage)),null!==r.search&&(t[r.search]=V.p.search),null!==r.nd&&(t[r.nd]=(new Date).getTime()),null!==r.rows&&(t[r.rows]=V.p.rowNum),null!==r.page&&(t[r.page]=V.p.page),null!==r.sort&&(t[r.sort]=V.p.sortname),null!==r.order&&(t[r.order]=V.p.sortorder),null!==V.p.rowTotal&&null!==r.totalrows&&(t[r.totalrows]=V.p.rowTotal);var n=$.isFunction(V.p.loadComplete),l=n?V.p.loadComplete:null,s=0;if(1<(i=i||1)?null!==r.npage?(t[r.npage]=i,s=i-1,i=1):l=function(e){V.p.page++,V.grid.hDiv.loading=!1,n&&V.p.loadComplete.call(V,e),S(i-1)}:null!==r.npage&&delete V.p.postData[r.npage],V.p.grouping){$(V).jqGrid("groupingSetup");var d,p=V.p.groupingView,c="";for(d=0;d<p.groupField.length;d++){var u=p.groupField[d];$.each(V.p.colModel,function(e,t){t.name===u&&t.index&&(u=t.index)}),c+=u+" "+p.groupOrder[d]+", "}t[r.sort]=c+t[r.sort]}$.extend(V.p.postData,t);var g=V.p.scroll?V.rows.length-1:1;if($.isFunction(V.p.datatype))return void V.p.datatype.call(V,V.p.postData,"load_"+V.p.id,g,i,s);var h=$(V).triggerHandler("jqGridBeforeRequest");if(!1===h||"stop"===h)return;if($.isFunction(V.p.beforeRequest)&&(!1===(h=V.p.beforeRequest.call(V))||"stop"===h))return;switch($.isFunction(V.treeGrid_beforeRequest)&&V.treeGrid_beforeRequest.call(V),o=V.p.datatype.toLowerCase()){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:V.p.url,type:V.p.mtype,dataType:o,data:$.isFunction(V.p.serializeGridData)?V.p.serializeGridData.call(V,V.p.postData):V.p.postData,success:function(e,t,r){C(e,t,r)?("xml"===o?m(e,g,1<i,s):v(e,g,1<i,s),$(V).triggerHandler("jqGridLoadComplete",[e]),l&&l.call(V,e),$(V).triggerHandler("jqGridAfterLoadComplete",[e]),a&&V.grid.populateVisible(),V.p.treeGrid_bigData?V.p.loadonce&&(V.p.datatype="local"):(V.p.loadonce||V.p.treeGrid)&&(V.p.datatype="local"),e=null,1===i&&D(),$.isFunction(V.treeGrid_afterLoadComplete)&&V.treeGrid_afterLoadComplete.call(V)):D()},error:function(e,t,r){$(V).triggerHandler("jqGridLoadError",[e,t,r]),$.isFunction(V.p.loadError)&&V.p.loadError.call(V,e,t,r),1===i&&D(),e=null},beforeSend:function(e,t){var r=!0;if(r=$(V).triggerHandler("jqGridLoadBeforeSend",[e,t]),$.isFunction(V.p.loadBeforeSend)&&(r=V.p.loadBeforeSend.call(V,e,t)),void 0===r&&(r=!0),!1===r)return!1;I()}},$.jgrid.ajaxOptions,V.p.ajaxGridOptions));break;case"xmlstring":if(I(),e="string"!=typeof V.p.datastr?V.p.datastr:$.parseXML(V.p.datastr),!C(e,200,null))return void D();m(e),k(e,n);break;case"jsonstring":if(I(),e="string"==typeof V.p.datastr?$.jgrid.parse(V.p.datastr):V.p.datastr,!C(e,200,null))return void D();v(e),k(e,n);break;case"local":case"clientside":I(),V.p.datatype="local",V.p._ald=!0;var f=q(!1);if(!C(f,200,null))return void D();v(f,g,1<i,s),$(V).triggerHandler("jqGridLoadComplete",[f]),l&&l.call(V,f),$(V).triggerHandler("jqGridAfterLoadComplete",[f]),a&&V.grid.populateVisible(),D(),V.p._ald=!1}V.p._sort=!1}},ae=function(e){$("#cb_"+$.jgrid.jqID(V.p.id),V.grid.hDiv)[V.p.useProp?"prop":"attr"]("checked",e),(V.p.frozenColumns?V.p.id+"_frozen":"")&&$("#cb_"+$.jgrid.jqID(V.p.id),V.grid.fhDiv)[V.p.useProp?"prop":"attr"]("checked",e)},R=function(e,l){var t,r,i,o,a,n,s,d="<td class='ui-pg-button "+y+"'><span class='ui-separator'></span></td>",p="",c="<table class='ui-pg-table ui-common-table ui-paging-pager'><tbody><tr>",u="",g=function(e,t){var r;return"stop"!==(r=$(V).triggerHandler("jqGridPaging",[e,t]))&&($.isFunction(V.p.onPaging)&&(r=V.p.onPaging.call(V,e,t)),"stop"!==r&&(V.p.selrow=null,V.p.multiselect&&(V.p.preserveSelection||(V.p.selarrrow=[]),ae(!1)),V.p.savedRow=[],!0))};if(e=e.substr(1),l+="_"+e,t="pg_"+e,r=e+"_left",i=e+"_center",o=e+"_right",$("#"+$.jgrid.jqID(e)).append("<div id='"+t+"' class='ui-pager-control' role='group'><table "+Q(X,"pagerTable",!1,"ui-pg-table ui-common-table ui-pager-table")+"><tbody><tr><td id='"+r+"' align='left'></td><td id='"+i+"' align='center' style='white-space:pre;'></td><td id='"+o+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr"),0<V.p.rowList.length){var h;for(u='<td dir="'+j+'">',u+="<select "+Q(X,"pgSelectBox",!1,"ui-pg-selbox")+' size="1" role="listbox" title="'+($.jgrid.getRegional(V,"defaults.pgrecs",V.p.pgrecs)||"")+'">',s=0;s<V.p.rowList.length;s++)1===(h=V.p.rowList[s].toString().split(":")).length&&(h[1]=h[0]),u+='<option role="option" value="'+h[0]+'"'+(K(V.p.rowNum,0)===K(h[0],0)?' selected="selected"':"")+">"+h[1]+"</option>";u+="</select></td>"}if("rtl"===j&&(c+=u),!0===V.p.pginput&&(p="<td id='input"+l+"' dir='"+j+"'>"+$.jgrid.template($.jgrid.getRegional(V,"defaults.pgtext",V.p.pgtext)||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(e)+"'></span>")+"</td>"),!0===V.p.pgbuttons){var f=["first"+l,"prev"+l,"next"+l,"last"+l],m=Q(X,"pgButtonBox",!0,"ui-pg-button"),v=[$.jgrid.getRegional(V,"defaults.pgfirst",V.p.pgfirst)||"",$.jgrid.getRegional(V,"defaults.pgprev",V.p.pgprev)||"",$.jgrid.getRegional(V,"defaults.pgnext",V.p.pgnext)||"",$.jgrid.getRegional(V,"defaults.pglast",V.p.pglast)||""];"rtl"===j&&(f.reverse(),v.reverse()),c+="<td id='"+f[0]+"' class='"+m+"' title='"+v[0]+"'><span "+Q(X,"icon_first",!1,w)+"></span></td>",c+="<td id='"+f[1]+"' class='"+m+"'  title='"+v[1]+"'><span "+Q(X,"icon_prev",!1,w)+"></span></td>",c+=""!==p?d+p+d:"",c+="<td id='"+f[2]+"' class='"+m+"' title='"+v[2]+"'><span "+Q(X,"icon_next",!1,w)+"></span></td>",c+="<td id='"+f[3]+"' class='"+m+"' title='"+v[3]+"'><span "+Q(X,"icon_end",!1,w)+"></span></td>"}else""!==p&&(c+=p);"ltr"===j&&(c+=u),c+="</tr></tbody></table>",!0===V.p.viewrecords&&$("td#"+e+"_"+V.p.recordpos,"#"+t).append("<div dir='"+j+"' style='text-align:"+V.p.recordpos+"' class='ui-paging-info'></div>"),$("td#"+e+"_"+V.p.pagerpos,"#"+t).append(c),n=$("#gbox_"+$.jgrid.jqID(V.p.id)).css("font-size")||"11px",$("#gbox_"+$.jgrid.jqID(V.p.id)).append("<div id='testpg' "+Q(X,"entrieBox",!1,"ui-jqgrid")+" style='font-size:"+n+";visibility:hidden;' ></div>"),a=$(c).clone().appendTo("#testpg").width(),$("#testpg").remove(),0<a&&(""!==p&&(a+=50),$("td#"+e+"_"+V.p.pagerpos,"#"+t).width(a)),V.p._nvtd=[],V.p._nvtd[0]=a?Math.floor((V.p.width-a)/2):Math.floor(V.p.width/3),V.p._nvtd[1]=0,c=null,$(".ui-pg-selbox","#"+t).on("change",function(){return g("records",this)&&(V.p.page=Math.round(V.p.rowNum*(V.p.page-1)/this.value-.5)+1,V.p.rowNum=this.value,V.p.pager&&$(".ui-pg-selbox",V.p.pager).val(this.value),V.p.toppager&&$(".ui-pg-selbox",V.p.toppager).val(this.value),S()),!1}),!0===V.p.pgbuttons&&($(".ui-pg-button","#"+t).hover(function(){$(this).hasClass(y)?this.style.cursor="default":($(this).addClass(_),this.style.cursor="pointer")},function(){$(this).hasClass(y)||($(this).removeClass(_),this.style.cursor="default")}),$("#first"+$.jgrid.jqID(l)+", #prev"+$.jgrid.jqID(l)+", #next"+$.jgrid.jqID(l)+", #last"+$.jgrid.jqID(l)).click(function(){if($(this).hasClass(y))return!1;var e=K(V.p.page,1),t=K(V.p.lastpage,1),r=!1,i=!0,o=!0,a=!0,n=!0;return 0===t||1===t?n=a=o=i=!1:1<t&&1<=e?1===e?o=i=!1:e===t&&(n=a=!1):1<t&&0===e&&(n=a=!1,e=t-1),g(this.id.split("_")[0],this)&&(this.id==="first"+l&&i&&(V.p.page=1,r=!0),this.id==="prev"+l&&o&&(V.p.page=e-1,r=!0),this.id==="next"+l&&a&&(V.p.page=e+1,r=!0),this.id==="last"+l&&n&&(V.p.page=t,r=!0),r&&S()),!1})),!0===V.p.pginput&&$("#"+t).on("keypress","input.ui-pg-input",function(e){return 13===(e.charCode||e.keyCode||0)?(g("user",this)&&($(this).val(K($(this).val(),1)),V.p.page=0<$(this).val()?$(this).val():V.p.page,S()),!1):this})},M=function(e,t,r,i,o){if(V.p.colModel[t].sortable&&!(0<V.p.savedRow.length)){if(r||(V.p.lastsort===t&&""!==V.p.sortname?"asc"===V.p.sortorder?V.p.sortorder="desc":"desc"===V.p.sortorder&&(V.p.sortorder="asc"):V.p.sortorder=V.p.colModel[t].firstsortorder||"asc",V.p.page=1),V.p.multiSort)!function(e,t,r){var i,o=V.p.colModel,a=V.p.frozenColumns?t:V.grid.headers[e].el,n="";$("span.ui-grid-ico-sort",a).addClass(y),$(a).attr("aria-selected","false"),i=o[e].index||o[e].name,void 0===r?o[e].lso?"asc"===o[e].lso?(o[e].lso+="-desc",n="desc"):"desc"===o[e].lso?(o[e].lso+="-asc",n="asc"):"asc-desc"!==o[e].lso&&"desc-asc"!==o[e].lso||(o[e].lso=""):o[e].lso=n=o[e].firstsortorder||"asc":o[e].lso=n=r,n?($("span.s-ico",a).show(),$("span.ui-icon-"+n,a).removeClass(y),$(a).attr("aria-selected","true")):V.p.viewsortcols[0]||$("span.s-ico",a).hide();var l=F.indexOf(i);-1===l?(F.push(i),G.push(n)):n?G[l]=n:(G.splice(l,1),F.splice(l,1)),V.p.sortorder="",V.p.sortname="";for(var s=0,d=F.length;s<d;s++)0<s&&(V.p.sortname+=", "),V.p.sortname+=F[s],s!==d-1&&(V.p.sortname+=" "+G[s]);V.p.sortorder=G[d-1]}(t,o,i);else{if(i){if(V.p.lastsort===t&&V.p.sortorder===i&&!r)return;V.p.sortorder=i}var a,n=V.grid.headers[V.p.lastsort]?V.grid.headers[V.p.lastsort].el:null,l=V.p.frozenColumns?o:V.grid.headers[t].el,s="single"===V.p.viewsortcols[1];(a=$(n).find("span.ui-grid-ico-sort")).addClass(y),s&&$(a).css("display","none"),$(n).attr("aria-selected","false"),V.p.frozenColumns&&((a=V.grid.fhDiv.find("span.ui-grid-ico-sort")).addClass(y),s&&a.css("display","none"),V.grid.fhDiv.find("th").attr("aria-selected","false")),(a=$(l).find("span.ui-icon-"+V.p.sortorder)).removeClass(y),s&&a.css("display",""),$(l).attr("aria-selected","true"),V.p.viewsortcols[0]||(V.p.lastsort!==t?(V.p.frozenColumns&&V.grid.fhDiv.find("span.s-ico").hide(),$("span.s-ico",n).hide(),$("span.s-ico",l).show()):""===V.p.sortname&&$("span.s-ico",l).show()),e=e.substring(5+V.p.id.length+1),V.p.sortname=V.p.colModel[t].index||e}if("stop"!==$(V).triggerHandler("jqGridSortCol",[V.p.sortname,t,V.p.sortorder]))if($.isFunction(V.p.onSortCol)&&"stop"===V.p.onSortCol.call(V,V.p.sortname,t,V.p.sortorder))V.p.lastsort=t;else{if(ae(!1),"local"===V.p.datatype?V.p.deselectAfterSort&&!V.p.preserveSelection&&$(V).jqGrid("resetSelection"):(V.p.selrow=null,V.p.multiselect&&(V.p.preserveSelection||(V.p.selarrrow=[])),V.p.savedRow=[]),V.p.scroll){var d=V.grid.bDiv.scrollLeft;ie.call(V,!0,!1),V.grid.hDiv.scrollLeft=d}V.p.subGrid&&"local"===V.p.datatype&&$("td.sgexpanded","#"+$.jgrid.jqID(V.p.id)).each(function(){$(this).trigger("click")}),V.p._sort=!0,S(),V.p.lastsort=t,V.p.sortname!==e&&t&&(V.p.lastsort=t)}else V.p.lastsort=t}},N=function(e){var t,r=V.grid.headers,i=$.jgrid.getCellIndex(e);for(t=0;t<r.length;t++)if(e===r[t].el){i=t;break}return i},O=function(){var e='{"groupOp":"AND","rules":[], "groups" : [',t=0;for(var r in V.p.colFilters)if(V.p.colFilters.hasOwnProperty(r)){var i=V.p.colFilters[r];$.isEmptyObject(i)||(0<t&&(e+=","),e+='{"groupOp": "'+i.rule+'", "rules" : [',e+='{"field":"'+r+'",',e+='"op":"'+i.oper1+'",',i.value1+="",e+='"data":"'+i.value1.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',i.value2&&(e+=',{"field":"'+r+'",',e+='"op":"'+i.oper2+'",',i.value2+="",e+='"data":"'+i.value2.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}'),e+="]}",t++)}return e+="]}"},T=function(l,e,t){var r=$(b.hDiv).height()-$(".ui-search-toolbar",b.hDiv).height();$(b.cDiv).is(":hidden")||(r+=$(b.cDiv).outerHeight()),V.p.toolbar[1]&&"bottom"!==V.p.toolbar[2]&&null!==$(b.uDiv)&&(r+=$(b.uDiv).outerHeight()),V.p.toppager&&(r+=$("#"+V.p.id+"_toppager").outerHeight()),e=parseInt(e,10),t=parseInt(t,10)+r;var s,d,i="",o="",p=V.p.colModel[l],a=$.extend({sorting:!0,columns:!0,filtering:!0,seraching:!0,grouping:!0,freeze:!0},p.coloptions),n=$.jgrid.getRegional(V,"colmenu"),c=V.p.colNames[l],u=[],g=$.trim(p.name);for(var h in u.push(i),a.sorting&&(i='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="sortasc"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+x.icon_sort_asc+'"></span></td><td class="menu_text">'+n.sortasc+"</td></tr></table></a></li>",i+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="sortdesc"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+x.icon_sort_desc+'"></span></td><td class="menu_text">'+n.sortdesc+"</td></tr></table></a></li>",u.push(i)),a.columns&&(i='<li class="ui-menu-item divider" role="separator"></li>',i+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="columns"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+x.icon_columns+'"></span></td><td class="menu_text">'+n.columns+"</td></tr></table></a></li>",u.push(i)),a.filtering&&(i='<li class="ui-menu-item divider" role="separator"></li>',i+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="filtering"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+x.icon_filter+'"></span></td><td class="menu_text">'+n.filter+" "+c+"</td></tr></table></a></li>",u.push(i)),a.grouping&&(s=$.inArray(p.name,V.p.groupingView.groupField),i='<li class="ui-menu-item divider" role="separator"></li>',i+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="grouping"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+x.icon_group+'"></span></td><td class="menu_text">'+(-1!==s?n.ungrouping:n.grouping+" "+c)+"</td></tr></table></a></li>",u.push(i)),a.freeze&&(d=!p.frozen||!V.p.frozenColumns,i='<li class="ui-menu-item divider" role="separator"></li>',i+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="freeze"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+x.icon_freeze+'"></span></td><td class="menu_text">'+(d?n.freeze+" "+c:n.unfreeze)+"</td></tr></table></a></li>",u.push(i)),V.p.colMenuCustom)if(V.p.colMenuCustom.hasOwnProperty(h)){var f=V.p.colMenuCustom[h],m=f.exclude.split(",");m=$.map(m,function(e){return $.trim(e)}),(f.colname===g||"_all_"===f.colname&&-1===$.inArray(g,m))&&(o='<li class="ui-menu-item divider" role="separator"></li>',i='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="'+f.id+'"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+f.icon+'"></span></td><td class="menu_text">'+f.title+"</td></tr></table></a></li>","last"===f.position?(u.push(o),u.push(i)):"first"===f.position&&(u.unshift(o),u.unshift(i)))}if(u.unshift('<ul id="column_menu" role="menu" tabindex="0">'),u.push("</ul>"),$("#gbox_"+V.p.id).append(u.join("")),$("#column_menu").addClass("ui-search-menu modal-content column-menu jqgrid-column-menu ui-menu "+x.menu_widget).css({left:e,top:t}),"ltr"===V.p.direction){var v=$("#column_menu").width()+26;$("#column_menu").css("left",e-v+"px")}$("#column_menu > li > a").hover(function(){var e;$("#col_menu").remove(),$("#search_menu").remove(),"columns"===$(this).attr("data-value")&&(e=$(this).parent().width()+8,$(this).parent().position().top,function(e,t,r){var i,o=V.p.colModel,a=o.length,n=[],l=$.jgrid.getRegional(V,"colmenu"),s='<ul id="col_menu" class="ui-search-menu  ui-col-menu modal-content" role="menu" tabindex="0" style="left:'+t+'px;">';for(i=0;i<a;i++){var d=o[i].hidden?"":"checked",p=o[i].name,c=V.p.colNames[i];s+="<li "+("cb"===p||"subgrid"===p||"rn"===p||o[i].hidedlg?"style='display:none'":"")+' class="ui-menu-item" role="presentation" draggable="true"><a class="g-menu-item" tabindex="0" role="menuitem" ><table class="ui-common-table" ><tr><td class="menu_icon" title="'+l.reorder+'"><span class="'+w+" "+x.icon_move+' notclick"></span></td><td class="menu_icon"><input class="'+x.input_checkbox+'" type="checkbox" name="'+p+'" '+d+'></td><td class="menu_text">'+c+"</td></tr></table></a></li>",n.push(i)}s+="</ul>",$(r).append(s),$("#col_menu").addClass("ui-menu "+x.menu_widget),$.jgrid.isElementInViewport($("#col_menu")[0])||$("#col_menu").css("left",-parseInt($("#column_menu").innerWidth(),10)+"px"),$.fn.html5sortable()&&$("#col_menu").html5sortable({handle:"span",forcePlaceholderSize:!0}).on("sortupdate",function(e,t){for(n.splice(t.startindex,1),n.splice(t.endindex,0,t.startindex),$(V).jqGrid("destroyFrozenColumns"),$(V).jqGrid("remapColumns",n,!0),$(V).triggerHandler("jqGridColMenuColumnDone",[n,null,null]),$.isFunction(V.p.colMenuColumnDone)&&V.p.colMenuColumnDone.call(V,n,null,null),$(V).jqGrid("setFrozenColumns"),i=0;i<a;i++)n[i]=i}),$("#col_menu > li > a").on("click",function(e){var t,r;$(e.target).hasClass("notclick")||($(e.target).is(":input")?t=$(e.target).is(":checked"):(t=!$("input",this).is(":checked"),$("input",this).prop("checked",t)),r=$("input",this).attr("name"),$(V).triggerHandler("jqGridColMenuColumnDone",[n,r,t]),$.isFunction(V.p.colMenuColumnDone)&&V.p.colMenuColumnDone.call(V,n,r,t),t?($(V).jqGrid("showCol",r),$(this).parent().attr("draggable","true")):($(V).jqGrid("hideCol",r),$(this).parent().attr("draggable","false")))}).hover(function(){$(this).addClass(_)},function(){$(this).removeClass(_)})}(0,e,$(this).parent())),"filtering"===$(this).attr("data-value")&&(e=$(this).parent().width()+8,$(this).parent().position().top,function(e,t,r,i){var o,a,n,l,s,d=V.p.colModel[e],p="",c="",u="",g="",h="",f="",m=$.jgrid.getRegional(V,"search"),v=$.jgrid.styleUI[V.p.styleUI||"jQueryUI"].common;if(d){(o=!(!V.p.colFilters||!V.p.colFilters[d.name])&&V.p.colFilters[d.name])&&!$.isEmptyObject(o)&&(p=o.oper1,c=o.value1,u=o.rule,g=o.oper2,h=o.value2),d.searchoptions||(d.searchoptions={}),a=d.searchoptions.sopt?d.searchoptions.sopt:"text"===d.sorttype?["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"]:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],n=d.searchoptions.groupOps?d.searchoptions.groupOps:m.groupOps,s=$("<form></form>");var b="<div>"+$.jgrid.getRegional(V,"colmenu.searchTitle")+"</div>";b+='<div><select size="1" id="oper1" class="'+x.filter_select+'">',$.each(m.odata,function(e,t){l=t.oper===p?'selected="selected"':"",-1!==$.inArray(t.oper,a)&&(f+='<option value="'+t.oper+'" '+l+">"+t.text+"</option>")}),b+=f,b+="</select></div>",s.append(b);var j="";d.searchoptions.defaultValue&&(j=$.isFunction(d.searchoptions.defaultValue)?d.searchoptions.defaultValue.call(V):d.searchoptions.defaultValue),c&&(j=c);var y=$.extend(d.searchoptions,{name:d.index||d.name,id:"sval1_"+V.p.idPrefix+d.name,oper:"search"}),w=$.jgrid.createEl.call(V,d.stype,y,j,!1,$.extend({},$.jgrid.ajaxOptions,V.p.ajaxSelectOptions||{}));$(w).addClass(x.filter_input),b=$("<div></div>").append(w),s.append(b),b='<div><select size="1" id="operand" class="'+x.filter_select+'">',$.each(n,function(e,t){l=t.op===u?'selected="selected"':"",b+="<option value='"+t.op+"' "+l+">"+t.text+"</option>"}),b+="</select></div>",s.append(b),f="",$.each(m.odata,function(e,t){l=t.oper===g?'selected="selected"':"",-1!==$.inArray(t.oper,a)&&(f+='<option value="'+t.oper+'" '+l+">"+t.text+"</option>")}),b='<div><select size="1" id="oper2" class="'+x.filter_select+'">'+f+"</select></div>",s.append(b),j=h||"",y=$.extend(d.searchoptions,{name:d.index||d.name,id:"sval2_"+V.p.idPrefix+d.name,oper:"search"}),w=$.jgrid.createEl.call(V,d.stype,y,j,!1,$.extend({},$.jgrid.ajaxOptions,V.p.ajaxSelectOptions||{})),$(w).addClass(x.filter_input),b=$("<div></div>").append(w),s.append(b),b="<div>",b+="<div class='search_buttons'><a tabindex='0' id='bs_reset' class='fm-button "+v.button+" ui-reset'>"+m.Reset+"</a></div>",b+="<div class='search_buttons'><a tabindex='0' id='bs_search' class='fm-button "+v.button+" ui-search'>"+m.Find+"</a></div>",b+="</div>",s.append(b),s=$('<li class="ui-menu-item" role="presentation"></li>').append(s),s=$('<ul id="search_menu" class="ui-search-menu modal-content" role="menu" tabindex="0" style="left:'+r+'px;"></ul>').append(s),$(i).append(s),$("#search_menu").addClass("ui-menu "+x.menu_widget),$.jgrid.isElementInViewport($("#search_menu")[0])||$("#search_menu").css("left",-parseInt($("#column_menu").innerWidth(),10)+"px"),$("#bs_reset, #bs_search","#search_menu").hover(function(){$(this).addClass(_)},function(){$(this).removeClass(_)}),$("#bs_reset",s).on("click",function(e){V.p.colFilters[d.name]={},V.p.postData.filters=O(),V.p.search=!1,$(V).trigger("reloadGrid"),$("#column_menu").remove()}),$("#bs_search",s).on("click",function(e){V.p.colFilters[d.name]={oper1:$("#oper1","#search_menu").val(),value1:$("#sval1_"+V.p.idPrefix+d.name,"#search_menu").val(),rule:$("#operand","#search_menu").val(),oper2:$("#oper2","#search_menu").val(),value2:$("#sval2_"+V.p.idPrefix+d.name,"#search_menu").val()},V.p.postData.filters=O(),V.p.search=!0,$(V).trigger("reloadGrid"),$("#column_menu").remove()})}}(l,0,e,$(this).parent())),$(this).addClass(_)},function(){$(this).removeClass(_)}).click(function(){var e,t,r,i,o=$(this).attr("data-value"),a=V.grid.headers[l].el;if("sortasc"===o?M("jqgh_"+V.p.id+"_"+p.name,l,!0,"asc",a):"sortdesc"===o?M("jqgh_"+V.p.id+"_"+p.name,l,!0,"desc",a):"grouping"===o?(e=l,t=s,r=V.p.colModel[e],i=V.p.groupingView,-1!==t?i.groupField.splice(t,1):i.groupField.push(r.name),$(V).jqGrid("groupingGroupBy",i.groupField),V.p.frozenColumns&&($(V).jqGrid("destroyFrozenColumns"),$(V).jqGrid("setFrozenColumns"))):"freeze"===o&&function(e,t){var r,i=[],o=V.p.colModel.length,a=-1,n=V.p.colModel;for(r=0;r<o;r++)n[r].frozen&&(a=r),i.push(r);i.splice(e,1),i.splice(a+(t?1:0),0,e),n[e].frozen=t,$(V).jqGrid("destroyFrozenColumns"),$(V).jqGrid("remapColumns",i,!0),$(V).jqGrid("setFrozenColumns")}(l,d),-1===o.indexOf("sort")&&"grouping"!==o&&"freeze"!==o||$(this).remove(),V.p.colMenuCustom.hasOwnProperty(o)){var n=V.p.colMenuCustom[o];$.isFunction(n.funcname)&&(n.funcname.call(V,g),n.closeOnRun&&$(this).remove())}}),parseFloat($("#column_menu").css("left"))<0&&$("#column_menu").css("left",$(V).css("left"))};for((V.p.colMenu||V.p.menubar)&&$("body").on("click",function(e){if(!$(e.target).closest("#column_menu").length)try{$("#column_menu").remove()}catch(e){}if(!$(e.target).closest(".ui-jqgrid-menubar").length)try{$("#"+V.p.id+"_menubar").hide()}catch(e){}}),this.p.id=this.id,-1===$.inArray(V.p.multikey,["shiftKey","altKey","ctrlKey"])&&(V.p.multikey=!1),V.p.keyName=!1,i=0;i<V.p.colModel.length;i++)d="string"==typeof V.p.colModel[i].template?null!=$.jgrid.cmTemplate&&"object"==typeof $.jgrid.cmTemplate[V.p.colModel[i].template]?$.jgrid.cmTemplate[V.p.colModel[i].template]:{}:V.p.colModel[i].template,V.p.colModel[i]=$.extend(!0,{},V.p.cmTemplate,d||{},V.p.colModel[i]),!1===V.p.keyName&&!0===V.p.colModel[i].key&&(V.p.keyName=V.p.colModel[i].name,V.p.keyIndex=i);if(V.p.sortorder=V.p.sortorder.toLowerCase(),$.jgrid.cell_width=$.jgrid.cellWidth(),!0===V.p.grouping&&(V.p.scroll=!1,V.p.rownumbers=!1,V.p.treeGrid=!1,V.p.gridview=!0),!0===this.p.treeGrid){try{$(this).jqGrid("setTreeGrid")}catch(e){}"local"!==V.p.datatype&&(V.p.localReader={id:"_id_"})}if(this.p.subGrid)try{$(V).jqGrid("setSubGrid")}catch(e){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:$.jgrid.cell_width?V.p.multiselectWidth+V.p.cellLayout:V.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0,classes:"jqgrid-multibox"})),this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:V.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})),V.p.xmlReader=$.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},V.p.xmlReader),V.p.jsonReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},V.p.jsonReader),V.p.localReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},V.p.localReader),V.p.scroll&&(V.p.pgbuttons=!1,V.p.pginput=!1,V.p.rowList=[]),V.p.data.length&&(h(),f());var A,P,E,B,z,U,H,L,ne,le="<thead><tr class='ui-jqgrid-labels' role='row'>",se="",de="",pe="";if(!0===V.p.shrinkToFit&&!0===V.p.forceFit)for(i=V.p.colModel.length-1;0<=i;i--)if(!V.p.colModel[i].hidden){V.p.colModel[i].resizable=!1;break}if("horizontal"===V.p.viewsortcols[1]?(de=" ui-i-asc",pe=" ui-i-desc"):"single"===V.p.viewsortcols[1]&&(de=" ui-single-sort-asc",pe=" ui-single-sort-desc",se=" style='display:none'",V.p.viewsortcols[0]=!1),A=n?"class='ui-th-div-ie'":"",L="<span class='s-ico' style='display:none'>",L+="<span sort='asc'  class='ui-grid-ico-sort ui-icon-asc"+de+" ui-sort-"+j+" "+y+" "+w+" "+Q(X,"icon_asc",!0)+"'"+se+"></span>",L+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+pe+" ui-sort-"+j+" "+y+" "+w+" "+Q(X,"icon_desc",!0)+"'"+se+"></span></span>",V.p.multiSort&&V.p.sortname)for(F=V.p.sortname.split(","),i=0;i<F.length;i++)l=$.trim(F[i]).split(" "),F[i]=$.trim(l[0]),G[i]=l[1]?$.trim(l[1]):V.p.sortorder||"asc";for(i=0;i<this.p.colNames.length;i++){var ce=V.p.headertitles?' title="'+(V.p.colModel[i].tooltip?V.p.colModel[i].tooltip:$.jgrid.stripHtml(V.p.colNames[i]))+'"':"";(ne=V.p.colModel[i]).hasOwnProperty("colmenu")||(ne.colmenu="rn"!==ne.name&&"cb"!==ne.name&&"subgrid"!==ne.name),le+="<th id='"+V.p.id+"_"+ne.name+"' role='columnheader' "+Q(X,"headerBox",!1,"ui-th-column ui-th-"+j+("cb"===ne.name?" jqgrid-multibox":""))+" "+ce+">",P=ne.index||ne.name,le+="<div class='ui-th-div' id='jqgh_"+V.p.id+"_"+ne.name+"' "+A+">"+V.p.colNames[i],ne.width?ne.width=parseInt(ne.width,10):ne.width=150,"boolean"!=typeof ne.title&&(ne.title=!0),ne.lso="",P===V.p.sortname&&(V.p.lastsort=i),V.p.multiSort&&-1!==(l=$.inArray(P,F))&&(ne.lso=G[l]),le+=L,V.p.colMenu&&ne.colmenu&&(le+="<a class='"+("ltr"===V.p.direction?"colmenu":"colmenu-rtl")+"'><span class='colmenuspan "+w+" "+x.icon_menu+"'></span></a>"),le+="</div></th>"}if(le+="</tr></thead>",ne=L=null,$(this).append(le),$("thead tr:first th",this).hover(function(){$(this).addClass(_)},function(){$(this).removeClass(_)}),this.p.multiselect){var ue,ge=[];$("#cb_"+$.jgrid.jqID(V.p.id),this).on("click",function(){V.p.preserveSelection||(V.p.selarrrow=[]);var r=!0===V.p.frozenColumns?V.p.id+"_frozen":"";this.checked?($(V.rows).each(function(e){0<e&&($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass(y)||$(this).hasClass("jqfoot")||($("#jqg_"+$.jgrid.jqID(V.p.id)+"_"+$.jgrid.jqID(this.id))[V.p.useProp?"prop":"attr"]("checked",!0),$(this).addClass(Y).attr("aria-selected","true"),V.p.preserveSelection?-1===V.p.selarrrow.indexOf(this.id)&&V.p.selarrrow.push(this.id):V.p.selarrrow.push(this.id),V.p.selrow=this.id,r&&($("#jqg_"+$.jgrid.jqID(V.p.id)+"_"+$.jgrid.jqID(this.id),V.grid.fbDiv)[V.p.useProp?"prop":"attr"]("checked",!0),$("#"+$.jgrid.jqID(this.id),V.grid.fbDiv).addClass(Y))))}),ue=!0,ge=[]):($(V.rows).each(function(e){if(0<e&&!($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass(y)||$(this).hasClass("jqfoot"))){if($("#jqg_"+$.jgrid.jqID(V.p.id)+"_"+$.jgrid.jqID(this.id))[V.p.useProp?"prop":"attr"]("checked",!1),$(this).removeClass(Y).attr("aria-selected","false"),ge.push(this.id),V.p.preserveSelection){var t=V.p.selarrrow.indexOf(this.id);-1<t&&V.p.selarrrow.splice(t,1)}r&&($("#jqg_"+$.jgrid.jqID(V.p.id)+"_"+$.jgrid.jqID(this.id),V.grid.fbDiv)[V.p.useProp?"prop":"attr"]("checked",!1),$("#"+$.jgrid.jqID(this.id),V.grid.fbDiv).removeClass(Y))}}),V.p.selrow=null,ue=!1),$(V).triggerHandler("jqGridSelectAll",[ue?V.p.selarrrow:ge,ue]),$.isFunction(V.p.onSelectAll)&&V.p.onSelectAll.call(V,ue?V.p.selarrrow:ge,ue)})}if(!0===V.p.autowidth){var he=$(s).parent().width();ne=$(window).width(),V.p.width=3<ne-he?he:ne}var fe,me,$e,ve,be,je,ye,we,_e,xe,qe="",Ie=-1!==V.p.styleUI.search("Bootstrap")?2:0;be=0,je=$.jgrid.cell_width?0:K(V.p.cellLayout,0),ye=0,we=K(V.p.scrollOffset,0),_e=!1,xe=0,$.each(V.p.colModel,function(){if(void 0===this.hidden&&(this.hidden=!1),V.p.grouping&&V.p.autowidth){var e=$.inArray(this.name,V.p.groupingView.groupField);0<=e&&V.p.groupingView.groupColumnShow.length>e&&(this.hidden=!V.p.groupingView.groupColumnShow[e])}this.widthOrg=me=K(this.width,0),!1===this.hidden&&(be+=me+je,this.fixed?xe+=me+je:ye++)}),isNaN(V.p.width)&&(V.p.width=be+(!1!==V.p.shrinkToFit||isNaN(V.p.height)?0:we)),b.width=parseInt(V.p.width,10),V.p.tblwidth=be,!1===V.p.shrinkToFit&&!0===V.p.forceFit&&(V.p.forceFit=!1),!0===V.p.shrinkToFit&&0<ye&&($e=b.width-je*ye-xe,isNaN(V.p.height)||($e-=we,_e=!0),be=0,$.each(V.p.colModel,function(e){!1!==this.hidden||this.fixed||(me=Math.round($e*this.width/(V.p.tblwidth-je*ye-xe)),this.width=me,be+=me,fe=e)}),ve=0,_e?b.width-xe-(be+je*ye)!==we&&(ve=b.width-xe-(be+je*ye)-we):_e||0===Math.abs(b.width-xe-(be+je*ye))||(ve=b.width-xe-(be+je*ye)-Ie),V.p.colModel[fe].width+=ve,V.p.tblwidth=be+ve+je*ye+xe,V.p.tblwidth>V.p.width&&(V.p.colModel[fe].width-=V.p.tblwidth-parseInt(V.p.width,10),V.p.tblwidth=V.p.width)),$(s).css("width",b.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+V.p.id+"'>&#160;</div>"),V.p.scrollPopUp&&$(s).append("<div "+Q(X,"scrollBox",!1,"loading ui-scroll-popup")+" id='scroll_g"+V.p.id+"'></div>"),$(o).css("width",b.width+"px"),le=$("thead:first",V).get(0),V.p.footerrow&&(qe+="<table role='presentation' style='width:"+V.p.tblwidth+"px' "+Q(X,"footerTable",!1,"ui-jqgrid-ftable ui-common-table")+"><tbody><tr role='row' "+Q(X,"footerBox",!1,"footrow footrow-"+j)+">");var De=$("tr:first",le),Ce="<tr class='jqgfirstrow' role='row'>";if(V.p.disableClick=!1,$("th",De).each(function(e){ne=V.p.colModel[e],E=ne.width,void 0===ne.resizable&&(ne.resizable=!0),ne.resizable?(B=document.createElement("span"),$(B).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+j).css("cursor","col-resize"),$(this).addClass(V.p.resizeclass)):B="",$(this).css("width",E+"px").prepend(B),B=null;var t="";ne.hidden&&($(this).css("display","none"),t="display:none;"),Ce+="<td role='gridcell' style='height:0px;width:"+E+"px;"+t+"'></td>",b.headers[e]={width:E,el:this},"boolean"!=typeof(se=ne.sortable)&&(ne.sortable=!0,se=!0);var r=ne.name;"cb"!==r&&"subgrid"!==r&&"rn"!==r&&V.p.viewsortcols[2]&&$(">div",this).addClass("ui-jqgrid-sortable"),se&&(V.p.multiSort?V.p.viewsortcols[0]?($("div span.s-ico",this).show(),ne.lso&&$("div span.ui-icon-"+ne.lso,this).removeClass(y).css("display","")):ne.lso&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+ne.lso,this).removeClass(y).css("display","")):V.p.viewsortcols[0]?($("div span.s-ico",this).show(),e===V.p.lastsort&&$("div span.ui-icon-"+V.p.sortorder,this).removeClass(y).css("display","")):e===V.p.lastsort&&""!==V.p.sortname&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+V.p.sortorder,this).removeClass(y).css("display",""))),V.p.footerrow&&(qe+="<td role='gridcell' "+p(e,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(e){if(1===$(e.target).closest("th>span.ui-jqgrid-resize").length){var t,r,i,o=N(this);return!0===V.p.forceFit&&(V.p.nv=function(e){var t,r=e,i=e;for(t=e+1;t<V.p.colModel.length;t++)if(!0!==V.p.colModel[t].hidden){i=t;break}return i-r}(o)),b.dragStart(o,e,(t=o,r=$(V.grid.headers[t].el),i=[r.position().left+r.outerWidth()],"rtl"===V.p.direction&&(i[0]=V.p.width-i[0]),i[0]-=V.grid.bDiv.scrollLeft,i.push($(V.grid.hDiv).position().top),i.push($(V.grid.bDiv).offset().top-$(V.grid.hDiv).offset().top+$(V.grid.bDiv).height()),i)),!1}}).click(function(e){if(V.p.disableClick)return V.p.disableClick=!1;var t,r,i="th>div.ui-jqgrid-sortable";V.p.viewsortcols[2]||(i="th>div>span>span.ui-grid-ico-sort");var o=$(e.target).closest(i);if(1===o.length){var a;if(V.p.frozenColumns){var n=$(this)[0].id.substring(V.p.id.length+1);$(V.p.colModel).each(function(e){if(this.name===n)return a=e,!1})}else a=N(this);if($(e.target).hasClass("colmenuspan")){null!=$("#column_menu")[0]&&$("#column_menu").remove();var l=$.jgrid.getCellIndex(e.target);if(-1===l)return;var s=$(this).offset(),d=s.left,p=s.top;return"ltr"===V.p.direction&&(d+=$(this).outerWidth()),T(l,d,p),!0===V.p.menubar&&$("#"+V.p.id+"_menubar").hide(),void e.stopPropagation()}return V.p.viewsortcols[2]||(t=!0,r=o.attr("sort")),null!=a&&M($("div",this)[0].id,a,t,r,this),!1}}),ne=null,V.p.sortable&&$.fn.sortable)try{$(V).jqGrid("sortableColumns",De)}catch(e){}V.p.footerrow&&(qe+="</tr></tbody></table>"),Ce+="</tr>",H=document.createElement("tbody"),this.appendChild(H),$(this).addClass(Q(X,"rowTable",!0,"ui-jqgrid-btable ui-common-table")).append(Ce),V.p.altRows&&$(this).addClass(Q(X,"stripedTable",!0,"")),Ce=null;var Fe,Ge,ke,Se=$("<table "+Q(X,"headerTable",!1,"ui-jqgrid-htable ui-common-table")+" style='width:"+V.p.tblwidth+"px' role='presentation' aria-labelledby='gbox_"+this.id+"'></table>").append(le),Re=!(!V.p.caption||!0!==V.p.hiddengrid),Me=$("<div class='ui-jqgrid-hbox"+("rtl"===j?"-rtl":"")+"'></div>");le=null,b.hDiv=document.createElement("div"),b.hDiv.style.width=b.width-Ie+"px",b.hDiv.className=Q(X,"headerDiv",!0,"ui-jqgrid-hdiv"),$(b.hDiv).append(Me),$(Me).append(Se),Se=null,Re&&$(b.hDiv).hide(),V.p.pager&&("string"==typeof V.p.pager?"#"!==V.p.pager.substr(0,1)&&(V.p.pager="#"+V.p.pager):V.p.pager="#"+$(V.p.pager).attr("id"),$(V.p.pager).css({width:b.width-Ie+"px"}).addClass(Q(X,"pagerBox",!0,"ui-jqgrid-pager")).appendTo(s),Re&&$(V.p.pager).hide(),R(V.p.pager,"")),!1===V.p.cellEdit&&!0===V.p.hoverrows&&$(V).on({mouseover:function(e){U=$(e.target).closest("tr.jqgrow"),"ui-subgrid"!==$(U).attr("class")&&$(U).addClass(_)},mouseout:function(e){U=$(e.target).closest("tr.jqgrow"),$(U).removeClass(_)}}),$(V).before(b.hDiv).on({click:function(e){if(z=e.target,U=$(z,V.rows).closest("tr.jqgrow"),0===$(U).length||-1<U[0].className.indexOf(y)||($(z,V).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==V.id)return this;var t=$(z).filter(":enabled").hasClass("cbox"),r=$(V).triggerHandler("jqGridBeforeSelectRow",[U[0].id,e]);if(r=!1!==r&&"stop"!==r,$.isFunction(V.p.beforeSelectRow)){var i=V.p.beforeSelectRow.call(V,U[0].id,e);!1!==i&&"stop"!==i||(r=!1)}if("A"!==z.tagName&&("INPUT"!==z.tagName&&"TEXTAREA"!==z.tagName&&"OPTION"!==z.tagName&&"SELECT"!==z.tagName||t))if(Fe=U[0].id,0<(z=$(z).closest("tr.jqgrow>td")).length&&(Ge=$.jgrid.getCellIndex(z)),!0!==V.p.cellEdit){if(0<z.length&&(ke=$(z).closest("td,th").html(),$(V).triggerHandler("jqGridCellSelect",[Fe,Ge,ke,e]),$.isFunction(V.p.onCellSelect)&&V.p.onCellSelect.call(V,Fe,Ge,ke,e)),r)if(V.p.multimail&&V.p.multiselect){if(e.shiftKey){if(t){var o=$(V).jqGrid("getGridParam","selrow"),a=$(V).jqGrid("getInd",Fe),n=$(V).jqGrid("getInd",o),l="",s="";n<a?(l=o,s=Fe):(l=Fe,s=o);var d=!1,p=!1,c=!0;return-1<$.inArray(Fe,V.p.selarrrow)&&(c=!1),$.each($(this).getDataIDs(),function(e,t){return(p=t===l||p)&&$(V).jqGrid("resetSelection",t),t!==s}),c&&$.each($(this).getDataIDs(),function(e,t){return(d=t===l||d)&&$(V).jqGrid("setSelection",t,!1),t!==s}),void(V.p.selrow=n<a?s:l)}window.getSelection().removeAllRanges()}ze(Fe,t,e,!1)}else V.p.multikey?e[V.p.multikey]?$(V).jqGrid("setSelection",Fe,!0,e):V.p.multiselect&&t&&(t=$("#jqg_"+$.jgrid.jqID(V.p.id)+"_"+Fe).is(":checked"),$("#jqg_"+$.jgrid.jqID(V.p.id)+"_"+Fe)[V.p.useProp?"prop":"attr"]("checked",!t)):ze(Fe,t,e,!0)}else if(V.p.multiselect&&t&&r)$(V).jqGrid("setSelection",Fe,!0,e);else if(0<z.length)try{$(V).jqGrid("editCell",U[0].rowIndex,Ge,!0,e)}catch(e){}},reloadGrid:function(e,t){if(!0===V.p.treeGrid&&(V.p.datatype=V.p.treedatatype),(t=t||{}).current&&V.grid.selectionPreserver(V),"local"===V.p.datatype?($(V).jqGrid("resetSelection"),V.p.data.length&&(h(),f())):V.p.treeGrid||(V.p.selrow=null,V.p.multiselect&&(V.p.preserveSelection||(V.p.selarrrow=[],ae(!1))),V.p.savedRow=[]),V.p.scroll&&ie.call(V,!0,!1),t.page){var r=t.page;r>V.p.lastpage&&(r=V.p.lastpage),r<1&&(r=1),V.p.page=r,V.grid.prevRowHeight?V.grid.bDiv.scrollTop=(r-1)*V.grid.prevRowHeight*V.p.rowNum:V.grid.bDiv.scrollTop=0}return V.grid.prevRowHeight&&V.p.scroll&&void 0===t.page?(delete V.p.lastpage,V.grid.populateVisible()):V.grid.populate(),!0===V.p.inlineNav&&$(V).jqGrid("showAddEditButtons"),!1},dblclick:function(e){if(z=e.target,U=$(z,V.rows).closest("tr.jqgrow"),0!==$(U).length){Fe=U[0].rowIndex,Ge=$.jgrid.getCellIndex(z);var t=$(V).triggerHandler("jqGridDblClickRow",[$(U).attr("id"),Fe,Ge,e]);return null!=t?t:$.isFunction(V.p.ondblClickRow)&&null!=(t=V.p.ondblClickRow.call(V,$(U).attr("id"),Fe,Ge,e))?t:void 0}},contextmenu:function(e){if(z=e.target,U=$(z,V.rows).closest("tr.jqgrow"),0!==$(U).length){V.p.multiselect||$(V).jqGrid("setSelection",U[0].id,!0,e),Fe=U[0].rowIndex,Ge=$.jgrid.getCellIndex(z);var t=$(V).triggerHandler("jqGridRightClickRow",[$(U).attr("id"),Fe,Ge,e]);return null!=t?t:$.isFunction(V.p.onRightClickRow)&&null!=(t=V.p.onRightClickRow.call(V,$(U).attr("id"),Fe,Ge,e))?t:void 0}}}),b.bDiv=document.createElement("div"),n&&"auto"===String(V.p.height).toLowerCase()&&(V.p.height="100%"),$(b.bDiv).append($('<div style="position:relative;"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:V.p.height+(isNaN(V.p.height)?"":"px"),width:b.width-Ie+"px"}).scroll(b.scrollGrid),$("table:first",b.bDiv).css({width:V.p.tblwidth+"px"}),$.support.tbody||2===$("tbody",this).length&&$("tbody:gt(0)",this).remove(),V.p.multikey&&($.jgrid.msie()?$(b.bDiv).on("selectstart",function(){return!1}):$(b.bDiv).on("mousedown",function(){return!1})),Re&&$(b.bDiv).hide();var Ne=w+" "+Q(X,"icon_caption_open",!0),Oe=w+" "+Q(X,"icon_caption_close",!0);b.cDiv=document.createElement("div");var Te=!0===V.p.hidegrid?$("<a role='link' class='ui-jqgrid-titlebar-close HeaderButton "+a+"' title='"+($.jgrid.getRegional(V,"defaults.showhide",V.p.showhide)||"")+"' />").hover(function(){Te.addClass(_)},function(){Te.removeClass(_)}).append("<span class='ui-jqgrid-headlink "+Ne+"'></span>").css("rtl"===j?"left":"right","0px"):"";if($(b.cDiv).append(Te).append("<span class='ui-jqgrid-title'>"+V.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+("rtl"===j?"-rtl":"")+" "+Q(X,"gridtitleBox",!0)),!0===V.p.menubar){var Ae='<ul id="'+V.p.id+'_menubar" class="ui-search-menu modal-content column-menu ui-menu jqgrid-caption-menu '+x.menu_widget+'" role="menubar" tabindex="0"></ul>';$("#gbox_"+V.p.id).append(Ae),$(b.cDiv).append("<a role='link' class='ui-jqgrid-menubar menubar-"+("rtl"===j?"rtl":"ltr")+"' style=''><span class='colmenuspan "+w+" "+x.icon_toolbar_menu+"'></span></a>"),$(".ui-jqgrid-menubar",b.cDiv).hover(function(){$(this).addClass(_)},function(){$(this).removeClass(_)}).on("click",function(e){var t=$(e.target).position();$("#"+V.p.id+"_menubar").show(),"rtl"===V.p.direction&&$("#"+V.p.id+"_menubar").css({left:t.left-$("#"+V.p.id+"_menubar").width()-20})})}if($(b.cDiv).insertBefore(b.hDiv),V.p.toolbar[0]){var Pe=Q(X,"customtoolbarBox",!0,"ui-userdata");b.uDiv=document.createElement("div"),"top"===V.p.toolbar[1]?$(b.uDiv).insertBefore(b.hDiv):"bottom"===V.p.toolbar[1]&&$(b.uDiv).insertAfter(b.hDiv),"both"===V.p.toolbar[1]?(b.ubDiv=document.createElement("div"),$(b.uDiv).addClass(Pe+" ui-userdata-top").attr("id","t_"+this.id).insertBefore(b.hDiv).width(b.width-Ie),$(b.ubDiv).addClass(Pe+" ui-userdata-bottom").attr("id","tb_"+this.id).insertAfter(b.hDiv).width(b.width-Ie),Re&&$(b.ubDiv).hide()):$(b.uDiv).width(b.width-Ie).addClass(Pe+" ui-userdata-top").attr("id","t_"+this.id),Re&&$(b.uDiv).hide()}if(V.p.toppager&&(V.p.toppager=$.jgrid.jqID(V.p.id)+"_toppager",b.topDiv=$("<div id='"+V.p.toppager+"'></div>")[0],V.p.toppager="#"+V.p.toppager,$(b.topDiv).addClass(Q(X,"toppagerBox",!0,"ui-jqgrid-toppager")).width(b.width-Ie).insertBefore(b.hDiv),R(V.p.toppager,"_t")),V.p.footerrow&&(b.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0],Me=$("<div class='ui-jqgrid-hbox"+("rtl"===j?"-rtl":"")+"'></div>"),$(b.sDiv).append(Me).width(b.width-Ie).insertAfter(b.hDiv),$(Me).append(qe),b.footers=$(".ui-jqgrid-ftable",b.sDiv)[0].rows[0].cells,V.p.rownumbers&&(b.footers[0].className=Q(X,"rownumBox",!0,"jqgrid-rownum")),Re&&$(b.sDiv).hide()),Me=null,V.p.caption){var Ee=V.p.datatype;!0===V.p.hidegrid&&($(".ui-jqgrid-titlebar-close",b.cDiv).click(function(e){var t,r=$.isFunction(V.p.onHeaderClick),i=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-toppager, .ui-jqgrid-pager, .ui-jqgrid-sdiv",o=this;return!0===V.p.toolbar[0]&&("both"===V.p.toolbar[1]&&(i+=", #"+$(b.ubDiv).attr("id")),i+=", #"+$(b.uDiv).attr("id")),t=$(i,"#gview_"+$.jgrid.jqID(V.p.id)).length,"visible"===V.p.gridstate?$(i,"#gbox_"+$.jgrid.jqID(V.p.id)).slideUp("fast",function(){0===--t&&($("span",o).removeClass(Ne).addClass(Oe),V.p.gridstate="hidden",$("#gbox_"+$.jgrid.jqID(V.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(V.p.id)).hide(),$(V).triggerHandler("jqGridHeaderClick",[V.p.gridstate,e]),r&&(Re||V.p.onHeaderClick.call(V,V.p.gridstate,e)))}):"hidden"===V.p.gridstate&&$(i,"#gbox_"+$.jgrid.jqID(V.p.id)).slideDown("fast",function(){0===--t&&($("span",o).removeClass(Oe).addClass(Ne),Re&&(V.p.datatype=Ee,S(),Re=!1),V.p.gridstate="visible",$("#gbox_"+$.jgrid.jqID(V.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(V.p.id)).show(),$(V).triggerHandler("jqGridHeaderClick",[V.p.gridstate,e]),r&&(Re||V.p.onHeaderClick.call(V,V.p.gridstate,e)))}),!1}),Re&&(V.p.datatype="local",$(".ui-jqgrid-titlebar-close",b.cDiv).trigger("click")))}else $(b.cDiv).hide(),V.p.toppager||$(b.hDiv).addClass(Q(V.p.styleUI+".common","cornertop",!0));if($(b.hDiv).after(b.bDiv).mousemove(function(e){if(b.resizing)return b.dragMove(e),!1}),$(".ui-jqgrid-labels",b.hDiv).on("selectstart",function(){return!1}),$(document).on("mouseup.jqGrid"+V.p.id,function(){return!b.resizing||(b.dragEnd(!0),!1)}),"rtl"===V.p.direction&&$(V).on("jqGridAfterGridComplete.setRTLPadding",function(){var e=b.bDiv.offsetWidth-b.bDiv.clientWidth;V.p.scrollOffset=e,$("div:first",b.hDiv).css({paddingLeft:e+"px"}),b.hDiv.scrollLeft=b.bDiv.scrollLeft}),V.formatCol=p,V.sortData=M,V.updatepager=function(e,t){var r,i,o,a,n,l,s,d,p="",c=V.p.pager?$.jgrid.jqID(V.p.pager.substr(1)):"",u=c?"_"+c:"",g=V.p.toppager?"_"+V.p.toppager.substr(1):"";if((o=parseInt(V.p.page,10)-1)<0&&(o=0),n=(o*=parseInt(V.p.rowNum,10))+V.p.reccount,V.p.scroll){var h=$("tbody:first > tr:gt(0)",V.grid.bDiv);n>V.p.records&&(n=V.p.records),o=n-h.length,V.p.reccount=h.length;var f=h.outerHeight()||V.grid.prevRowHeight;if(f){var m=o*f,v=parseInt(V.p.records,10)*f;$(">div:first",V.grid.bDiv).css({height:v}).children("div:first").css({height:m,display:m?"":"none"}),0===V.grid.bDiv.scrollTop&&1<V.p.page&&(V.grid.bDiv.scrollTop=V.p.rowNum*(V.p.page-1)*f)}V.grid.bDiv.scrollLeft=V.grid.hDiv.scrollLeft}if(p=V.p.pager||"",p+=V.p.toppager?p?","+V.p.toppager:V.p.toppager:""){if(s=$.jgrid.getRegional(V,"formatter.integer"),r=K(V.p.page),i=K(V.p.lastpage),$(".selbox",p)[this.p.useProp?"prop":"attr"]("disabled",!1),!0===V.p.pginput&&($("#input"+u).html($.jgrid.template($.jgrid.getRegional(V,"defaults.pgtext",V.p.pgtext)||"","<input "+Q(X,"pgInput",!1,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(c)+"'></span>")),V.p.toppager&&$("#input_t"+g).html($.jgrid.template($.jgrid.getRegional(V,"defaults.pgtext",V.p.pgtext)||"","<input "+Q(X,"pgInput",!1,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(c)+"_toppager'></span>")),$(".ui-pg-input",p).val(V.p.page),d=V.p.toppager?"#sp_1"+u+",#sp_1"+u+"_toppager":"#sp_1"+u,$(d).html($.fmatter?$.fmatter.util.NumberFormat(V.p.lastpage,s):V.p.lastpage)),V.p.viewrecords)if(0===V.p.reccount)$(".ui-paging-info",p).html($.jgrid.getRegional(V,"defaults.emptyrecords",V.p.emptyrecords));else{a=o+1,l=V.p.records,$.fmatter&&(a=$.fmatter.util.NumberFormat(a,s),n=$.fmatter.util.NumberFormat(n,s),l=$.fmatter.util.NumberFormat(l,s));var b=$.jgrid.getRegional(V,"defaults.recordtext",V.p.recordtext);$(".ui-paging-info",p).html($.jgrid.template(b,a,n,l))}!0===V.p.pgbuttons&&(r<=0&&(r=i=0),1===r||0===r?($("#first"+u+", #prev"+u).addClass(y).removeClass(_),V.p.toppager&&$("#first_t"+g+", #prev_t"+g).addClass(y).removeClass(_)):($("#first"+u+", #prev"+u).removeClass(y),V.p.toppager&&$("#first_t"+g+", #prev_t"+g).removeClass(y)),r===i||0===r?($("#next"+u+", #last"+u).addClass(y).removeClass(_),V.p.toppager&&$("#next_t"+g+", #last_t"+g).addClass(y).removeClass(_)):($("#next"+u+", #last"+u).removeClass(y),V.p.toppager&&$("#next_t"+g+", #last_t"+g).removeClass(y)))}!0===e&&!0===V.p.rownumbers&&$(">td.jqgrid-rownum",V.rows).each(function(e){$(this).html(o+1+e)}),t&&V.p.jqgdnd&&$(V).jqGrid("gridDnD","updateDnD"),$(V).triggerHandler("jqGridGridComplete"),$.isFunction(V.p.gridComplete)&&V.p.gridComplete.call(V),$(V).triggerHandler("jqGridAfterGridComplete")},V.refreshIndex=f,V.setHeadCheckBox=ae,V.constructTr=oe,V.formatter=function(e,t,r,i,o){return g(e,t,r,i,o)},$.extend(b,{populate:S,emptyRows:ie,beginReq:I,endReq:D}),this.grid=b,V.addXmlData=function(e){m(e)},V.addJSONData=function(e){v(e)},V.addLocalData=function(e){return q(e)},V.treeGrid_beforeRequest=function(){V.p.treeGrid&&V.p.treeGrid_bigData&&void 0!==V.p.postData.nodeid&&"string"==typeof V.p.postData.nodeid&&(""!==V.p.postData.nodeid||0<parseInt(V.p.postData.nodeid,10))&&(V.p.postData.rows=1e4,V.p.postData.page=1,V.p.treeGrid_rootParams.otherData.nodeid=V.p.postData.nodeid)},V.treeGrid_afterLoadComplete=function(){V.p.treeGrid&&V.p.treeGrid_bigData&&(void 0!==V.p.treeGrid_rootParams.otherData.nodeid&&"string"==typeof V.p.treeGrid_rootParams.otherData.nodeid&&(""!==V.p.treeGrid_rootParams.otherData.nodeid||0<parseInt(V.p.treeGrid_rootParams.otherData.nodeid,10))?void 0!==V.p.treeGrid_rootParams&&null!=V.p.treeGrid_rootParams&&(V.p.page=V.p.treeGrid_rootParams.page,V.p.lastpage=V.p.treeGrid_rootParams.lastpage,V.p.postData.rows=V.p.treeGrid_rootParams.postData.rows,V.p.postData.totalrows=V.p.treeGrid_rootParams.postData.totalrows,V.p.treeGrid_rootParams.otherData.nodeid="",V.updatepager(!1,!0)):V.p.treeGrid_rootParams={page:V.p.page,lastpage:V.p.lastpage,postData:{rows:V.p.postData.rows,totalrows:V.p.postData.totalrows},rowNum:V.p.rowNum,rowTotal:V.p.rowTotal,otherData:{nodeid:""}})},this.grid.cols=this.rows[0].cells,$.isFunction(V.p.onInitGrid)&&V.p.onInitGrid.call(V),$(V).triggerHandler("jqGridInitGrid"),S(),V.p.hiddengrid=!1,V.p.responsive){var Be="onorientationchange"in window?"orientationchange":"resize";$(window).on(Be,function(){$(V).jqGrid("resizeGrid")})}}else alert($.jgrid.getRegional(this,"errors.model"))}else alert("Element is not a table or has no id!")}function ze(e,t,r,i){if(V.p.multiselect&&V.p.multiboxonly||V.p.multimail)if(t)$(V).jqGrid("setSelection",e,i,r);else if(V.p.multiboxonly&&V.p.multimail)$(V).triggerHandler("jqGridSelectRow",[e,!1,r]),V.p.onSelectRow&&V.p.onSelectRow.call(V,e,!1,r);else{var o=V.p.frozenColumns?V.p.id+"_frozen":"";$(V.p.selarrrow).each(function(e,t){var r=$(V).jqGrid("getGridRowById",t);r&&$(r).removeClass(Y),$("#jqg_"+$.jgrid.jqID(V.p.id)+"_"+$.jgrid.jqID(t))[V.p.useProp?"prop":"attr"]("checked",!1),o&&($("#"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(o)).removeClass(Y),$("#jqg_"+$.jgrid.jqID(V.p.id)+"_"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(o))[V.p.useProp?"prop":"attr"]("checked",!1))}),V.p.selarrrow=[],$(V).jqGrid("setSelection",e,i,r)}else $(V).jqGrid("setSelection",e,i,r)}})},$.jgrid.extend({getGridParam:function(e,t){var r,i=this[0];if(i&&i.grid){if(void 0===t&&"string"!=typeof t&&(t="jqGrid"),r=i.p,"jqGrid"!==t)try{r=$(i).data(t)}catch(e){r=i.p}return e?void 0!==r[e]?r[e]:null:r}},setGridParam:function(t,r){return this.each(function(){if(null==r&&(r=!1),this.grid&&"object"==typeof t)if(!0===r){var e=$.extend({},this.p,t);this.p=e}else $.extend(!0,this.p,t)})},getGridRowById:function(t){var r;return this.each(function(){try{for(var e=this.rows.length;e--;)if(t.toString()===this.rows[e].id){r=this.rows[e];break}}catch(e){r=$(this.grid.bDiv).find("#"+$.jgrid.jqID(t))}}),r},getDataIDs:function(){var e,t=[],r=0,i=0;return this.each(function(){if((e=this.rows.length)&&0<e)for(;r<e;)$(this.rows[r]).hasClass("jqgrow")&&(t[i]=this.rows[r].id,i++),r++}),t},setSelection:function(m,v,b){return this.each(function(){var e,t,r,i,o,a,n,l,s,d,p,c,u=this,g=$.jgrid.getMethod("getStyleUI"),h=g(u.p.styleUI+".common","highlight",!0),f=g(u.p.styleUI+".common","disabled",!0);void 0!==m&&(v=!1!==v,!(t=$(u).jqGrid("getGridRowById",m))||!t.className||-1<t.className.indexOf(f)||(!0===u.p.scrollrows&&0<=(r=$(u).jqGrid("getGridRowById",m).rowIndex)&&(l=r,s=$(u.grid.bDiv)[0].clientHeight,d=$(u.grid.bDiv)[0].scrollTop,p=$(u.rows[l]).position().top,c=u.rows[l].clientHeight,s+d<=p+c?$(u.grid.bDiv)[0].scrollTop=p-(s+d)+c+d:p<s+d&&p<d&&($(u.grid.bDiv)[0].scrollTop=p)),!0===u.p.frozenColumns&&(a=u.p.id+"_frozen"),u.p.multiselect?(u.setHeadCheckBox(!1),u.p.selrow=t.id,-1===(i=$.inArray(u.p.selrow,u.p.selarrrow))?("ui-subgrid"!==t.className&&$(t).addClass(h).attr("aria-selected","true"),e=!0,u.p.selarrrow.push(u.p.selrow)):("ui-subgrid"!==t.className&&$(t).removeClass(h).attr("aria-selected","false"),e=!1,u.p.selarrrow.splice(i,1),o=u.p.selarrrow[0],u.p.selrow=void 0===o?null:o),$("#jqg_"+$.jgrid.jqID(u.p.id)+"_"+$.jgrid.jqID(t.id))[u.p.useProp?"prop":"attr"]("checked",e),a&&(-1===i?$("#"+$.jgrid.jqID(m),"#"+$.jgrid.jqID(a)).addClass(h):$("#"+$.jgrid.jqID(m),"#"+$.jgrid.jqID(a)).removeClass(h),$("#jqg_"+$.jgrid.jqID(u.p.id)+"_"+$.jgrid.jqID(m),"#"+$.jgrid.jqID(a))[u.p.useProp?"prop":"attr"]("checked",e)),v&&($(u).triggerHandler("jqGridSelectRow",[t.id,e,b]),u.p.onSelectRow&&u.p.onSelectRow.call(u,t.id,e,b))):"ui-subgrid"!==t.className&&(u.p.selrow!==t.id?((n=$(u).jqGrid("getGridRowById",u.p.selrow))&&$(n).removeClass(h).attr({"aria-selected":"false",tabindex:"-1"}),$(t).addClass(h).attr({"aria-selected":"true",tabindex:"0"}),a&&($("#"+$.jgrid.jqID(u.p.selrow),"#"+$.jgrid.jqID(a)).removeClass(h),$("#"+$.jgrid.jqID(m),"#"+$.jgrid.jqID(a)).addClass(h)),e=!0):e=!1,u.p.selrow=t.id,v&&($(u).triggerHandler("jqGridSelectRow",[t.id,e,b]),u.p.onSelectRow&&u.p.onSelectRow.call(u,t.id,e,b)))))})},resetSelection:function(l){return this.each(function(){var e,r,i=this,t=$.jgrid.getMethod("getStyleUI"),o=t(i.p.styleUI+".common","highlight",!0),a=t(i.p.styleUI+".common","hover",!0);if(!0===i.p.frozenColumns&&(r=i.p.id+"_frozen"),void 0!==l){if(e=l===i.p.selrow?i.p.selrow:l,$("#"+$.jgrid.jqID(i.p.id)+" tbody:first tr#"+$.jgrid.jqID(e)).removeClass(o).attr("aria-selected","false"),r&&$("#"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(r)).removeClass(o),i.p.multiselect){$("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(i.p.id))[i.p.useProp?"prop":"attr"]("checked",!1),r&&$("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(r))[i.p.useProp?"prop":"attr"]("checked",!1),i.setHeadCheckBox(!1);var n=$.inArray($.jgrid.jqID(e),i.p.selarrrow);-1!==n&&i.p.selarrrow.splice(n,1)}i.p.onUnSelectRow&&i.p.onUnSelectRow.call(i,e),e=null}else i.p.multiselect?($(i.p.selarrrow).each(function(e,t){$($(i).jqGrid("getGridRowById",t)).removeClass(o).attr("aria-selected","false"),$("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+$.jgrid.jqID(t))[i.p.useProp?"prop":"attr"]("checked",!1),r&&($("#"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(r)).removeClass(o),$("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(r))[i.p.useProp?"prop":"attr"]("checked",!1)),i.p.onUnSelectRow&&i.p.onUnSelectRow.call(i,t)}),i.setHeadCheckBox(!1),i.p.selarrrow=[],i.p.selrow=null):i.p.selrow&&($("#"+$.jgrid.jqID(i.p.id)+" tbody:first tr#"+$.jgrid.jqID(i.p.selrow)).removeClass(o).attr("aria-selected","false"),r&&$("#"+$.jgrid.jqID(i.p.selrow),"#"+$.jgrid.jqID(r)).removeClass(o),i.p.onUnSelectRow&&i.p.onUnSelectRow.call(i,i.p.selrow),i.p.selrow=null);!0===i.p.cellEdit&&0<=parseInt(i.p.iCol,10)&&0<=parseInt(i.p.iRow,10)&&($("td:eq("+i.p.iCol+")",i.rows[i.p.iRow]).removeClass("edit-cell "+o),$(i.rows[i.p.iRow]).removeClass("selected-row "+a)),i.p.savedRow=[]})},getRowData:function(e,o){var a,n,l={},s=!1,d=0;return this.each(function(){var t,r,i=this;if(null==e)s=!0,a=[],n=i.rows.length;else{if(!(r=$(i).jqGrid("getGridRowById",e)))return l;n=1}for(o&&!0===o&&0<i.p.data.length||(o=!1);d<n;)s&&(r=i.rows[d]),$(r).hasClass("jqgrow")&&(o?l=i.p.data[i.p._index[r.id]]:$('td[role="gridcell"]',r).each(function(e){if("cb"!==(t=i.p.colModel[e].name)&&"subgrid"!==t&&"rn"!==t)if(!0===i.p.treeGrid&&t===i.p.ExpandColumn)l[t]=$.jgrid.htmlDecode($("span:first",this).html());else try{l[t]=$.unformat.call(i,this,{rowId:r.id,colModel:i.p.colModel[e]},e)}catch(e){l[t]=$.jgrid.htmlDecode($(this).html())}}),s&&(a.push(l),l={})),d++}),a||l},delRowData:function(i){var o,a,n,l=!1;return this.each(function(){var e=this;if(!(o=$(e).jqGrid("getGridRowById",i)))return!1;if(e.p.subGrid&&(n=$(o).next()).hasClass("ui-subgrid")&&n.remove(),$(o).remove(),e.p.records--,e.p.reccount--,e.updatepager(!0,!1),l=!0,e.p.multiselect&&-1!==(a=$.inArray(i,e.p.selarrrow))&&e.p.selarrrow.splice(a,1),e.p.multiselect&&0<e.p.selarrrow.length?e.p.selrow=e.p.selarrrow[e.p.selarrrow.length-1]:e.p.selrow===i&&(e.p.selrow=null),"local"===e.p.datatype){var t=$.jgrid.stripPref(e.p.idPrefix,i),r=e.p._index[t];void 0!==r&&(e.p.data.splice(r,1),e.refreshIndex())}}),l},setRowData:function(s,d,p){var c,u,g=!0;return this.each(function(){if(!this.grid)return!1;var r,i,o=this,e=typeof p,a={};if(!(i=$(this).jqGrid("getGridRowById",s)))return!1;if(d)try{if($(this.p.colModel).each(function(e){c=this.name;var t=$.jgrid.getAccessor(d,c);void 0!==t&&(a[c]=this.formatter&&"string"==typeof this.formatter&&"date"===this.formatter?$.unformat.date.call(o,t,this):t,r=o.formatter(s,a[c],e,d,"edit"),u=this.title?{title:$.jgrid.stripHtml(r)}:{},!0===o.p.treeGrid&&c===o.p.ExpandColumn?$("td[role='gridcell']:eq("+e+") > span:first",i).html(r).attr(u):$("td[role='gridcell']:eq("+e+")",i).html(r).attr(u))}),"local"===o.p.datatype){var t,n=$.jgrid.stripPref(o.p.idPrefix,s),l=o.p._index[n];if(o.p.treeGrid)for(t in o.p.treeReader)o.p.treeReader.hasOwnProperty(t)&&delete a[o.p.treeReader[t]];void 0!==l&&(o.p.data[l]=$.extend(!0,o.p.data[l],a)),a=null}}catch(e){g=!1}g&&("string"===e?$(i).addClass(p):null!==p&&"object"===e&&$(i).css(p),$(o).triggerHandler("jqGridAfterGridComplete"))}),g},addRowData:function(n,l,s,d){-1===$.inArray(s,["first","last","before","after"])&&(s="last");var p,c,u,g,h,f,m,v,b,j,y,w,_,x=!1,q="",I="",D="";return l&&($.isArray(l)?(b=!0,j=n):b=!(l=[l]),this.each(function(){var e=this,t=l.length;h=!0===e.p.rownumbers?1:0,u=!0===e.p.multiselect?1:0,g=!0===e.p.subGrid?1:0,b||(void 0!==n?n=String(n):(n=$.jgrid.randId(),!1!==e.p.keyName&&(j=e.p.keyName,void 0!==l[0][j]&&(n=l[0][j]))));var r=0,i=$(e).jqGrid("getStyleUI",e.p.styleUI+".base","rowBox",!0,"jqgrow ui-row-"+e.p.direction),o={},a=!!$.isFunction(e.p.afterInsertRow);for(h&&(q=$(e).jqGrid("getStyleUI",e.p.styleUI+".base","rownumBox",!1,"jqgrid-rownum")),u&&(I=$(e).jqGrid("getStyleUI",e.p.styleUI+".base","multiBox",!1,"cbox"));r<t;){if(y=l[r],c=[],b)try{void 0===(n=y[j])&&(n=$.jgrid.randId())}catch(e){n=$.jgrid.randId()}for(_=n,n=e.p.idPrefix+n,h&&(D=e.formatCol(0,1,"",null,n,!0),c[c.length]='<td role="gridcell" '+q+" "+D+">0</td>"),u&&(v='<input role="checkbox" type="checkbox" id="jqg_'+e.p.id+"_"+n+'" '+I+"/>",D=e.formatCol(h,1,"",null,n,!0),c[c.length]='<td role="gridcell" '+D+">"+v+"</td>"),g&&(c[c.length]=$(e).jqGrid("addSubGridCell",u+h,1)),m=u+g+h;m<e.p.colModel.length;m++)w=e.p.colModel[m],o[p=w.name]=y[p],v=e.formatter(n,$.jgrid.getAccessor(y,p),m,y),D=e.formatCol(m,1,v,y,n,o),c[c.length]='<td role="gridcell" '+D+">"+v+"</td>";if(c.unshift(e.constructTr(n,!1,i,o,y)),c[c.length]="</tr>",0===e.rows.length)$("table:first",e.grid.bDiv).append(c.join(""));else switch(s){case"last":$(e.rows[e.rows.length-1]).after(c.join("")),f=e.rows.length-1;break;case"first":$(e.rows[0]).after(c.join("")),f=1;break;case"after":(f=$(e).jqGrid("getGridRowById",d))&&($(e.rows[f.rowIndex+1]).hasClass("ui-subgrid")?$(e.rows[f.rowIndex+1]).after(c):$(f).after(c.join("")),f=f.rowIndex+1);break;case"before":(f=$(e).jqGrid("getGridRowById",d))&&($(f).before(c.join("")),f=f.rowIndex-1)}!0===e.p.subGrid&&$(e).jqGrid("addSubGrid",u+h,f),e.p.records++,e.p.reccount++,$(e).triggerHandler("jqGridAfterInsertRow",[n,y,y]),a&&e.p.afterInsertRow.call(e,n,y,y),r++,"local"===e.p.datatype&&(o[e.p.localReader.id]=_,e.p._index[_]=e.p.data.length,e.p.data.push(o),o={})}e.updatepager(!0,!0),x=!0})),x},footerData:function(i,o,a){var n,l,s=!1,d={};return void 0===i&&(i="get"),"boolean"!=typeof a&&(a=!0),i=i.toLowerCase(),this.each(function(){var t,r=this;return!(!r.grid||!r.p.footerrow)&&(("set"!==i||!function(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(o))&&(s=!0,void $(this.p.colModel).each(function(e){n=this.name,"set"===i?void 0!==o[n]&&(t=a?r.formatter("",o[n],e,o,"edit"):o[n],l=this.title?{title:$.jgrid.stripHtml(t)}:{},$("tr.footrow td:eq("+e+")",r.grid.sDiv).html(t).attr(l),s=!0):"get"===i&&(d[n]=$("tr.footrow td:eq("+e+")",r.grid.sDiv).html())})))}),"get"===i?d:s},showHideCol:function(s,d){return this.each(function(){var t,r=this,i=!1,o=$.jgrid.cell_width?0:r.p.cellLayout;if(r.grid){"string"==typeof s&&(s=[s]);var a=""===(d="none"!==d?"":"none"),e=r.p.groupHeader&&($.isArray(r.p.groupHeader)||$.isFunction(r.p.groupHeader));if(e&&$(r).jqGrid("destroyGroupHeader",!1),$(this.p.colModel).each(function(e){if(-1!==$.inArray(this.name,s)&&this.hidden===a){if(!0===r.p.frozenColumns&&!0===this.frozen)return!0;$("tr[role=row]",r.grid.hDiv).each(function(){$(this.cells[e]).css("display",d)}),$(r.rows).each(function(){$(this).hasClass("jqgroup")||$(this.cells[e]).css("display",d)}),r.p.footerrow&&$("tr.footrow td:eq("+e+")",r.grid.sDiv).css("display",d),t=parseInt(this.width,10),"none"===d?r.p.tblwidth-=t+o:r.p.tblwidth+=t+o,this.hidden=!a,i=!0,$(r).triggerHandler("jqGridShowHideCol",[a,this.name,e])}}),!0===i&&(!0!==r.p.shrinkToFit||isNaN(r.p.height)||(r.p.tblwidth+=parseInt(r.p.scrollOffset,10)),$(r).jqGrid("setGridWidth",!0===r.p.shrinkToFit?r.p.tblwidth:r.p.width)),e){var n=$.extend([],r.p.groupHeader);r.p.groupHeader=null;for(var l=0;l<n.length;l++)$(r).jqGrid("setGroupHeaders",n[l])}}})},hideCol:function(e){return this.each(function(){$(this).jqGrid("showHideCol",e,"none")})},showCol:function(e){return this.each(function(){$(this).jqGrid("showHideCol",e,"")})},remapColumns:function(i,e,t){function r(t){var r;r=t.length?$.makeArray(t):$.extend({},t),$.each(i,function(e){t[e]=r[this]})}var o=this.get(0);function a(e,t){$(">tr"+(t||""),e).each(function(){var t=this,r=$.makeArray(t.cells);$.each(i,function(){var e=r[this];e&&t.appendChild(e)})})}r(o.p.colModel),r(o.p.colNames),r(o.grid.headers),a($("thead:first",o.grid.hDiv),t&&":not(.ui-jqgrid-labels)"),e&&a($("#"+$.jgrid.jqID(o.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot"),o.p.footerrow&&a($("tbody:first",o.grid.sDiv)),o.p.remapColumns&&(o.p.remapColumns.length?r(o.p.remapColumns):o.p.remapColumns=$.makeArray(i)),o.p.lastsort=$.inArray(o.p.lastsort,i),o.p.treeGrid&&(o.p.expColInd=$.inArray(o.p.expColInd,i)),$(o).triggerHandler("jqGridRemapColumns",[i,e,t])},setGridWidth:function(h,f){return this.each(function(){if(this.grid){var t,r,i,e,o=this,a=0,n=$.jgrid.cell_width?0:o.p.cellLayout,l=0,s=!1,d=o.p.scrollOffset,p=0,c=-1!==o.p.styleUI.search("Bootstrap")?2:0;if("boolean"!=typeof f&&(f=o.p.shrinkToFit),!isNaN(h)){if(h=parseInt(h,10),o.grid.width=o.p.width=h,$("#gbox_"+$.jgrid.jqID(o.p.id)).css("width",h+"px"),$("#gview_"+$.jgrid.jqID(o.p.id)).css("width",h+"px"),$(o.grid.bDiv).css("width",h-c+"px"),$(o.grid.hDiv).css("width",h-c+"px"),o.p.pager&&$(o.p.pager).css("width",h-c+"px"),o.p.toppager&&$(o.p.toppager).css("width",h-c+"px"),!0===o.p.toolbar[0]&&($(o.grid.uDiv).css("width",h-c+"px"),"both"===o.p.toolbar[1]&&$(o.grid.ubDiv).css("width",h-c+"px")),o.p.footerrow&&$(o.grid.sDiv).css("width",h-c+"px"),!1===f&&!0===o.p.forceFit&&(o.p.forceFit=!1),!0===f){if($.each(o.p.colModel,function(){!1===this.hidden&&(t=this.widthOrg,a+=t+n,this.fixed?p+=t+n:l++)}),0===l)return;o.p.tblwidth=a,i=h-n*l-p,isNaN(o.p.height)||($(o.grid.bDiv)[0].clientHeight<$(o.grid.bDiv)[0].scrollHeight||1===o.rows.length||"scroll"===$(o.grid.bDiv).css("overflow-y"))&&(s=!0,i-=d);var u=(a=0)<o.grid.cols.length;if($.each(o.p.colModel,function(e){if(!1===this.hidden&&!this.fixed){if(t=this.widthOrg,(t=Math.round(i*t/(o.p.tblwidth-n*l-p)))<0)return;this.width=t,a+=t,o.grid.headers[e].width=t,o.grid.headers[e].el.style.width=t+"px",o.p.footerrow&&(o.grid.footers[e].style.width=t+"px"),u&&(o.grid.cols[e].style.width=t+"px"),r=e}}),!r)return;if(e=0,s?h-p-(a+n*l)!==d&&(e=h-p-(a+n*l)-d):s||0===Math.abs(h-p-(a+n*l))||(e=h-p-(a+n*l)-c),o.p.colModel[r].width+=e,o.p.tblwidth=a+e+n*l+p,o.p.tblwidth>h){var g=o.p.tblwidth-parseInt(h,10);o.p.tblwidth=h,t=o.p.colModel[r].width=o.p.colModel[r].width-g}else t=o.p.colModel[r].width;o.grid.headers[r].width=t,o.grid.headers[r].el.style.width=t+"px",u&&(o.grid.cols[r].style.width=t+"px"),o.p.footerrow&&(o.grid.footers[r].style.width=t+"px")}o.p.tblwidth&&($("table:first",o.grid.bDiv).css("width",o.p.tblwidth+"px"),$("table:first",o.grid.hDiv).css("width",o.p.tblwidth+"px"),o.grid.hDiv.scrollLeft=o.grid.bDiv.scrollLeft,o.p.footerrow&&$("table:first",o.grid.sDiv).css("width",o.p.tblwidth+"px"))}}})},setGridHeight:function(r){return this.each(function(){var e=this;if(e.grid){var t=$(e.grid.bDiv);t.css({height:r+(isNaN(r)?"":"px")}),!0===e.p.frozenColumns&&$("#"+$.jgrid.jqID(e.p.id)+"_frozen").parent().height(t.height()-16),e.p.height=r,e.p.scroll&&e.grid.populateVisible()}})},setCaption:function(t){return this.each(function(){var e=$(this).jqGrid("getStyleUI",this.p.styleUI+".common","cornertop",!0);this.p.caption=t,$(".ui-jqgrid-title, .ui-jqgrid-title-rtl",this.grid.cDiv).html(t),$(this.grid.cDiv).show(),$(this.grid.hDiv).removeClass(e)})},setLabel:function(i,o,a,n){return this.each(function(){var t=-1;if(this.grid&&null!=i&&(isNaN(i)?$(this.p.colModel).each(function(e){if(this.name===i)return t=e,!1}):t=parseInt(i,10),0<=t)){var e=$("tr.ui-jqgrid-labels th:eq("+t+")",this.grid.hDiv);if(o){var r=$(".s-ico",e);$("[id^=jqgh_]",e).empty().html(o).append(r),this.p.colNames[t]=o}a&&("string"==typeof a?$(e).addClass(a):$(e).css(a)),"object"==typeof n&&$(e).attr(n)}})},setSortIcon:function(r,i){return this.each(function(){var t=-1;if(this.grid&&null!=r&&(isNaN(r)?$(this.p.colModel).each(function(e){if(this.name===r)return t=e,!1}):t=parseInt(r,10),0<=t)){var e=$("tr.ui-jqgrid-labels th:eq("+t+")",this.grid.hDiv);"left"===i?e.find(".s-ico").css("float","left"):e.find(".s-ico").css("float","none")}})},setCell:function(p,c,u,g,h,f){return this.each(function(){var e,t,r=this,i=-1;if(r.grid&&(isNaN(c)?$(r.p.colModel).each(function(e){if(this.name===c)return i=e,!1}):i=parseInt(c,10),0<=i)){var o=$(r).jqGrid("getGridRowById",p);if(o){var a,n=0,l=[];try{a=o.cells[i]}catch(e){}if(a){if(""!==u||!0===f){if("local"===r.p.datatype)l=$(r).jqGrid("getLocalRow",p);else if(void 0!==o.cells)for(;n<o.cells.length;)e=$.unformat.call(r,$(o.cells[n]),{rowId:o.id,colModel:r.p.colModel[n]},n),l.push(e),n++;if(e=r.formatter(p,u,i,l,"edit"),t=r.p.colModel[i].title?{title:$.jgrid.stripHtml(e)}:{},r.p.treeGrid&&0<$(".tree-wrap",$(a)).length?$("span",$(a)).html(e).attr(t):$(a).html(e).attr(t),"local"===r.p.datatype){var s,d=r.p.colModel[i];u=d.formatter&&"string"==typeof d.formatter&&"date"===d.formatter?$.unformat.date.call(r,u,d):u,void 0!==(s=r.p._index[$.jgrid.stripPref(r.p.idPrefix,p)])&&(r.p.data[s][d.name]=u)}}"string"==typeof g?$(a).addClass(g):g&&$(a).css(g),"object"==typeof h&&$(a).attr(h)}}}})},getCell:function(o,a,n){var l,s=!1;return void 0===n&&(n=!1),this.each(function(){var t,e,r=this,i=-1;if(r.grid&&(t=a,isNaN(a)?$(r.p.colModel).each(function(e){if(this.name===a)return t=this.name,i=e,!1}):i=parseInt(a,10),0<=i&&(e=$(r).jqGrid("getGridRowById",o))))if(l=$("td:eq("+i+")",e),n)s=l;else{try{s=$.unformat.call(r,l,{rowId:e.id,colModel:r.p.colModel[i]},i)}catch(e){s=$.jgrid.htmlDecode(l.html())}r.p.treeGrid&&s&&r.p.ExpandColumn===t&&(s=$("<div>"+s+"</div>").find("span:first").html())}}),s},getCol:function(a,n,l){var s,d,p,c,u=[],g=0;return n="boolean"==typeof n&&n,void 0===l&&(l=!1),this.each(function(){var t=this,r=-1;if(t.grid&&(isNaN(a)?$(t.p.colModel).each(function(e){if(this.name===a)return r=e,!1}):r=parseInt(a,10),0<=r)){var e=t.rows.length,i=0,o=0;if(e&&0<e){for(;i<e;){if($(t.rows[i]).hasClass("jqgrow")){try{s=$.unformat.call(t,$(t.rows[i].cells[r]),{rowId:t.rows[i].id,colModel:t.p.colModel[r]},r)}catch(e){s=$.jgrid.htmlDecode(t.rows[i].cells[r].innerHTML)}l?(c=parseFloat(s),isNaN(c)||(g+=c,void 0===p&&(p=d=c),d=Math.min(d,c),p=Math.max(p,c),o++)):n?u.push({id:t.rows[i].id,value:s}):u.push(s)}i++}if(l)switch(l.toLowerCase()){case"sum":u=g;break;case"avg":u=g/o;break;case"count":u=e-1;break;case"min":u=d;break;case"max":u=p}}}}),u},clearGridData:function(r){return this.each(function(){var e=this;if(e.grid){if("boolean"!=typeof r&&(r=!1),e.p.deepempty)$("#"+$.jgrid.jqID(e.p.id)+" tbody:first tr:gt(0)").remove();else{var t=$("#"+$.jgrid.jqID(e.p.id)+" tbody:first tr:first")[0];$("#"+$.jgrid.jqID(e.p.id)+" tbody:first").empty().append(t)}e.p.footerrow&&r&&$(".ui-jqgrid-ftable td",e.grid.sDiv).html("&#160;"),e.p.selrow=null,e.p.selarrrow=[],e.p.savedRow=[],e.p.records=0,e.p.page=1,e.p.lastpage=0,e.p.reccount=0,e.p.data=[],e.p._index={},e.p.groupingView._locgr=!1,e.updatepager(!0,!1)}})},getInd:function(e,t){var r,i=!1;return this.each(function(){(r=$(this).jqGrid("getGridRowById",e))&&(i=!0===t?r:r.rowIndex)}),i},bindKeys:function(e){var s=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},e||{});return this.each(function(){var l=this;$("body").is("[role]")||$("body").attr("role","application"),l.p.scrollrows=s.scrollingRows,$(l).keydown(function(e){var t,r,i,o=$(l).find("tr[tabindex=0]")[0],a=l.p.treeReader.expanded_field;if(o){var n=l.p.selrow;if(i=l.p._index[$.jgrid.stripPref(l.p.idPrefix,o.id)],37===e.keyCode||38===e.keyCode||39===e.keyCode||40===e.keyCode){if(38===e.keyCode){if(t="",(r=o.previousSibling)&&$(r).hasClass("jqgrow")){if($(r).is(":hidden")){for(;r;)if(r=r.previousSibling,!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){t=r.id;break}}else t=r.id;$(l).jqGrid("setSelection",t,!0,e)}$(l).triggerHandler("jqGridKeyUp",[t,n,e]),$.isFunction(s.onUpKey)&&s.onUpKey.call(l,t,n,e),e.preventDefault()}if(40===e.keyCode){if(t="",(r=o.nextSibling)&&$(r).hasClass("jqgrow")){if($(r).is(":hidden")){for(;r;)if(r=r.nextSibling,!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){t=r.id;break}}else t=r.id;$(l).jqGrid("setSelection",t,!0,e)}$(l).triggerHandler("jqGridKeyDown",[t,n,e]),$.isFunction(s.onDownKey)&&s.onDownKey.call(l,t,n,e),e.preventDefault()}37===e.keyCode&&(l.p.treeGrid&&l.p.data[i][a]&&$(o).find("div.treeclick").trigger("click"),$(l).triggerHandler("jqGridKeyLeft",[l.p.selrow,e]),$.isFunction(s.onLeftKey)&&s.onLeftKey.call(l,l.p.selrow,e)),39===e.keyCode&&(l.p.treeGrid&&!l.p.data[i][a]&&$(o).find("div.treeclick").trigger("click"),$(l).triggerHandler("jqGridKeyRight",[l.p.selrow,e]),$.isFunction(s.onRightKey)&&s.onRightKey.call(l,l.p.selrow,e))}else 13===e.keyCode?($(l).triggerHandler("jqGridKeyEnter",[l.p.selrow,e]),$.isFunction(s.onEnter)&&s.onEnter.call(l,l.p.selrow,e)):32===e.keyCode&&($(l).triggerHandler("jqGridKeySpace",[l.p.selrow,e]),$.isFunction(s.onSpace)&&s.onSpace.call(l,l.p.selrow,e))}}),$(l).on("click",function(e){$(e.target,l.rows).closest("tr.jqgrow").focus()})})},unbindKeys:function(){return this.each(function(){$(this).off("keydown")})},getLocalRow:function(e){var t,r=!1;return this.each(function(){void 0!==e&&0<=(t=this.p._index[$.jgrid.stripPref(this.p.idPrefix,e)])&&(r=this.p.data[t])}),r},progressBar:function(a){return a=$.extend({htmlcontent:"",method:"hide",loadtype:"disable"},a||{}),this.each(function(){var e,t,r="show"===a.method,i=$("#load_"+$.jgrid.jqID(this.p.id)),o=$(window).scrollTop();switch(""!==a.htmlcontent&&i.html(a.htmlcontent),a.loadtype){case"disable":break;case"enable":i.toggle(r);break;case"block":$("#lui_"+$.jgrid.jqID(this.p.id)).css(r?{top:0,left:0,height:$("#gbox_"+$.jgrid.jqID(this.p.id)).height(),width:$("#gbox_"+$.jgrid.jqID(this.p.id)).width(),"z-index":1e4,position:"absolute"}:{}).toggle(r),i.toggle(r)}i.is(":visible")&&(e=i.offsetParent(),i.css("top",""),i.offset().top<o&&(t=Math.min(10+o-e.offset().top,e.height()-i.height()),i.css("top",t+"px")))})},getColProp:function(e){var t={},r=this[0];if(!r.grid)return!1;var i,o=r.p.colModel;for(i=0;i<o.length;i++)if(o[i].name===e){t=o[i];break}return t},setColProp:function(r,i){return this.each(function(){if(this.grid&&$.isPlainObject(i)){var e,t=this.p.colModel;for(e=0;e<t.length;e++)if(t[e].name===r){$.extend(!0,this.p.colModel[e],i);break}}})},sortGrid:function(a,n,l){return this.each(function(){var e,t=this,r=-1,i=!1;if(t.grid){for(a||(a=t.p.sortname),e=0;e<t.p.colModel.length;e++)if(t.p.colModel[e].index===a||t.p.colModel[e].name===a){r=e,!0===t.p.frozenColumns&&!0===t.p.colModel[e].frozen&&(i=t.grid.fhDiv.find("#"+t.p.id+"_"+a));break}if(-1!==r){var o=t.p.colModel[r].sortable;i||(i=t.grid.headers[r].el),"boolean"!=typeof o&&(o=!0),"boolean"!=typeof n&&(n=!1),o&&t.sortData("jqgh_"+t.p.id+"_"+a,r,n,l,i)}}})},setGridState:function(i){return this.each(function(){if(this.grid){var e=this,t=$(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_open",!0),r=$(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_close",!0);"hidden"===i?($(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+$.jgrid.jqID(e.p.id)).slideUp("fast"),e.p.pager&&$(e.p.pager).slideUp("fast"),e.p.toppager&&$(e.p.toppager).slideUp("fast"),!0===e.p.toolbar[0]&&("both"===e.p.toolbar[1]&&$(e.grid.ubDiv).slideUp("fast"),$(e.grid.uDiv).slideUp("fast")),e.p.footerrow&&$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID(e.p.id)).slideUp("fast"),$(".ui-jqgrid-headlink",e.grid.cDiv).removeClass(t).addClass(r),e.p.gridstate="hidden"):"visible"===i&&($(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID(e.p.id)).slideDown("fast"),e.p.pager&&$(e.p.pager).slideDown("fast"),e.p.toppager&&$(e.p.toppager).slideDown("fast"),!0===e.p.toolbar[0]&&("both"===e.p.toolbar[1]&&$(e.grid.ubDiv).slideDown("fast"),$(e.grid.uDiv).slideDown("fast")),e.p.footerrow&&$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID(e.p.id)).slideDown("fast"),$(".ui-jqgrid-headlink",e.grid.cDiv).removeClass(r).addClass(t),e.p.gridstate="visible")}})},setFrozenColumns:function(){return this.each(function(){if(this.grid){var l=this,e=l.p.colModel,t=0,r=e.length,i=-1,o=!1,a=$(l).jqGrid("getStyleUI",l.p.styleUI+".base","headerDiv",!0,"ui-jqgrid-hdiv"),n=$(l).jqGrid("getStyleUI",l.p.styleUI+".common","hover",!0),s="border-box"===$("#gbox_"+$.jgrid.jqID(l.p.id)).css("box-sizing"),d=s?1:0;if(!0!==l.p.subGrid&&!0!==l.p.treeGrid&&!0!==l.p.cellEdit&&!l.p.scroll){for(;t<r&&!0===e[t].frozen;)o=!0,i=t,t++;if(0<=i&&o){var p=l.p.caption?$(l.grid.cDiv).outerHeight():0,c=parseInt($(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID(l.p.id)).height(),10),u=parseInt($(".ui-jqgrid-hdiv","#gview_"+$.jgrid.jqID(l.p.id)).height(),10);l.p.toppager&&(p+=$(l.grid.topDiv).outerHeight()),!0===l.p.toolbar[0]&&"bottom"!==l.p.toolbar[1]&&(p+=$(l.grid.uDiv).outerHeight()),l.grid.fhDiv=$('<div style="position:absolute;'+("rtl"===l.p.direction?"right:0;":"left:0;")+"top:"+p+"px;height:"+(u-d)+'px;" class="frozen-div '+a+'"></div>'),l.grid.fbDiv=$('<div style="position:absolute;'+("rtl"===l.p.direction?"right:0;":"left:0;")+"top:"+(parseInt(p,10)+parseInt(u,10)+1-d)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>'),$("#gview_"+$.jgrid.jqID(l.p.id)).append(l.grid.fhDiv);var g=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID(l.p.id)).clone(!0);if(l.p.groupHeader){$("tr.jqg-first-row-header, tr.jqg-third-row-header",g).each(function(){$("th:gt("+i+")",this).remove()});var h,f=-1,m=-1;$("tr.jqg-second-row-header th",g).each(function(){if(h=parseInt($(this).attr("colspan"),10),parseInt($(this).attr("rowspan"),10)&&(f++,m++),h&&(f+=h,m++),f===i)return m=i,!1}),f!==i&&(m=i),$("tr.jqg-second-row-header",g).each(function(){$("th:gt("+m+")",this).remove()})}else{var v=[];$(".ui-jqgrid-htable tr","#gview_"+$.jgrid.jqID(l.p.id)).each(function(e,t){v.push(parseInt($(this).height(),10))}),$("tr",g).each(function(){$("th:gt("+i+")",this).remove()}),$("tr",g).each(function(e){$(this).height(v[e])})}if($(g).width(1),$.jgrid.msie()||$(g).css("height","100%"),$(l.grid.fhDiv).append(g).mousemove(function(e){if(l.grid.resizing)return l.grid.dragMove(e),!1}),l.p.footerrow){var b=$(".ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID(l.p.id)).height();l.grid.fsDiv=$('<div style="position:absolute;left:0px;top:'+(parseInt(p,10)+parseInt(c,10)+parseInt(b,10)+1-d)+'px;" class="frozen-sdiv ui-jqgrid-sdiv"></div>'),$("#gview_"+$.jgrid.jqID(l.p.id)).append(l.grid.fsDiv);var j=$(".ui-jqgrid-ftable","#gview_"+$.jgrid.jqID(l.p.id)).clone(!0);$("tr",j).each(function(){$("td:gt("+i+")",this).remove()}),$(j).width(1),$(l.grid.fsDiv).append(j)}$(l).on("jqGridResizeStop.setFrozenColumns",function(e,t,r){var i=s?"outerWidth":"width",o=$(".ui-jqgrid-htable",l.grid.fhDiv),a=$(".ui-jqgrid-btable",l.grid.fbDiv);if($("th:eq("+r+")",o)[i](t),$("tr:first td:eq("+r+")",a)[i](t),l.p.footerrow){var n=$(".ui-jqgrid-ftable",l.grid.fsDiv);$("tr:first td:eq("+r+")",n)[i](t)}}),$("#gview_"+$.jgrid.jqID(l.p.id)).append(l.grid.fbDiv),$(l.grid.fbDiv).on("mousewheel DOMMouseScroll",function(e){var t=$(l.grid.bDiv).scrollTop();0<e.originalEvent.wheelDelta||e.originalEvent.detail<0?$(l.grid.bDiv).scrollTop(t-25):$(l.grid.bDiv).scrollTop(t+25),e.preventDefault()}),!0===l.p.hoverrows&&$("#"+$.jgrid.jqID(l.p.id)).off("mouseover mouseout"),$(l).on("jqGridAfterGridComplete.setFrozenColumns",function(){$("#"+$.jgrid.jqID(l.p.id)+"_frozen").remove(),$(l.grid.fbDiv).height($(l.grid.bDiv)[0].clientHeight);var r=[];$("#"+$.jgrid.jqID(l.p.id)+" tr[role=row].jqgrow").each(function(){r.push($(this).outerHeight())});var e=$("#"+$.jgrid.jqID(l.p.id)).clone(!0);$("tr[role=row]",e).each(function(){$("td[role=gridcell]:gt("+i+")",this).remove()}),$(e).width(1).attr("id",l.p.id+"_frozen"),$(l.grid.fbDiv).append(e),$("tr[role=row].jqgrow",e).each(function(e,t){$(this).height(r[e])}),!0===l.p.hoverrows&&($("tr.jqgrow",e).hover(function(){$(this).addClass(n),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(l.p.id)).addClass(n)},function(){$(this).removeClass(n),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(l.p.id)).removeClass(n)}),$("tr.jqgrow","#"+$.jgrid.jqID(l.p.id)).hover(function(){$(this).addClass(n),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(l.p.id)+"_frozen").addClass(n)},function(){$(this).removeClass(n),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(l.p.id)+"_frozen").removeClass(n)})),e=null}),l.grid.hDiv.loading||$(l).triggerHandler("jqGridAfterGridComplete"),l.p.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){if(this.grid&&!0===this.p.frozenColumns){var t,e=this,r=$(e).jqGrid("getStyleUI",e.p.styleUI+".common","hover",!0);if($(e.grid.fhDiv).remove(),$(e.grid.fbDiv).remove(),e.grid.fhDiv=null,e.grid.fbDiv=null,e.p.footerrow&&($(e.grid.fsDiv).remove(),e.grid.fsDiv=null),$(this).off(".setFrozenColumns"),!0===e.p.hoverrows)$("#"+$.jgrid.jqID(e.p.id)).on({mouseover:function(e){t=$(e.target).closest("tr.jqgrow"),"ui-subgrid"!==$(t).attr("class")&&$(t).addClass(r)},mouseout:function(e){t=$(e.target).closest("tr.jqgrow"),$(t).removeClass(r)}});this.p.frozenColumns=!1}})},resizeColumn:function(n,l,s){return this.each(function(){var e,t,r=this.grid,i=this.p,o=i.colModel,a=o.length;if("string"==typeof n){for(e=0;e<a;e++)if(o[e].name===n){n=e;break}}else n=parseInt(n,10);if(void 0===s&&(s=!1),(o[n].resizable||s)&&(l=parseInt(l,10),!("number"!=typeof n||n<0||n>o.length-1||"number"!=typeof l||l<i.minColWidth))){if(i.forceFit)for(i.nv=0,e=n+1;e<a;e++)if(!0!==o[e].hidden){i.nv=e-n;break}if(r.resizing={idx:n},t=l-r.headers[n].width,i.forceFit){if(r.headers[n+i.nv].width-t<i.minColWidth)return;r.headers[n+i.nv].newWidth=r.headers[n+i.nv].width-t}r.newWidth=i.tblwidth+t,r.headers[n].newWidth=l,r.dragEnd(!1)}})},getStyleUI:function(e,t,r,i){var o="",a="";try{var n=e.split(".");switch(r||(o="class=",a='"'),null==i&&(i=""),n.length){case 1:o+=a+$.trim(i+" "+$.jgrid.styleUI[n[0]][t]+a);break;case 2:o+=a+$.trim(i+" "+$.jgrid.styleUI[n[0]][n[1]][t]+a)}}catch(e){o=""}return o},resizeGrid:function(e){return this.each(function(){var i=this;void 0===e&&(e=500),setTimeout(function(){try{var e=$(window).width(),t=$("#gbox_"+$.jgrid.jqID(i.p.id)).parent().width(),r=i.p.width;r=3<e-t?t:e,$("#"+$.jgrid.jqID(i.p.id)).jqGrid("setGridWidth",r)}catch(e){}},e)})},colMenuAdd:function(e,t){var r=this[0].p.styleUI,i=$.jgrid.styleUI[r].colmenu;return t=$.extend({title:"Item",icon:i.icon_new_item,funcname:null,position:"last",closeOnRun:!0,exclude:"",id:null},t||{}),this.each(function(){t.colname="all"===e?"_all_":e;t.id=null===t.id?$.jgrid.randId():t.id,this.p.colMenuCustom[t.id]=t})},colMenuDelete:function(e){return this.each(function(){this.p.colMenuCustom.hasOwnProperty(e)&&delete this.p.colMenuCustom[e]})},menubarAdd:function(o){var r,a,e=this[0].p.styleUI,n=$.jgrid.styleUI[e].common;return this.each(function(){var i=this;if($.isArray(o))for(var e=0;e<o.length;e++){(r=o[e]).id||(r.id=$.jgrid.randId());var t="";r.icon&&(t='<span class="'+n.icon_base+" "+r.icon+'"></span>'),r.position||(r.position="last"),r.closeoncall||(r.closeoncall=!0),r.divider?(a='<li class="ui-menu-item divider" role="separator"></li>',r.cick=null):a='<li class="ui-menu-item" role="presentation"><a id="'+r.id+'" class="g-menu-item" tabindex="0" role="menuitem" ><table class="ui-common-table"><tr><td class="menu_icon">'+t+'</td><td class="menu_text">'+r.title+"</td></tr></table></a></li>","last"===r.position?$("#"+this.p.id+"_menubar").append(a):$("#"+this.p.id+"_menubar").prepend(a)}$("li a","#"+this.p.id+"_menubar").each(function(e,r){$(o).each(function(e,t){if(t.id===r.id&&$.isFunction(t.click))return $(r).on("click",function(e){t.click.call(i,e)}),!1}),$(this).hover(function(e){$(this).addClass(n.hover),e.stopPropagation()},function(e){$(this).removeClass(n.hover)})})})},menubarDelete:function(e){return this.each(function(){$("#"+e,"#"+this.p.id+"_menubar").remove()})}}),$.jgrid.extend({editCell:function(u,g,h,f){return this.each(function(){var e,t,r,i,o=this,a=$(this).jqGrid("getStyleUI",o.p.styleUI+".common","highlight",!0),n=$(this).jqGrid("getStyleUI",o.p.styleUI+".common","hover",!0),l=$(this).jqGrid("getStyleUI",o.p.styleUI+".celledit","inputClass",!0);if(o.grid&&!0===o.p.cellEdit){if(g=parseInt(g,10),o.p.selrow=o.rows[u].id,o.p.knv||$(o).jqGrid("GridNav"),0<o.p.savedRow.length){if(!0===h&&u==o.p.iRow&&g==o.p.iCol)return;$(o).jqGrid("saveCell",o.p.savedRow[0].id,o.p.savedRow[0].ic)}else window.setTimeout(function(){$("#"+$.jgrid.jqID(o.p.knv)).attr("tabindex","-1").focus()},1);if("subgrid"!==(e=(i=o.p.colModel[g]).name)&&"cb"!==e&&"rn"!==e){try{r=$(o.rows[u].cells[g])}catch(e){r=$("td:eq("+g+")",o.rows[u])}if(0<=parseInt(o.p.iCol,10)&&0<=parseInt(o.p.iRow,10)&&void 0!==o.p.iRowId){var s=$(o).jqGrid("getGridRowById",o.p.iRowId);$(s).removeClass("selected-row "+n).find("td:eq("+o.p.iCol+")").removeClass("edit-cell "+a)}if(r.addClass("edit-cell "+a),$(o.rows[u]).addClass("selected-row "+n),!0!==i.editable||!0!==h||r.hasClass("not-editable-cell")||$.isFunction(o.p.isCellEditable)&&!o.p.isCellEditable.call(o,e,u,g))t=r.html().replace(/\&#160\;/gi,""),$(o).triggerHandler("jqGridCellSelect",[o.rows[u].id,g,t,f]),$.isFunction(o.p.onCellSelect)&&o.p.onCellSelect.call(o,o.rows[u].id,g,t,f);else{try{t=$.unformat.call(o,r,{rowId:o.rows[u].id,colModel:i},g)}catch(e){t=i.edittype&&"textarea"===i.edittype?r.text():r.html()}if(o.p.autoencode&&(t=$.jgrid.htmlDecode(t)),i.edittype||(i.edittype="text"),o.p.savedRow.push({id:u,ic:g,name:e,v:t,rowId:o.rows[u].id}),("&nbsp;"===t||"&#160;"===t||1===t.length&&160===t.charCodeAt(0))&&(t=""),$.isFunction(o.p.formatCell)){var d=o.p.formatCell.call(o,o.rows[u].id,e,t,u,g);void 0!==d&&(t=d)}$(o).triggerHandler("jqGridBeforeEditCell",[o.rows[u].id,e,t,u,g]),$.isFunction(o.p.beforeEditCell)&&o.p.beforeEditCell.call(o,o.rows[u].id,e,t,u,g);var p=$.extend({},i.editoptions||{},{id:u+"_"+e,name:e,rowId:o.rows[u].id,oper:"edit"}),c=$.jgrid.createEl.call(o,i.edittype,p,t,!0,$.extend({},$.jgrid.ajaxOptions,o.p.ajaxSelectOptions||{}));-1<$.inArray(i.edittype,["text","textarea","password","select"])&&$(c).addClass(l),r.html("").append(c).attr("tabindex","0"),$.jgrid.bindEv.call(o,c,p),window.setTimeout(function(){$(c).focus()},1),$("input, select, textarea",r).on("keydown",function(e){if(27===e.keyCode&&(0<$("input.hasDatepicker",r).length?$(".ui-datepicker").is(":hidden")?$(o).jqGrid("restoreCell",u,g):$("input.hasDatepicker",r).datepicker("hide"):$(o).jqGrid("restoreCell",u,g)),13===e.keyCode&&!e.shiftKey)return $(o).jqGrid("saveCell",u,g),!1;if(9===e.keyCode){if(o.grid.hDiv.loading)return!1;e.shiftKey?!$(o).jqGrid("prevCell",u,g,e)&&o.p.editNextRowCell&&0<u-1&&o.rows[u-1]&&(u--,$(o).jqGrid("prevCell",u,o.p.colModel.length,e)):!$(o).jqGrid("nextCell",u,g,e)&&o.p.editNextRowCell&&o.rows[u+1]&&(u++,$(o).jqGrid("nextCell",u,0,e))}e.stopPropagation()}),$(o).triggerHandler("jqGridAfterEditCell",[o.rows[u].id,e,t,u,g]),$.isFunction(o.p.afterEditCell)&&o.p.afterEditCell.call(o,o.rows[u].id,e,t,u,g)}o.p.iCol=g,o.p.iRow=u,o.p.iRowId=o.rows[u].id}}})},saveCell:function(I,D){return this.each(function(){var i=this,o=1<=i.p.savedRow.length?0:null,a=$.jgrid.getRegional(this,"errors"),n=$.jgrid.getRegional(this,"edit");if(i.grid&&!0===i.p.cellEdit){if(null!==o){var l,s,d=$(i).jqGrid("getGridRowById",i.p.savedRow[0].rowId),p=$("td:eq("+D+")",d),e=i.p.colModel[D],c=e.name,u=$.jgrid.jqID(c),g=$(p).offset();switch(e.edittype){case"select":if(e.editoptions.multiple){var t=$("#"+I+"_"+u,d),r=[];(l=$(t).val())?l.join(","):l="",$("option:selected",t).each(function(e,t){r[e]=$(t).text()}),s=r.join(",")}else l=$("#"+I+"_"+u+" option:selected",d).val(),s=$("#"+I+"_"+u+" option:selected",d).text();e.formatter&&(s=l);break;case"checkbox":var h=["Yes","No"];e.editoptions&&e.editoptions.value&&(h=e.editoptions.value.split(":")),l=$("#"+I+"_"+u,d).is(":checked")?h[0]:h[1],s=l;break;case"password":case"text":case"textarea":case"button":l=$("#"+I+"_"+u,d).val(),s=l;break;case"custom":try{if(!e.editoptions||!$.isFunction(e.editoptions.custom_value))throw"e1";if(void 0===(l=e.editoptions.custom_value.call(i,$(".customelement",p),"get")))throw"e2";s=l}catch(e){"e1"===e?$.jgrid.info_dialog(a.errcap,"function 'custom_value' "+n.msg.nodefined,n.bClose,{styleUI:i.p.styleUI}):"e2"===e?$.jgrid.info_dialog(a.errcap,"function 'custom_value' "+n.msg.novalue,n.bClose,{styleUI:i.p.styleUI}):$.jgrid.info_dialog(a.errcap,e.message,n.bClose,{styleUI:i.p.styleUI})}}if(s!==i.p.savedRow[o].v){var f=$(i).triggerHandler("jqGridBeforeSaveCell",[i.p.savedRow[o].rowId,c,l,I,D]);if(f&&(s=l=f),$.isFunction(i.p.beforeSaveCell)){var m=i.p.beforeSaveCell.call(i,i.p.savedRow[o].rowId,c,l,I,D);m&&(s=l=m)}var v=$.jgrid.checkValues.call(i,l,D),b=!1;if(!0===v[0]){var j=$(i).triggerHandler("jqGridBeforeSubmitCell",[i.p.savedRow[o].rowId,c,l,I,D])||{};$.isFunction(i.p.beforeSubmitCell)&&((j=i.p.beforeSubmitCell.call(i,i.p.savedRow[o].rowId,c,l,I,D))||(j={}));var y=$(i).triggerHandler("jqGridOnSubmitCell",[i.p.savedRow[o].rowId,c,l,I,D]);if(void 0===y&&(y=!0),$.isFunction(i.p.onSubmitCell)&&void 0===(y=i.p.onSubmitCell(i.p.savedRow[o].rowId,c,l,I,D))&&(y=!0),!1===y)return;if(0<$("input.hasDatepicker",p).length&&$("input.hasDatepicker",p).datepicker("hide"),"remote"===i.p.cellsubmit)if(i.p.cellurl){var w={};i.p.autoencode&&(l=$.jgrid.htmlEncode(l)),e.editoptions&&e.editoptions.NullIfEmpty&&""===l&&(l="null",b=!0),w[c]=l;var _=i.p.prmNames,x=_.id,q=_.oper;w[x]=$.jgrid.stripPref(i.p.idPrefix,i.p.savedRow[o].rowId),w[q]=_.editoper,w=$.extend(j,w),$(i).jqGrid("progressBar",{method:"show",loadtype:i.p.loadui,htmlcontent:$.jgrid.getRegional(i,"defaults.savetext")}),i.grid.hDiv.loading=!0,$.ajax($.extend({url:i.p.cellurl,data:$.isFunction(i.p.serializeCellData)?i.p.serializeCellData.call(i,w,c):w,type:"POST",complete:function(e,t){if($(i).jqGrid("progressBar",{method:"hide",loadtype:i.p.loadui}),i.grid.hDiv.loading=!1,"success"===t){var r=$(i).triggerHandler("jqGridAfterSubmitCell",[i,e,w[x],c,l,I,D])||[!0,""];!0===r[0]&&$.isFunction(i.p.afterSubmitCell)&&(r=i.p.afterSubmitCell.call(i,e,w[x],c,l,I,D)),!0===r[0]?(b&&(l=""),$(p).empty(),$(i).jqGrid("setCell",i.p.savedRow[o].rowId,D,s,!1,!1,!0),$(p).addClass("dirty-cell"),$(d).addClass("edited"),$(i).triggerHandler("jqGridAfterSaveCell",[i.p.savedRow[o].rowId,c,l,I,D]),$.isFunction(i.p.afterSaveCell)&&i.p.afterSaveCell.call(i,i.p.savedRow[o].rowId,c,l,I,D),i.p.savedRow.splice(0,1)):($(i).triggerHandler("jqGridErrorCell",[e,t]),$.isFunction(i.p.errorCell)?i.p.errorCell.call(i,e,t):$.jgrid.info_dialog(a.errcap,r[1],n.bClose,{styleUI:i.p.styleUI,top:g.top+30,left:g.left,onClose:function(){i.p.restoreCellonFail||$("#"+I+"_"+u,d).focus()}}),i.p.restoreCellonFail&&$(i).jqGrid("restoreCell",I,D))}},error:function(e,t,r){$("#lui_"+$.jgrid.jqID(i.p.id)).hide(),i.grid.hDiv.loading=!1,$(i).triggerHandler("jqGridErrorCell",[e,t,r]),$.isFunction(i.p.errorCell)?i.p.errorCell.call(i,e,t,r):$.jgrid.info_dialog(a.errcap,e.status+" : "+e.statusText+"<br/>"+t,n.bClose,{styleUI:i.p.styleUI,top:g.top+30,left:g.left,onClose:function(){i.p.restoreCellonFail||$("#"+I+"_"+u,d).focus()}}),i.p.restoreCellonFail&&$(i).jqGrid("restoreCell",I,D)}},$.jgrid.ajaxOptions,i.p.ajaxCellOptions||{}))}else try{$.jgrid.info_dialog(a.errcap,a.nourl,n.bClose,{styleUI:i.p.styleUI}),i.p.restoreCellonFail&&$(i).jqGrid("restoreCell",I,D)}catch(e){}"clientArray"===i.p.cellsubmit&&($(p).empty(),$(i).jqGrid("setCell",i.p.savedRow[o].rowId,D,s,!1,!1,!0),$(p).addClass("dirty-cell"),$(d).addClass("edited"),$(i).triggerHandler("jqGridAfterSaveCell",[i.p.savedRow[o].rowId,c,l,I,D]),$.isFunction(i.p.afterSaveCell)&&i.p.afterSaveCell.call(i,i.p.savedRow[o].rowId,c,l,I,D),i.p.savedRow.splice(0,1))}else try{$.isFunction(i.p.validationCell)?i.p.validationCell.call(i,$("#"+I+"_"+u,d),v[1],I,D):(window.setTimeout(function(){$.jgrid.info_dialog(a.errcap,l+" "+v[1],n.bClose,{styleUI:i.p.styleUI,top:g.top+30,left:g.left,onClose:function(){i.p.restoreCellonFail||$("#"+I+"_"+u,d).focus()}})},50),i.p.restoreCellonFail&&$(i).jqGrid("restoreCell",I,D))}catch(e){alert(v[1])}}else $(i).jqGrid("restoreCell",I,D)}window.setTimeout(function(){$("#"+$.jgrid.jqID(i.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(o,a){return this.each(function(){var e=this,t=1<=e.p.savedRow.length?0:null;if(e.grid&&!0===e.p.cellEdit){if(null!==t){var r=$(e).jqGrid("getGridRowById",e.p.savedRow[t].rowId),i=$("td:eq("+a+")",r);if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker",i).datepicker("hide")}catch(e){}$(i).empty().attr("tabindex","-1"),$(e).jqGrid("setCell",e.p.savedRow[0].rowId,a,e.p.savedRow[t].v,!1,!1,!0),$(e).triggerHandler("jqGridAfterRestoreCell",[e.p.savedRow[t].rowId,e.p.savedRow[t].v,o,a]),$.isFunction(e.p.afterRestoreCell)&&e.p.afterRestoreCell.call(e,e.p.savedRow[t].rowId,e.p.savedRow[t].v,o,a),e.p.savedRow.splice(0,1)}window.setTimeout(function(){$("#"+e.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(i,o,a){var n;return this.each(function(){var e,t=this,r=!1;if(t.grid&&!0===t.p.cellEdit){for(e=o+1;e<t.p.colModel.length;e++)if(!0===t.p.colModel[e].editable&&(!$.isFunction(t.p.isCellEditable)||t.p.isCellEditable.call(t,t.p.colModel[e].name,i,e))){r=e;break}!1!==r?(n=!0,$(t).jqGrid("editCell",i,r,!0,a)):(n=!1,0<t.p.savedRow.length&&$(t).jqGrid("saveCell",i,o))}}),n},prevCell:function(i,o,a){var n;return this.each(function(){var e,t=this,r=!1;if(!t.grid||!0!==t.p.cellEdit)return!1;for(e=o-1;0<=e;e--)if(!0===t.p.colModel[e].editable&&(!$.isFunction(t.p.isCellEditable)||t.p.isCellEditable.call(t,t.p.colModel[e].name,i,e))){r=e;break}!1!==r?(n=!0,$(t).jqGrid("editCell",i,r,!0,a)):(n=!1,0<t.p.savedRow.length&&$(t).jqGrid("saveCell",i,o))}),n},GridNav:function(){return this.each(function(){var c=this;if(c.grid&&!0===c.p.cellEdit){c.p.knv=c.p.id+"_kn";var t,r,e=$("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+c.p.knv+"'></div></div>");$(e).insertBefore(c.grid.cDiv),$("#"+c.p.knv).focus().keydown(function(e){switch(r=e.keyCode,"rtl"===c.p.direction&&(37===r?r=39:39===r&&(r=37)),r){case 38:0<c.p.iRow-1&&(i(c.p.iRow-1,c.p.iCol,"vu"),$(c).jqGrid("editCell",c.p.iRow-1,c.p.iCol,!1,e));break;case 40:c.p.iRow+1<=c.rows.length-1&&(i(c.p.iRow+1,c.p.iCol,"vd"),$(c).jqGrid("editCell",c.p.iRow+1,c.p.iCol,!1,e));break;case 37:0<=c.p.iCol-1&&(t=o(c.p.iCol-1,"lft"),i(c.p.iRow,t,"h"),$(c).jqGrid("editCell",c.p.iRow,t,!1,e));break;case 39:c.p.iCol+1<=c.p.colModel.length-1&&(t=o(c.p.iCol+1,"rgt"),i(c.p.iRow,t,"h"),$(c).jqGrid("editCell",c.p.iRow,t,!1,e));break;case 13:0<=parseInt(c.p.iCol,10)&&0<=parseInt(c.p.iRow,10)&&$(c).jqGrid("editCell",c.p.iRow,c.p.iCol,!0,e);break;default:return!0}return!1})}function i(e,t,r){if("v"===r.substr(0,1)){var i=$(c.grid.bDiv)[0].clientHeight,o=$(c.grid.bDiv)[0].scrollTop,a=c.rows[e].offsetTop+c.rows[e].clientHeight,n=c.rows[e].offsetTop;"vd"===r&&i<=a&&($(c.grid.bDiv)[0].scrollTop=$(c.grid.bDiv)[0].scrollTop+c.rows[e].clientHeight),"vu"===r&&n<o&&($(c.grid.bDiv)[0].scrollTop=$(c.grid.bDiv)[0].scrollTop-c.rows[e].clientHeight)}if("h"===r){var l=$(c.grid.bDiv)[0].clientWidth,s=$(c.grid.bDiv)[0].scrollLeft,d=c.rows[e].cells[t].offsetLeft+c.rows[e].cells[t].clientWidth,p=c.rows[e].cells[t].offsetLeft;d>=l+parseInt(s,10)?$(c.grid.bDiv)[0].scrollLeft=$(c.grid.bDiv)[0].scrollLeft+c.rows[e].cells[t].clientWidth:p<s&&($(c.grid.bDiv)[0].scrollLeft=$(c.grid.bDiv)[0].scrollLeft-c.rows[e].cells[t].clientWidth)}}function o(e,t){var r,i;if("lft"===t)for(r=e+1,i=e;0<=i;i--)if(!0!==c.p.colModel[i].hidden){r=i;break}if("rgt"===t)for(r=e-1,i=e;i<c.p.colModel.length;i++)if(!0!==c.p.colModel[i].hidden){r=i;break}return r}})},getChangedCells:function(a){var e=[];return a||(a="all"),this.each(function(){var i,o=this;o.grid&&!0===o.p.cellEdit&&$(o.rows).each(function(t){var r={};$(this).hasClass("edited")&&($("td",this).each(function(e){if("cb"!==(i=o.p.colModel[e].name)&&"subgrid"!==i)if("dirty"===a){if($(this).hasClass("dirty-cell"))try{r[i]=$.unformat.call(o,this,{rowId:o.rows[t].id,colModel:o.p.colModel[e]},e)}catch(e){r[i]=$.jgrid.htmlDecode($(this).html())}}else try{r[i]=$.unformat.call(o,this,{rowId:o.rows[t].id,colModel:o.p.colModel[e]},e)}catch(e){r[i]=$.jgrid.htmlDecode($(this).html())}}),r.id=this.id,e.push(r))})}),e}}),$.extend($.jgrid,{showModal:function(e){e.w.show()},closeModal:function(e){e.w.hide().attr("aria-hidden","true"),e.o&&e.o.remove()},hideModal:function(e,t){var r=!(!(t=$.extend({jqm:!0,gb:"",removemodal:!1,formprop:!1,form:""},t||{})).gb||"string"!=typeof t.gb||"#gbox_"!==t.gb.substr(0,6))&&$("#"+t.gb.substr(6))[0];if(t.onClose){var i=r?t.onClose.call(r,e):t.onClose(e);if("boolean"==typeof i&&!i)return}if(t.formprop&&r&&t.form){var o,a,n=$(e)[0].style.height,l=$(e)[0].style.width;-1<n.indexOf("px")&&(n=parseFloat(n)),-1<l.indexOf("px")&&(l=parseFloat(l)),"edit"===t.form?(o="#"+$.jgrid.jqID("FrmGrid_"+t.gb.substr(6)),a="formProp"):"view"===t.form&&(o="#"+$.jgrid.jqID("ViewGrid_"+t.gb.substr(6)),a="viewProp"),$(r).data(a,{top:parseFloat($(e).css("top")),left:parseFloat($(e).css("left")),width:l,height:n,dataheight:$(o).height(),datawidth:$(o).width()})}if($.fn.jqm&&!0===t.jqm)$(e).attr("aria-hidden","true").jqmHide();else{if(""!==t.gb)try{$(".jqgrid-overlay:first",t.gb).hide()}catch(e){}try{$(".jqgrid-overlay-modal").hide()}catch(e){}$(e).hide().attr("aria-hidden","true")}t.removemodal&&$(e).remove()},findPos:function(e){var t=$(e).offset();return[t.left,t.top]},createModal:function(r,e,i,t,o,a,n){i=$.extend(!0,{},$.jgrid.jqModal||{},i);var l=this,s="rtl"===$(i.gbox).attr("dir"),d=$.jgrid.styleUI[i.styleUI||"jQueryUI"].modal,p=$.jgrid.styleUI[i.styleUI||"jQueryUI"].common,c=document.createElement("div");n=$.extend({},n||{}),c.className="ui-jqdialog "+d.modal,c.id=r.themodal;var u=document.createElement("div");u.className="ui-jqdialog-titlebar "+d.header,u.id=r.modalhead,$(u).append("<span class='ui-jqdialog-title'>"+i.caption+"</span>");var g=$("<a class='ui-jqdialog-titlebar-close "+p.cornerall+"'></a>").hover(function(){g.addClass(p.hover)},function(){g.removeClass(p.hover)}).append("<span class='"+p.icon_base+" "+d.icon_close+"'></span>");$(u).append(g),s?(c.dir="rtl",$(".ui-jqdialog-title",u).css("float","right"),$(".ui-jqdialog-titlebar-close",u).css("left","0.3em")):(c.dir="ltr",$(".ui-jqdialog-title",u).css("float","left"),$(".ui-jqdialog-titlebar-close",u).css("right","0.3em"));var h=document.createElement("div");$(h).addClass("ui-jqdialog-content "+d.content).attr("id",r.modalcontent),$(h).append(e),c.appendChild(h),$(c).prepend(u),!0===a?$("body").append(c):"string"==typeof a?$(a).append(c):$(c).insertBefore(t),$(c).css(n),void 0===i.jqModal&&(i.jqModal=!0);var f={};if($.fn.jqm&&!0===i.jqModal){if(0===i.left&&0===i.top&&i.overlay){var m;m=$.jgrid.findPos(o),i.left=m[0]+4,i.top=m[1]+4}f.top=i.top+"px",f.left=i.left}else 0===i.left&&0===i.top||(f.left=i.left,f.top=i.top+"px");if($("a.ui-jqdialog-titlebar-close",u).click(function(){var e=$("#"+$.jgrid.jqID(r.themodal)).data("onClose")||i.onClose,t=$("#"+$.jgrid.jqID(r.themodal)).data("gbox")||i.gbox;return l.hideModal("#"+$.jgrid.jqID(r.themodal),{gb:t,jqm:i.jqModal,onClose:e,removemodal:i.removemodal||!1,formprop:!i.recreateForm||!1,form:i.form||""}),!1}),0!==i.width&&i.width||(i.width=300),0!==i.height&&i.height||(i.height=200),!i.zIndex){var v=$(t).parents("*[role=dialog]").filter(":first").css("z-index");i.zIndex=v?parseInt(v,10)+2:950}var b=0;if(s&&f.left&&!a&&(b=$(i.gbox).width()-(isNaN(i.width)?0:parseInt(i.width,10))-8,f.left=parseInt(f.left,10)+parseInt(b,10)),f.left&&(f.left+="px"),$(c).css($.extend({width:isNaN(i.width)?"auto":i.width+"px",height:isNaN(i.height)?"auto":i.height+"px",zIndex:i.zIndex,overflow:"hidden"},f)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":r.modalhead,"aria-hidden":"true"}),void 0===i.drag&&(i.drag=!0),void 0===i.resize&&(i.resize=!0),i.drag)if($(u).css("cursor","move"),$.fn.tinyDraggable)$(c).tinyDraggable({handle:"#"+$.jgrid.jqID(u.id)});else try{$(c).draggable({handle:$("#"+$.jgrid.jqID(u.id))})}catch(e){}if(i.resize)if($.fn.jqResize)$(c).append("<div class='jqResize "+d.resizable+" "+p.icon_base+" "+d.icon_resizable+"'></div>"),$("#"+$.jgrid.jqID(r.themodal)).jqResize(".jqResize",!!r.scrollelm&&"#"+$.jgrid.jqID(r.scrollelm));else try{$(c).resizable({handles:"se, sw",alsoResize:!!r.scrollelm&&"#"+$.jgrid.jqID(r.scrollelm)})}catch(e){}!0===i.closeOnEscape&&$(c).keydown(function(e){if(27===e.which){var t=$("#"+$.jgrid.jqID(r.themodal)).data("onClose")||i.onClose;l.hideModal("#"+$.jgrid.jqID(r.themodal),{gb:i.gbox,jqm:i.jqModal,onClose:t,removemodal:i.removemodal||!1,formprop:!i.recreateForm||!1,form:i.form||""})}})},viewModal:function(e,t){var r="";if((t=$.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:$.jgrid.showModal,onHide:$.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},t||{})).gbox){var i=$("#"+t.gbox.substring(6))[0];try{r=$(i).jqGrid("getStyleUI",i.p.styleUI+".common","overlay",!1,"jqgrid-overlay-modal"),t.overlayClass=$(i).jqGrid("getStyleUI",i.p.styleUI+".common","overlay",!0)}catch(e){}}if(void 0===t.focusField&&(t.focusField=0),"number"==typeof t.focusField&&0<=t.focusField?t.focusField=parseInt(t.focusField,10):"boolean"!=typeof t.focusField||t.focusField?t.focusField=0:t.focusField=!1,$.fn.jqm&&!0===t.jqm)t.jqM?$(e).attr("aria-hidden","false").jqm(t).jqmShow():$(e).attr("aria-hidden","false").jqmShow();else{if(""!==t.gbox){var o=parseInt($(e).css("z-index"))-1;t.modal?($(".jqgrid-overlay-modal")[0]||$("body").prepend("<div "+r+"></div>"),$(".jqgrid-overlay-modal").css("z-index",o).show()):($(".jqgrid-overlay:first",t.gbox).css("z-index",o).show(),$(e).data("gbox",t.gbox))}if($(e).show().attr("aria-hidden","false"),0<=t.focusField)try{$(":input:visible",e)[t.focusField].focus()}catch(e){}}},info_dialog:function(e,t,r,i){var o={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};$.extend(!0,o,$.jgrid.jqModal||{},{caption:"<b>"+e+"</b>"},i||{});var a=o.jqModal,n=this,l=$.jgrid.styleUI[o.styleUI||"jQueryUI"].modal,s=$.jgrid.styleUI[o.styleUI||"jQueryUI"].common;$.fn.jqm&&!a&&(a=!1);var d,p="";if(0<o.buttons.length)for(d=0;d<o.buttons.length;d++)void 0===o.buttons[d].id&&(o.buttons[d].id="info_button_"+d),p+="<a id='"+o.buttons[d].id+"' class='fm-button "+s.button+"'>"+o.buttons[d].text+"</a>";var c="<div id='info_id'>";c+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+(isNaN(o.dataheight)?o.dataheight:o.dataheight+"px")+";"+("text-align:"+o.align+";")+"'>"+t+"</div>",c+=r?"<div class='"+l.content+"' style='text-align:"+o.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button "+s.button+"'>"+r+"</a>"+p+"</div>":""!==p?"<div class='"+l.content+"' style='text-align:"+o.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+p+"</div>":"",c+="</div>";try{"false"===$("#info_dialog").attr("aria-hidden")&&$.jgrid.hideModal("#info_dialog",{jqm:a}),$("#info_dialog").remove()}catch(e){}var u=$(".ui-jqgrid").css("font-size")||"11px";$.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},c,o,"","",!0,{"font-size":u}),p&&$.each(o.buttons,function(e){$("#"+$.jgrid.jqID(this.id),"#info_id").on("click",function(){return o.buttons[e].onClick.call($("#info_dialog")),!1})}),$("#closedialog","#info_id").on("click",function(){return n.hideModal("#info_dialog",{jqm:a,onClose:$("#info_dialog").data("onClose")||o.onClose,gb:$("#info_dialog").data("gbox")||o.gbox}),!1}),$(".fm-button","#info_dialog").hover(function(){$(this).addClass(s.hover)},function(){$(this).removeClass(s.hover)}),$.isFunction(o.beforeOpen)&&o.beforeOpen(),$.jgrid.viewModal("#info_dialog",{onHide:function(e){e.w.hide().remove(),e.o&&e.o.remove()},modal:o.modal,jqm:a}),$.isFunction(o.afterOpen)&&o.afterOpen();try{$("#info_dialog").focus()}catch(e){}},bindEv:function(e,t){$.isFunction(t.dataInit)&&t.dataInit.call(this,e,t),t.dataEvents&&$.each(t.dataEvents,function(){void 0!==this.data?$(e).on(this.type,this.data,this.fn):$(e).on(this.type,this.fn)})},createEl:function(e,t,r,i,o){var a="",u=this;function g(r,e,t){var i=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","oper"];i=i.concat(["cacheUrlData","delimiter","separator"]),void 0!==t&&$.isArray(t)&&$.merge(i,t),$.each(e,function(e,t){-1===$.inArray(e,i)&&$(r).attr(e,t)}),e.hasOwnProperty("id")||$(r).attr("id",$.jgrid.randId())}switch(e){case"textarea":a=document.createElement("textarea"),i?t.cols||$(a).css({width:"98%"}):t.cols||(t.cols=20),t.rows||(t.rows=2),("&nbsp;"===r||"&#160;"===r||1===r.length&&160===r.charCodeAt(0))&&(r=""),a.value=r,$(a).attr({role:"textbox",multiline:"true"}),g(a,t);break;case"checkbox":if((a=document.createElement("input")).type="checkbox",t.value){var n=t.value.split(":");r===n[0]&&(a.checked=!0,a.defaultChecked=!0),a.value=n[0],$(a).attr("offval",n[1])}else{var l=(r+"").toLowerCase();l.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==l?(a.checked=!0,a.defaultChecked=!0,a.value=r):a.value="on",$(a).attr("offval","off")}$(a).attr("role","checkbox"),g(a,t,["value"]);break;case"select":(a=document.createElement("select")).setAttribute("role","select");var s,d=[];if(!0===t.multiple?(s=!0,a.multiple="multiple",$(a).attr("aria-multiselectable","true")):s=!1,null!=t.dataUrl){var p=null,h=t.postData||o.postData;try{p=t.rowId}catch(e){}u.p&&u.p.idPrefix&&(p=$.jgrid.stripPref(u.p.idPrefix,p)),$.ajax($.extend({url:$.isFunction(t.dataUrl)?t.dataUrl.call(u,p,r,String(t.name)):t.dataUrl,type:"GET",dataType:"html",data:$.isFunction(h)?h.call(u,p,r,String(t.name)):h,context:{elem:a,options:t,vl:r},success:function(e){var t,r=[],i=this.elem,o=this.vl,a=$.extend({},this.options),n=!0===a.multiple,l=!0===a.cacheUrlData,s="",d=$.isFunction(a.buildSelect)?a.buildSelect.call(u,e):e;if("string"==typeof d&&(d=$($.trim(d)).html()),d){if($(i).append(d),g(i,a,h?["postData"]:void 0),void 0===a.size&&(a.size=n?3:1),n?(r=o.split(","),r=$.map(r,function(e){return $.trim(e)})):r[0]=$.trim(o),$("option",i).each(function(e){t=$(this).text(),o=$(this).val(),l&&(s+=(0!==e?";":"")+o+":"+t),0===e&&i.multiple&&(this.selected=!1),$(this).attr("role","option"),(-1<$.inArray($.trim(t),r)||-1<$.inArray($.trim(o),r))&&(this.selected="selected")}),l)if("edit"===a.oper)$(u).jqGrid("setColProp",a.name,{editoptions:{buildSelect:null,dataUrl:null,value:s}});else if("search"===a.oper)$(u).jqGrid("setColProp",a.name,{searchoptions:{dataUrl:null,value:s}});else if("filter"===a.oper&&$("#fbox_"+u.p.id)[0].p){var p,c=$("#fbox_"+u.p.id)[0].p.columns;$.each(c,function(e){if(p=this.index||this.name,a.name===p)return this.searchoptions.dataUrl=null,this.searchoptions.value=s,!1})}$(u).triggerHandler("jqGridAddEditAfterSelectUrlComplete",[i])}}},o||{}))}else if(t.value){var c;void 0===t.size&&(t.size=s?3:1),s&&(d=r.split(","),d=$.map(d,function(e){return $.trim(e)})),"function"==typeof t.value&&(t.value=t.value());var f,m,v,b,j,y,w=void 0===t.separator?":":t.separator,_=void 0===t.delimiter?";":t.delimiter;if("string"==typeof t.value)for(f=t.value.split(_),c=0;c<f.length;c++)2<(m=f[c].split(w)).length&&(m[1]=$.map(m,function(e,t){if(0<t)return e}).join(w)),(v=document.createElement("option")).setAttribute("role","option"),v.value=m[0],v.innerHTML=m[1],a.appendChild(v),s||$.trim(m[0])!==$.trim(r)&&$.trim(m[1])!==$.trim(r)||(v.selected="selected"),s&&(-1<$.inArray($.trim(m[1]),d)||-1<$.inArray($.trim(m[0]),d))&&(v.selected="selected");else if("[object Array]"===Object.prototype.toString.call(t.value))for(b=t.value,c=0;c<b.length;c++)2===b[c].length&&(j=b[c][0],y=b[c][1],(v=document.createElement("option")).setAttribute("role","option"),v.value=j,v.innerHTML=y,a.appendChild(v),s||$.trim(j)!==$.trim(r)&&$.trim(y)!==$.trim(r)||(v.selected="selected"),s&&(-1<$.inArray($.trim(y),d)||-1<$.inArray($.trim(j),d))&&(v.selected="selected"));else if("object"==typeof t.value)for(j in b=t.value)b.hasOwnProperty(j)&&((v=document.createElement("option")).setAttribute("role","option"),v.value=j,v.innerHTML=b[j],a.appendChild(v),s||$.trim(j)!==$.trim(r)&&$.trim(b[j])!==$.trim(r)||(v.selected="selected"),s&&(-1<$.inArray($.trim(b[j]),d)||-1<$.inArray($.trim(j),d))&&(v.selected="selected"));g(a,t,["value"])}break;case"image":case"file":(a=document.createElement("input")).type=e,g(a,t);break;case"custom":a=document.createElement("span");try{if(!$.isFunction(t.custom_element))throw"e1";var x=t.custom_element.call(u,r,t);if(!x)throw"e2";x=$(x).addClass("customelement").attr({id:t.id,name:t.name}),$(a).empty().append(x)}catch(e){var q=$.jgrid.getRegional(u,"errors"),I=$.jgrid.getRegional(u,"edit");"e1"===e?$.jgrid.info_dialog(q.errcap,"function 'custom_element' "+I.msg.nodefined,I.bClose,{styleUI:u.p.styleUI}):"e2"===e?$.jgrid.info_dialog(q.errcap,"function 'custom_element' "+I.msg.novalue,I.bClose,{styleUI:u.p.styleUI}):$.jgrid.info_dialog(q.errcap,"string"==typeof e?e:e.message,I.bClose,{styleUI:u.p.styleUI})}break;default:var D;D="button"===e?"button":"textbox",(a=document.createElement("input")).type=e,a.value=r,"button"!==e&&(i?t.size||$(a).css({width:"96%"}):t.size||(t.size=20)),$(a).attr("role",D),g(a,t)}return a},checkDate:function(e,t){var r,i={};if(r=-1!==(e=e.toLowerCase()).indexOf("/")?"/":-1!==e.indexOf("-")?"-":-1!==e.indexOf(".")?".":"/",e=e.split(r),3!==(t=t.split(r)).length)return!1;var o,a,n=-1,l=-1,s=-1;for(a=0;a<e.length;a++){var d=isNaN(t[a])?0:parseInt(t[a],10);i[e[a]]=d,-1!==(o=e[a]).indexOf("y")&&(n=a),-1!==o.indexOf("m")&&(s=a),-1!==o.indexOf("d")&&(l=a)}o="y"===e[n]||"yyyy"===e[n]?4:"yy"===e[n]?2:-1;var p,c;return-1!==n&&(p=i[e[n]].toString(),2===o&&1===p.length&&(o=1),p.length===o&&(0!==i[e[n]]||"00"===t[n])&&(-1!==s&&(!((p=i[e[s]].toString()).length<1||i[e[s]]<1||12<i[e[s]])&&(-1!==l&&!((p=i[e[l]].toString()).length<1||i[e[l]]<1||31<i[e[l]]||2===i[e[s]]&&i[e[l]]>((c=i[e[n]])%4!=0||c%100==0&&c%400!=0?28:29)||i[e[l]]>[0,31,29,31,30,31,30,31,31,30,31,30,31][i[e[s]]])))))},isEmpty:function(e){return!(void 0!==e&&!e.match(/^\s+$/)&&""!==e)},checkTime:function(e){var t;if(!$.jgrid.isEmpty(e)){if(!(t=e.match(/^(\d{1,2}):(\d{2})([apAP][Mm])?$/)))return!1;if(t[3]){if(t[1]<1||12<t[1])return!1}else if(23<t[1])return!1;if(59<t[2])return!1}return!0},checkValues:function(e,t,r,i){var o,a,n,l,s,d,p=this,c=p.p.colModel,u=$.jgrid.getRegional(this,"edit.msg"),g=function(e){var t,r;if(2<=(e=e.toString()).length&&("-"===e[0]?(t=e[1],e[2]&&(r=e[2])):(t=e[0],e[1]&&(r=e[1])),"0"===t&&"."!==r))return!1;return"number"==typeof parseFloat(e)&&isFinite(e)};if(void 0===r)if("string"==typeof t){for(a=0,s=c.length;a<s;a++)if(c[a].name===t){o=c[a].editrules,null!=c[t=a].formoptions&&(n=c[a].formoptions.label);break}}else 0<=t&&(o=c[t].editrules);else o=r,n=void 0===i?"_":i;if(o){if(n||(n=null!=p.p.colNames?p.p.colNames[t]:c[t].label),!0===o.required&&$.jgrid.isEmpty(e))return[!1,n+": "+u.required,""];var h=!1!==o.required;if(!0===o.number&&!(!1===h&&$.jgrid.isEmpty(e)||g(e)))return[!1,n+": "+u.number,""];if(void 0!==o.minValue&&!isNaN(o.minValue)&&parseFloat(e)<parseFloat(o.minValue))return[!1,n+": "+u.minValue+" "+o.minValue,""];if(void 0!==o.maxValue&&!isNaN(o.maxValue)&&parseFloat(e)>parseFloat(o.maxValue))return[!1,n+": "+u.maxValue+" "+o.maxValue,""];if(!0===o.email&&!(!1===h&&$.jgrid.isEmpty(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e)))return[!1,n+": "+u.email,""];if(!0===o.integer&&(!1!==h||!$.jgrid.isEmpty(e))){if(!g(e))return[!1,n+": "+u.integer,""];if(e%1!=0||-1!==e.indexOf("."))return[!1,n+": "+u.integer,""]}if(!0===o.date&&!(!1===h&&$.jgrid.isEmpty(e)||(c[t].formatoptions&&c[t].formatoptions.newformat?(l=c[t].formatoptions.newformat,(d=$.jgrid.getRegional(p,"formatter.date.masks"))&&d.hasOwnProperty(l)&&(l=d[l])):l=c[t].datefmt||"Y-m-d",$.jgrid.checkDate(l,e))))return[!1,n+": "+u.date+" - "+l,""];if(!0===o.time&&!(!1===h&&$.jgrid.isEmpty(e)||$.jgrid.checkTime(e)))return[!1,n+": "+u.date+" - hh:mm (am/pm)",""];if(!0===o.url&&!(!1===h&&$.jgrid.isEmpty(e)||/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i.test(e)))return[!1,n+": "+u.url,""];if(!0===o.custom&&(!1!==h||!$.jgrid.isEmpty(e))){if($.isFunction(o.custom_func)){var f=o.custom_func.call(p,e,n,t);return $.isArray(f)?f:[!1,u.customarray,""]}return[!1,u.customfcheck,""]}}return[!0,"",""]},validateForm:function(e){var t,r,i=!0;for(t=0;t<e.elements.length;t++)if(("INPUT"===(r=e.elements[t]).nodeName||"TEXTAREA"===r.nodeName||"SELECT"===r.nodeName)&&(void 0!==r.willValidate?("INPUT"===r.nodeName&&r.type!==r.getAttribute("type")&&r.setCustomValidity($.jgrid.LegacyValidation(r)?"":"error"),r.reportValidity()):(r.validity=r.validity||{},r.validity.valid=$.jgrid.LegacyValidation(r)),!r.validity.valid)){i=!1;break}return i},LegacyValidation:function(e){var t=!0,r=e.value,i=e.getAttribute("type"),o="checkbox"===i||"radio"===i,a=e.getAttribute("required"),n=e.getAttribute("minlength"),l=e.getAttribute("maxlength"),s=e.getAttribute("pattern");return e.disabled||(t=(t=t&&(!a||o&&e.checked||!o&&""!==r))&&(o||(!n||r.length>=n)&&(!l||r.length<=l)))&&s&&(t=(s=new RegExp(s)).test(r)),t},buildButtons:function(e,r,i){var o,a;return $.each(e,function(e,t){t.id||(t.id=$.jgrid.randId()),t.position||(t.position="last"),t.side||(t.side="left"),o=t.icon?" fm-button-icon-"+t.side+"'><span class='"+i.icon_base+" "+t.icon+"'></span>":"'>",a="<a  data-index='"+e+"' id='"+t.id+"' class='fm-button "+i.button+o+t.text+"</a>","last"===t.position?r+=a:r=a+r}),r}}),$.fn.jqFilter=function(e){if("string"==typeof e){var t=$.fn.jqFilter[e];if(!t)throw"jqFilter - No such method: "+e;var r=$.makeArray(arguments).slice(1);return t.apply(this,r)}var F=$.extend(!0,{filter:null,columns:[],sortStrategy:null,onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,uniqueSearchFields:!1,direction:"ltr",addsubgrup:"Add subgroup",addrule:"Add rule",delgroup:"Delete group",delrule:"Delete rule",autoencode:!1},$.jgrid.filter,e||{});return this.each(function(){if(!this.filter){this.p=F,null!==this.p.filter&&void 0!==this.p.filter||(this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]}),null!=this.p.sortStrategy&&$.isFunction(this.p.sortStrategy)&&this.p.columns.sort(this.p.sortStrategy);var e,t,r=this.p.columns.length,q=/msie/i.test(navigator.userAgent)&&!window.opera;if(this.p.initFilter=$.extend(!0,{},this.p.filter),r){for(e=0;e<r;e++)(t=this.p.columns[e]).stype?t.inputtype=t.stype:t.inputtype||(t.inputtype="text"),t.sorttype?t.searchtype=t.sorttype:t.searchtype||(t.searchtype="string"),void 0===t.hidden&&(t.hidden=!1),t.label||(t.label=t.name),t.index&&(t.name=t.index),t.hasOwnProperty("searchoptions")||(t.searchoptions={}),t.hasOwnProperty("searchrules")||(t.searchrules={}),void 0===t.search?t.inlist=!0:t.inlist=t.search;var I=function(){return $("#"+$.jgrid.jqID(F.id))[0]||null},i=I(),D=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].filter,C=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].common;this.p.showQuery&&$(this).append("<table class='queryresult "+D.table_widget+"' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var n=function(e,t){var r=[!0,""],i=I();if($.isFunction(t.searchrules))r=t.searchrules.call(i,e,t);else if($.jgrid&&$.jgrid.checkValues)try{r=$.jgrid.checkValues.call(i,e,-1,t.searchrules,t.label)}catch(e){}r&&r.length&&!1===r[0]&&(F.error=!r[0],F.errmsg=r[1])};this.onchange=function(){return this.p.error=!1,this.p.errmsg="",!!$.isFunction(this.p.onChange)&&this.p.onChange.call(this,this.p)},this.reDraw=function(){$("table.group:first",this).remove();var e=this.createTableForGroup(F.filter,null);$(this).append(e),$.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)},this.createTableForGroup=function(i,e){var o,a=this,t=$("<table class='group "+D.table_widget+" ui-search-table' style='border:0px none;'><tbody></tbody></table>"),r="left";"rtl"===this.p.direction&&(r="right",t.attr("dir","rtl")),null===e&&t.append("<tr class='error' style='display:none;'><th colspan='5' class='"+C.error+"' align='"+r+"'></th></tr>");var n=$("<tr></tr>");t.append(n);var l=$("<th colspan='5' align='"+r+"'></th>");if(n.append(l),!0===this.p.ruleButtons){var s=$("<select size='1' class='opsel "+D.srSelect+"'></select>");l.append(s);var d,p="";for(o=0;o<F.groupOps.length;o++)d=i.groupOp===a.p.groupOps[o].op?" selected='selected'":"",p+="<option value='"+a.p.groupOps[o].op+"'"+d+">"+a.p.groupOps[o].text+"</option>";s.append(p).on("change",function(){i.groupOp=$(s).val(),a.onchange()})}var c="<span></span>";if(this.p.groupButton&&(c=$("<input type='button' value='+ {}' title='"+a.p.subgroup+"' class='add-group "+C.button+"'/>")).on("click",function(){return void 0===i.groups&&(i.groups=[]),i.groups.push({groupOp:F.groupOps[0].op,rules:[],groups:[]}),a.reDraw(),a.onchange(),!1}),l.append(c),!0===this.p.ruleButtons){var u,g=$("<input type='button' value='+' title='"+a.p.addrule+"' class='add-rule ui-add "+C.button+"'/>");g.on("click",function(){for(void 0===i.rules&&(i.rules=[]),o=0;o<a.p.columns.length;o++){var e=void 0===a.p.columns[o].search||a.p.columns[o].search,t=!0===a.p.columns[o].hidden;if(!0===a.p.columns[o].searchoptions.searchhidden&&e||e&&!t){u=a.p.columns[o];break}}return u&&(r=u.searchoptions.sopt?u.searchoptions.sopt:a.p.sopt?a.p.sopt:-1!==$.inArray(u.searchtype,a.p.strarr)?a.p.stropts:a.p.numopts,i.rules.push({field:u.name,op:r[0],data:""}),a.reDraw()),!1;var r}),l.append(g)}if(null!==e){var h=$("<input type='button' value='-' title='"+a.p.delgroup+"' class='delete-group "+C.button+"'/>");l.append(h),h.on("click",function(){for(o=0;o<e.groups.length;o++)if(e.groups[o]===i){e.groups.splice(o,1);break}return a.reDraw(),a.onchange(),!1})}if(void 0!==i.groups)for(o=0;o<i.groups.length;o++){var f=$("<tr></tr>");t.append(f);var m=$("<td class='first'></td>");f.append(m);var v=$("<td colspan='4'></td>");v.append(this.createTableForGroup(i.groups[o],i)),f.append(v)}void 0===i.groupOp&&(i.groupOp=a.p.groupOps[0].op);var b,j=a.p.ruleButtons&&a.p.uniqueSearchFields;if(j)for(b=0;b<a.p.columns.length;b++)a.p.columns[b].inlist&&(a.p.columns[b].search=!0);if(void 0!==i.rules)for(o=0;o<i.rules.length;o++)if(t.append(this.createTableRowForRule(i.rules[o],i)),j){var y=i.rules[o].field;for(b=0;b<a.p.columns.length;b++)if(y===a.p.columns[b].name){a.p.columns[b].search=!1;break}}return t},this.createTableRowForRule=function(n,e){var l,s,d,p,t,c=this,u=I(),r=$("<tr></tr>"),i="";r.append("<td class='first'></td>");var o=$("<td class='columns'></td>");r.append(o);var g,h=$("<select size='1' class='"+D.srSelect+"'></select>"),f=[];o.append(h),h.on("change",function(){if(c.p.ruleButtons&&c.p.uniqueSearchFields){var e=parseInt($(this).data("curr"),10),t=this.selectedIndex;0<=e&&(c.p.columns[e].search=!0,$(this).data("curr",t),c.p.columns[t].search=!1)}for(n.field=$(h).val(),d=$(this).parents("tr:first"),$(".data",d).empty(),l=0;l<c.p.columns.length;l++)if(c.p.columns[l].name===n.field){p=c.p.columns[l];break}if(p){p.searchoptions.id=$.jgrid.randId(),p.searchoptions.name=n.field,p.searchoptions.oper="filter",q&&"text"===p.inputtype&&(p.searchoptions.size||(p.searchoptions.size=10));var r=$.jgrid.createEl.call(u,p.inputtype,p.searchoptions,"",!0,c.p.ajaxSelectOptions||{},!0);$(r).addClass("input-elm "+D.srInput),s=p.searchoptions.sopt?p.searchoptions.sopt:c.p.sopt?c.p.sopt:-1!==$.inArray(p.searchtype,c.p.strarr)?c.p.stropts:c.p.numopts;var i="",o=0;for(f=[],$.each(c.p.ops,function(){f.push(this.oper)}),l=0;l<s.length;l++)-1!==(g=$.inArray(s[l],f))&&(0===o&&(n.op=c.p.ops[g].oper),i+="<option value='"+c.p.ops[g].oper+"'>"+c.p.ops[g].text+"</option>",o++);if($(".selectopts",d).empty().append(i),$(".selectopts",d)[0].selectedIndex=0,$.jgrid.msie()&&$.jgrid.msiever()<9){var a=parseInt($("select.selectopts",d)[0].offsetWidth,10)+1;$(".selectopts",d).width(a),$(".selectopts",d).css("width","auto")}$(".data",d).append(r),$.jgrid.bindEv.call(u,r,p.searchoptions),$(".input-elm",d).on("change",function(e){var t=e.target;"custom"===p.inputtype&&$.isFunction(p.searchoptions.custom_value)?n.data=p.searchoptions.custom_value.call(u,$(".customelement",this),"get"):n.data=$(t).val(),"select"===p.inputtype&&p.searchoptions.multiple&&(n.data=n.data.join(",")),c.onchange()}),setTimeout(function(){n.data=$(r).val(),c.onchange()},0)}});var a=0;for(l=0;l<c.p.columns.length;l++){var m=void 0===c.p.columns[l].search||c.p.columns[l].search,v=!0===c.p.columns[l].hidden;(!0===c.p.columns[l].searchoptions.searchhidden&&m||m&&!v)&&(t="",n.field===c.p.columns[l].name&&(t=" selected='selected'",a=l),i+="<option value='"+c.p.columns[l].name+"'"+t+">"+c.p.columns[l].label+"</option>")}h.append(i),h.data("curr",a);var b=$("<td class='operators'></td>");r.append(b),(p=F.columns[a]).searchoptions.id=$.jgrid.randId(),q&&"text"===p.inputtype&&(p.searchoptions.size||(p.searchoptions.size=10)),p.searchoptions.name=n.field,p.searchoptions.oper="filter";var j=$.jgrid.createEl.call(u,p.inputtype,p.searchoptions,n.data,!0,c.p.ajaxSelectOptions||{},!0);"nu"!==n.op&&"nn"!==n.op||($(j).attr("readonly","true"),$(j).attr("disabled","true"));var y=$("<select size='1' class='selectopts "+D.srSelect+"'></select>");for(b.append(y),y.on("change",function(){n.op=$(y).val(),d=$(this).parents("tr:first");var e=$(".input-elm",d)[0];"nu"===n.op||"nn"===n.op?(n.data="","SELECT"!==e.tagName.toUpperCase()&&(e.value=""),e.setAttribute("readonly","true"),e.setAttribute("disabled","true")):("SELECT"===e.tagName.toUpperCase()&&(n.data=e.value),e.removeAttribute("readonly"),e.removeAttribute("disabled")),c.onchange()}),s=p.searchoptions.sopt?p.searchoptions.sopt:c.p.sopt?c.p.sopt:-1!==$.inArray(p.searchtype,c.p.strarr)?c.p.stropts:c.p.numopts,i="",$.each(c.p.ops,function(){f.push(this.oper)}),l=0;l<s.length;l++)-1!==(g=$.inArray(s[l],f))&&(t=n.op===c.p.ops[g].oper?" selected='selected'":"",i+="<option value='"+c.p.ops[g].oper+"'"+t+">"+c.p.ops[g].text+"</option>");y.append(i);var w=$("<td class='data'></td>");r.append(w),w.append(j),$.jgrid.bindEv.call(u,j,p.searchoptions),$(j).addClass("input-elm "+D.srInput).on("change",function(){n.data="custom"===p.inputtype?p.searchoptions.custom_value.call(u,$(".customelement",this),"get"):$(this).val(),c.onchange()});var _=$("<td></td>");if(r.append(_),!0===this.p.ruleButtons){var x=$("<input type='button' value='-' title='"+c.p.delrule+"' class='delete-rule ui-del "+C.button+"'/>");_.append(x),x.on("click",function(){for(l=0;l<e.rules.length;l++)if(e.rules[l]===n){e.rules.splice(l,1);break}return c.reDraw(),c.onchange(),!1})}return r},this.getStringForGroup=function(e){var t,r="(";if(void 0!==e.groups)for(t=0;t<e.groups.length;t++){1<r.length&&(r+=" "+e.groupOp+" ");try{r+=this.getStringForGroup(e.groups[t])}catch(e){alert(e)}}if(void 0!==e.rules)try{for(t=0;t<e.rules.length;t++)1<r.length&&(r+=" "+e.groupOp+" "),r+=this.getStringForRule(e.rules[t])}catch(e){alert(e)}return"()"===(r+=")")?"":r},this.getStringForRule=function(e){var t,r,i,o="",a="";for(t=0;t<this.p.ops.length;t++)if(this.p.ops[t].oper===e.op){o=this.p.operands.hasOwnProperty(e.op)?this.p.operands[e.op]:"",a=this.p.ops[t].oper;break}for(t=0;t<this.p.columns.length;t++)if(this.p.columns[t].name===e.field){r=this.p.columns[t];break}return void 0===r?"":(i=this.p.autoencode?$.jgrid.htmlEncode(e.data):e.data,"bw"!==a&&"bn"!==a||(i+="%"),"ew"!==a&&"en"!==a||(i="%"+i),"cn"!==a&&"nc"!==a||(i="%"+i+"%"),"in"!==a&&"ni"!==a||(i=" ("+i+")"),F.errorcheck&&n(e.data,r),-1!==$.inArray(r.searchtype,["int","integer","float","number","currency"])||"nn"===a||"nu"===a?e.field+" "+o+" "+i:e.field+" "+o+' "'+i+'"')},this.resetFilter=function(){this.p.filter=$.extend(!0,{},this.p.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){$("th."+C.error,this).html(""),$("tr.error",this).hide()},this.showError=function(){$("th."+C.error,this).html(this.p.errmsg),$("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(F.filter)},this.toString=function(){var i=this;function o(e){if(i.p.errorcheck){var t,r;for(t=0;t<i.p.columns.length;t++)if(i.p.columns[t].name===e.field){r=i.p.columns[t];break}r&&n(e.data,r)}return e.op+"(item."+e.field+",'"+e.data+"')"}return function e(t){var r,i="(";if(void 0!==t.groups)for(r=0;r<t.groups.length;r++)1<i.length&&("OR"===t.groupOp?i+=" || ":i+=" && "),i+=e(t.groups[r]);if(void 0!==t.rules)for(r=0;r<t.rules.length;r++)1<i.length&&("OR"===t.groupOp?i+=" || ":i+=" && "),i+=o(t.rules[r]);return"()"==(i+=")")?"":i}(this.p.filter)},this.reDraw(),this.p.showQuery&&this.onchange(),this.filter=!0}}})},$.extend($.fn.jqFilter,{toSQLString:function(){var e="";return this.each(function(){e=this.toUserFriendlyString()}),e},filterData:function(){var e;return this.each(function(){e=this.p.filter}),e},getParameter:function(r){var i=null;return void 0!==r&&this.each(function(e,t){t.p.hasOwnProperty(r)&&(i=t.p[r])}),i||this[0].p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(e){"string"==typeof e&&(e=$.jgrid.parse(e)),this.each(function(){this.p.filter=e,this.reDraw(),this.onchange()})}}),$.extend($.jgrid,{filterRefactor:function(e){var t,r,i,o,a,n={};try{if((n="string"==typeof e.ruleGroudp?$.jgrid.parse(e.ruleGroup):e.ruleGroup).rules&&n.rules.length)for(t=n.rules,r=0;r<t.length;r++)i=t[r],$.inArray(i.filed,e.ssfield)&&1<(o=i.data.split(e.splitSelect)).length&&(void 0===n.groups&&(n.groups=[]),a={groupOp:e.groupOpSelect,groups:[],rules:[]},n.groups.push(a),$.each(o,function(e){o[e]&&a.rules.push({data:o[e],op:i.op,field:i.field})}),t.splice(r,1),r--)}catch(e){}return n}}),$.jgrid.extend({filterToolbar:function(I){var t=$.jgrid.getRegional(this[0],"search");return I=$.extend({autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,onClearSearchValue:null,url:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,resetIcon:"x",splitSelect:",",groupOpSelect:"OR",errorcheck:!0,operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^",in:"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#",bt:"..."}},t,I||{}),this.each(function(){var q=this;if(!q.p.filterToolbar){$(q).data("filterToolbar")||$(q).data("filterToolbar",I),q.p.force_regional&&(I=$.extend(I,t));var m,v,e,b=$.jgrid.styleUI[q.p.styleUI||"jQueryUI"].filter,u=$.jgrid.styleUI[q.p.styleUI||"jQueryUI"].common,j=$.jgrid.styleUI[q.p.styleUI||"jQueryUI"].base,y=function(){var t,r,i,o,a={},n=0,l={},s=!1,d=[],p=!1,c=[!0,"",""],u=!1;if($.each(q.p.colModel,function(){var e=$("#gs_"+q.p.idPrefix+$.jgrid.jqID(this.name),!0===this.frozen&&!0===q.p.frozenColumns?q.grid.fhDiv:q.grid.hDiv);if(r=this.index||this.name,o=this.searchoptions||{},i=I.searchOperators&&o.searchOperMenu?e.parent().prev().children("a").attr("soper")||I.defaultSearch:o.sopt?o.sopt[0]:"select"===this.stype?"eq":I.defaultSearch,t="custom"===this.stype&&$.isFunction(o.custom_value)&&0<e.length?o.custom_value.call(q,e,"get"):e.val(),"select"===this.stype&&o.multiple&&$.isArray(t)&&t.length&&(s=!0,d.push(r),t=1===t.length?t[0]:t),this.searchrules&&I.errorcheck&&($.isFunction(this.searchrules)?c=this.searchrules.call(q,t,this):$.jgrid&&$.jgrid.checkValues&&(c=$.jgrid.checkValues.call(q,t,-1,this.searchrules,this.label||this.name)),c&&c.length&&!1===c[0]))return this.searchrules.hasOwnProperty("validationError")&&(u=this.searchrules.validationError),!1;if("bt"===i&&(p=!0),t||"nu"===i||"nn"===i)a[r]=t,l[r]=i,n++;else try{delete q.p.postData[r]}catch(e){}}),!1!==c[0]){var e,g=0<n;if(!0===I.stringResult||"local"===q.p.datatype||!0===I.searchOperators){var h,f,m,v,b,j,y='{"groupOp":"'+I.groupOp+'","rules":[',w=0;if($.each(a,function(e,t){0<w&&(y+=","),y+='{"field":"'+e+'",',y+='"op":"'+l[e]+'",',y+='"data":"'+(t+="").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',w++}),y+="]}",s&&$.jgrid.filterRefactor({ruleGroup:y,ssfield:d,splitSelect:I.splitSelect,groupOpSelect:I.groupOpSelect}),p&&($.isPlainObject(h)||(h=$.jgrid.parse(y)),h.rules&&h.rules.length))for(f=h.rules,m=0;m<f.length;m++)"bt"===(v=f[m]).op&&1<(b=v.data.split("...")).length&&(void 0===h.groups&&(h.groups=[]),j={groupOp:"AND",groups:[],rules:[]},h.groups.push(j),$.each(b,function(e){var t=0===e?"ge":"le";b[e]&&j.rules.push({data:b[e],op:t,field:v.field})}),f.splice(m,1),m--);(p||s)&&(y=JSON.stringify(h)),$.extend(q.p.postData,{filters:y}),$.each(["searchField","searchString","searchOper"],function(e,t){q.p.postData.hasOwnProperty(t)&&delete q.p.postData[t]})}else $.extend(q.p.postData,a);I.url&&(e=q.p.url,$(q).jqGrid("setGridParam",{url:I.url}));var _="stop"===$(q).triggerHandler("jqGridToolbarBeforeSearch");!_&&$.isFunction(I.beforeSearch)&&(_=I.beforeSearch.call(q)),_||$(q).jqGrid("setGridParam",{search:g}).trigger("reloadGrid",[{page:1}]),e&&$(q).jqGrid("setGridParam",{url:e}),$(q).triggerHandler("jqGridToolbarAfterSearch"),$.isFunction(I.afterSearch)&&I.afterSearch.call(q)}else if($.isFunction(u))u.call(q,c[1]);else{var x=$.jgrid.getRegional(q,"errors");$.jgrid.info_dialog(x.errcap,c[1],"",{styleUI:q.p.styleUI})}},w=$("<tr class='ui-search-toolbar' role='row'></tr>");I.restoreFromFilters&&(e=q.p.postData.filters)&&("string"==typeof e&&(e=$.jgrid.parse(e)),v=!!e.rules.length&&e.rules),$.each(q.p.colModel,function(e){var t,r,i,o,a,n,l,s,d=this,p="",c="=",u=$("<th role='columnheader' class='"+j.headerBox+" ui-th-"+q.p.direction+"' id='gsh_"+q.p.id+"_"+d.name+"' ></th>"),g=$("<div></div>"),h=$("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper' headers=''></td><td class='ui-search-input' headers=''></td><td class='ui-search-clear' headers=''></td></tr></table>");if(!0===this.hidden&&$(u).css("display","none"),this.search=!1!==this.search,void 0===this.stype&&(this.stype="text"),this.searchoptions=this.searchoptions||{},void 0===this.searchoptions.searchOperMenu&&(this.searchoptions.searchOperMenu=!0),t=$.extend({},this.searchoptions,{name:d.index||d.name,id:"gs_"+q.p.idPrefix+d.name,oper:"search"}),this.search){if(I.restoreFromFilters&&v){s=!1;for(var f=0;f<v.length;f++){if(v[f].field)if((d.index||d.name)===v[f].field){s=v[f];break}}}if(I.searchOperators){for(r=t.sopt?t.sopt[0]:"select"===d.stype?"eq":I.defaultSearch,I.restoreFromFilters&&s&&(r=s.op),i=0;i<I.odata.length;i++)if(I.odata[i].oper===r){c=I.operands[r]||"";break}o=null!=t.searchtitle?t.searchtitle:I.operandTitle,p=this.searchoptions.searchOperMenu?"<a title='"+o+"' style='padding-right: 0.5em;' soper='"+r+"' class='soptclass' colname='"+this.name+"'>"+c+"</a>":""}switch($("td:eq(0)",h).attr("colindex",e).append(p),void 0===t.clearSearch&&(t.clearSearch=!0),t.clearSearch?(a=I.resetTitle||"Clear Search Value",$("td:eq(2)",h).append("<a title='"+a+"' style='padding-right: 0.3em;padding-left: 0.3em;' class='clearsearchclass'>"+I.resetIcon+"</a>")):$("td:eq(2)",h).hide(),this.surl&&(t.dataUrl=this.surl),n="",t.defaultValue&&(n=$.isFunction(t.defaultValue)?t.defaultValue.call(q):t.defaultValue),I.restoreFromFilters&&s&&(n=s.data),l=$.jgrid.createEl.call(q,this.stype,t,n,!1,$.extend({},$.jgrid.ajaxOptions,q.p.ajaxSelectOptions||{})),$(l).addClass(b.srInput),$("td:eq(1)",h).append(l),$(g).append(h),null==t.dataEvents&&(t.dataEvents=[]),this.stype){case"select":!0===I.autosearch&&t.dataEvents.push({type:"change",fn:function(){return y(),!1}});break;case"text":!0===I.autosearch&&(I.searchOnEnter?t.dataEvents.push({type:"keypress",fn:function(e){return 13===(e.charCode||e.keyCode||0)?(y(),!1):this}}):t.dataEvents.push({type:"keydown",fn:function(e){switch(e.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:m&&clearTimeout(m),m=setTimeout(function(){y()},I.autosearchDelay)}}}))}$.jgrid.bindEv.call(q,l,t)}$(u).append(g),$(w).append(u),I.searchOperators&&""!==p||$("td:eq(0)",h).hide()}),$("table thead",q.grid.hDiv).append(w),I.searchOperators&&($(".soptclass",w).click(function(e){var t=$(this).offset();!function(i,e,t){$("#sopt_menu").remove(),e=parseInt(e,10),t=parseInt(t,10)+18;for(var r,o='<ul id="sopt_menu" class="ui-search-menu modal-content" role="menu" tabindex="0" style="font-size:'+($(".ui-jqgrid").css("font-size")||"11px")+";left:"+e+"px;top:"+t+'px;">',a=$(i).attr("soper"),n=[],l=0,s=$(i).attr("colname"),d=q.p.colModel.length;l<d&&q.p.colModel[l].name!==s;)l++;var p=q.p.colModel[l],c=$.extend({},p.searchoptions);for(c.sopt||(c.sopt=[],c.sopt[0]="select"===p.stype?"eq":I.defaultSearch),$.each(I.odata,function(){n.push(this.oper)}),l=0;l<c.sopt.length;l++)-1!==(r=$.inArray(c.sopt[l],n))&&(o+='<li class="ui-menu-item '+(a===I.odata[r].oper?u.highlight:"")+'" role="presentation"><a class="'+u.cornerall+' g-menu-item" tabindex="0" role="menuitem" value="'+I.odata[r].oper+'" oper="'+I.operands[I.odata[r].oper]+'"><table class="ui-common-table"><tr><td width="25px">'+I.operands[I.odata[r].oper]+"</td><td>"+I.odata[r].text+"</td></tr></table></a></li>");o+="</ul>",$("body").append(o),$("#sopt_menu").addClass("ui-menu "+b.menu_widget),$("#sopt_menu > li > a").hover(function(){$(this).addClass(u.hover)},function(){$(this).removeClass(u.hover)}).click(function(){var e=$(this).attr("value"),t=$(this).attr("oper");if($(q).triggerHandler("jqGridToolbarSelectOper",[e,t,i]),$("#sopt_menu").hide(),$(i).text(t).attr("soper",e),!0===I.autosearch){var r=$(i).parent().next().children()[0];($(r).val()||"nu"===e||"nn"===e)&&y()}})}(this,t.left,t.top),e.stopPropagation()}),$("body").on("click",function(e){"soptclass"!==e.target.className&&$("#sopt_menu").remove()})),$(".clearsearchclass",w).click(function(){var e,t=$(this).parents("tr:first"),r=parseInt($("td.ui-search-oper",t).attr("colindex"),10),i=$.extend({},q.p.colModel[r].searchoptions||{}),o=i.defaultValue?i.defaultValue:"";"select"===q.p.colModel[r].stype?(e=$("td.ui-search-input select",t),o?e.val(o):e[0].selectedIndex=0):(e=$("td.ui-search-input input",t)).val(o),$(q).triggerHandler("jqGridToolbarClearVal",[e[0],r,i,o]),$.isFunction(I.onClearSearchValue)&&I.onClearSearchValue.call(q,e[0],r,i,o),!0===I.autosearch&&y()}),this.p.filterToolbar=!0,this.triggerToolbar=y,this.clearToolbar=function(e){var r,i={},o=0;e="boolean"!=typeof e||e,$.each(q.p.colModel,function(){var t,e=$("#gs_"+q.p.idPrefix+$.jgrid.jqID(this.name),!0===this.frozen&&!0===q.p.frozenColumns?q.grid.fhDiv:q.grid.hDiv);switch(this.searchoptions&&void 0!==this.searchoptions.defaultValue&&(t=this.searchoptions.defaultValue),r=this.index||this.name,this.stype){case"select":if(e.find("option").each(function(e){if(0===e&&(this.selected=!0),$(this).val()===t)return!(this.selected=!0)}),void 0!==t)i[r]=t,o++;else try{delete q.p.postData[r]}catch(e){}break;case"text":if(e.val(t||""),void 0!==t)i[r]=t,o++;else try{delete q.p.postData[r]}catch(e){}break;case"custom":$.isFunction(this.searchoptions.custom_value)&&0<e.length&&this.searchoptions.custom_value.call(q,e,"set",t||"")}});var t,a=0<o;if((q.p.resetsearch=!0)===I.stringResult||"local"===q.p.datatype){var n='{"groupOp":"'+I.groupOp+'","rules":[',l=0;$.each(i,function(e,t){0<l&&(n+=","),n+='{"field":"'+e+'",',n+='"op":"eq",',n+='"data":"'+(t+="").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',l++}),n+="]}",$.extend(q.p.postData,{filters:n}),$.each(["searchField","searchString","searchOper"],function(e,t){q.p.postData.hasOwnProperty(t)&&delete q.p.postData[t]})}else $.extend(q.p.postData,i);I.url&&(t=q.p.url,$(q).jqGrid("setGridParam",{url:I.url}));var s="stop"===$(q).triggerHandler("jqGridToolbarBeforeClear");!s&&$.isFunction(I.beforeClear)&&(s=I.beforeClear.call(q)),s||e&&$(q).jqGrid("setGridParam",{search:a}).trigger("reloadGrid",[{page:1}]),t&&$(q).jqGrid("setGridParam",{url:t}),$(q).triggerHandler("jqGridToolbarAfterClear"),$.isFunction(I.afterClear)&&I.afterClear()},this.toggleToolbar=function(){var e=$("tr.ui-search-toolbar",q.grid.hDiv);!0===q.p.frozenColumns&&$(q).jqGrid("destroyFrozenColumns"),"none"===e.css("display")?e.show():e.hide(),!0===q.p.frozenColumns&&$(q).jqGrid("setFrozenColumns")}}})},destroyFilterToolbar:function(){return this.each(function(){this.p.filterToolbar&&(this.triggerToolbar=null,this.clearToolbar=null,this.toggleToolbar=null,this.p.filterToolbar=!1,$(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},refreshFilterToolbar:function(h){return h=$.extend(!0,{filters:"",onClearVal:null,onSetVal:null},h||{}),this.each(function(){var o,a,n,e,l,s,d,p=this,c=p.p.colModel,u=p.p.colModel.length,g=[];if(p.p.filterToolbar){for(a=$(p).data("filterToolbar"),o=0;o<u;o++){switch(g.push(c[o].name),n=$("#gs_"+p.p.idPrefix+$.jgrid.jqID(c[o].name)),c[o].stype){case"select":case"text":n.val("")}$.isFunction(h.onClearVal)&&h.onClearVal.call(p,n,c[o].name)}"string"==typeof h.filters&&(h.filters.length?e=h.filters:p.p.postData.hasOwnProperty("filters")&&(e=p.p.postData.filters),e=$.jgrid.parse(e)),$.isPlainObject(e)&&function e(t){if(t&&t.rules){for(l=t.rules,u=l.length,o=0;o<u;o++)if(s=l[o],-1!==(d=$.inArray(s.field,g))&&0<(n=$("#gs_"+p.p.idPrefix+$.jgrid.jqID(c[d].name))).length&&("select"===c[d].stype?n.find("option[value='"+$.jgrid.jqID(s.data)+"']").prop("selected",!0):"text"===c[d].stype&&n.val(s.data),$.isFunction(h.onSetVal)&&h.onSetVal.call(p,n,c[d].name),a&&a.searchOperators)){var r=n.parent().prev();r.hasClass("ui-search-oper")&&($(".soptclass",r).attr("soper",s.op),a.operands.hasOwnProperty(s.op)&&$(".soptclass",r).html(a.operands[s.op]))}if(t.groups)for(var i=0;i<t.groups.length;i++)e(t.groups[i])}}(e)}})},searchGrid:function(C){var e=$.jgrid.getRegional(this[0],"search");return C=$.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,sortStrategy:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,splitSelect:",",groupOpSelect:"OR",operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE",in:"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"},buttons:[]},e,C||{}),this.each(function(){var o=this;if(o.grid){var i,a="fbox_"+o.p.id,t=!0,n=!0,l={themodal:"searchmod"+a,modalhead:"searchhd"+a,modalcontent:"searchcnt"+a,scrollelm:a},r=$.isPlainObject(o.p_savedFilter)&&!$.isEmptyObject(o.p_savedFilter)?o.p_savedFilter:o.p.postData[C.sFilter],e=$.jgrid.styleUI[o.p.styleUI||"jQueryUI"].filter,s=$.jgrid.styleUI[o.p.styleUI||"jQueryUI"].common;if(C.styleUI=o.p.styleUI,"string"==typeof r&&(r=$.jgrid.parse(r)),!0===C.recreateFilter&&$("#"+$.jgrid.jqID(l.themodal)).remove(),void 0!==$("#"+$.jgrid.jqID(l.themodal))[0])D($("#fbox_"+$.jgrid.jqID(o.p.id)));else{var d=$("<div><div id='"+a+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+$.jgrid.jqID(o.p.id)),p="left",c="";"rtl"===o.p.direction&&(p="right",c=" style='text-align:left'",d.attr("dir","rtl"));var u,g,h=$.extend([],o.p.colModel),f="<a id='"+a+"_search' class='fm-button "+s.button+" fm-button-icon-right ui-search'><span class='"+s.icon_base+" "+e.icon_search+"'></span>"+C.Find+"</a>",m="<a id='"+a+"_reset' class='fm-button "+s.button+" fm-button-icon-left ui-reset'><span class='"+s.icon_base+" "+e.icon_reset+"'></span>"+C.Reset+"</a>",v="",b="",j=!1,y=-1,w=!1,_=[];C.showQuery&&(v="<a id='"+a+"_query' class='fm-button "+s.button+" fm-button-icon-left'><span class='"+s.icon_base+" "+e.icon_query+"'></span>Query</a>");var x=$.jgrid.buildButtons(C.buttons,v+f,s);if(C.columns.length?(h=C.columns,u=h[y=0].index||h[0].name):$.each(h,function(e,t){if(t.label||(t.label=o.p.colNames[e]),!j){var r=void 0===t.search||t.search,i=!0===t.hidden;(t.searchoptions&&!0===t.searchoptions.searchhidden&&r||r&&!i)&&(j=!0,u=t.index||t.name,y=e)}"select"===t.stype&&t.searchoptions&&t.searchoptions.multiple&&(w=!0,_.push(t.index||t.name))}),!r&&u||!1===C.multipleSearch){var q="eq";0<=y&&h[y].searchoptions&&h[y].searchoptions.sopt?q=h[y].searchoptions.sopt[0]:C.sopt&&C.sopt.length&&(q=C.sopt[0]),r={groupOp:"AND",rules:[{field:u,op:q,data:""}]}}j=!1,C.tmplNames&&C.tmplNames.length&&(j=!0,b="<tr><td class='ui-search-label'>"+C.tmplLabel+"</td>",b+="<td><select size='1' class='ui-template "+e.srSelect+"'>",b+="<option value='default'>Default</option>",$.each(C.tmplNames,function(e,t){b+="<option value='"+e+"'>"+t+"</option>"}),b+="</select></td></tr>"),g="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+a+"_2'><tbody><tr><td colspan='2'><hr class='"+s.content+"' style='margin:1px'/></td></tr>"+b+"<tr><td class='EditButton' style='text-align:"+p+"'>"+m+"</td><td class='EditButton' "+c+">"+x+"</td></tr></tbody></table>",a=$.jgrid.jqID(a),$("#"+a).jqFilter({columns:h,sortStrategy:C.sortStrategy,filter:C.loadDefaults?r:null,showQuery:C.showQuery,errorcheck:C.errorcheck,sopt:C.sopt,groupButton:C.multipleGroup,ruleButtons:C.multipleSearch,uniqueSearchFields:C.uniqueSearchFields,afterRedraw:C.afterRedraw,ops:C.odata,operands:C.operands,ajaxSelectOptions:o.p.ajaxSelectOptions,groupOps:C.groupOps,addsubgrup:C.addsubgrup,addrule:C.addrule,delgroup:C.delgroup,delrule:C.delrule,autoencode:o.p.autoencode,onChange:function(){this.p.showQuery&&$(".query",this).html(this.toUserFriendlyString()),$.isFunction(C.afterChange)&&C.afterChange.call(o,$("#"+a),C)},direction:o.p.direction,id:o.p.id}),d.append(g),$("#"+a+"_2").find("[data-index]").each(function(){var t=parseInt($(this).attr("data-index"),10);0<=t&&$(this).on("click",function(e){C.buttons[t].click.call(o,$("#"+a),C,e)})}),j&&C.tmplFilters&&C.tmplFilters.length&&$(".ui-template",d).on("change",function(){var e=$(this).val();return"default"===e?$("#"+a).jqFilter("addFilter",r):$("#"+a).jqFilter("addFilter",C.tmplFilters[parseInt(e,10)]),!1}),!0===C.multipleGroup&&(C.multipleSearch=!0),$(o).triggerHandler("jqGridFilterInitialize",[$("#"+a)]),$.isFunction(C.onInitializeSearch)&&C.onInitializeSearch.call(o,$("#"+a)),C.gbox="#gbox_"+a;var I=$(".ui-jqgrid").css("font-size")||"11px";C.layer?$.jgrid.createModal(l,d,C,"#gview_"+$.jgrid.jqID(o.p.id),$("#gbox_"+$.jgrid.jqID(o.p.id))[0],"string"==typeof C.layer?"#"+$.jgrid.jqID(C.layer):C.layer,"string"==typeof C.layer?{position:"relative","font-size":I}:{"font-size":I}):$.jgrid.createModal(l,d,C,"#gview_"+$.jgrid.jqID(o.p.id),$("#gbox_"+$.jgrid.jqID(o.p.id))[0],null,{"font-size":I}),(C.searchOnEnter||C.closeOnEscape)&&$("#"+$.jgrid.jqID(l.themodal)).keydown(function(e){var t=$(e.target);return!C.searchOnEnter||13!==e.which||t.hasClass("add-group")||t.hasClass("add-rule")||t.hasClass("delete-group")||t.hasClass("delete-rule")||t.hasClass("fm-button")&&t.is("[id$=_query]")?C.closeOnEscape&&27===e.which?($("#"+$.jgrid.jqID(l.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0:($("#"+a+"_search").click(),!1)}),v&&$("#"+a+"_query").on("click",function(){return $(".queryresult",d).toggle(),!1}),void 0===C.stringResult&&(C.stringResult=C.multipleSearch),$("#"+a+"_search").on("click",function(){var e,t,r={};if((i=$("#"+a)).find(".input-elm:focus").change(),w&&C.multipleSearch?(o.p_savedFilter={},t=$.jgrid.filterRefactor({ruleGroup:$.extend(!0,{},i.jqFilter("filterData")),ssfield:_,splitSelect:C.splitSelect,groupOpSelect:C.groupOpSelect}),o.p_savedFilter=$.extend(!0,{},i.jqFilter("filterData"))):t=i.jqFilter("filterData"),C.errorcheck&&(i[0].hideError(),C.showQuery||i.jqFilter("toSQLString"),i[0].p.error))return i[0].showError(),!1;if(C.stringResult){try{e=JSON.stringify(t)}catch(e){}"string"==typeof e&&(r[C.sFilter]=e,$.each([C.sField,C.sValue,C.sOper],function(){r[this]=""}))}else C.multipleSearch?(r[C.sFilter]=t,$.each([C.sField,C.sValue,C.sOper],function(){r[this]=""})):(r[C.sField]=t.rules[0].field,r[C.sValue]=t.rules[0].data,r[C.sOper]=t.rules[0].op,r[C.sFilter]="");return o.p.search=!0,$.extend(o.p.postData,r),void 0===(n=$(o).triggerHandler("jqGridFilterSearch"))&&(n=!0),n&&$.isFunction(C.onSearch)&&(n=C.onSearch.call(o,o.p.filters)),!1!==n&&$(o).trigger("reloadGrid",[{page:1}]),C.closeAfterSearch&&$.jgrid.hideModal("#"+$.jgrid.jqID(l.themodal),{gb:"#gbox_"+$.jgrid.jqID(o.p.id),jqm:C.jqModal,onClose:C.onClose}),!1}),$("#"+a+"_reset").on("click",function(){var e={},t=$("#"+a);return o.p.search=!1,!(o.p.resetsearch=!0)===C.multipleSearch?e[C.sField]=e[C.sValue]=e[C.sOper]="":e[C.sFilter]="",t[0].resetFilter(),j&&$(".ui-template",d).val("default"),$.extend(o.p.postData,e),void 0===(n=$(o).triggerHandler("jqGridFilterReset"))&&(n=!0),n&&$.isFunction(C.onReset)&&(n=C.onReset.call(o)),!1!==n&&$(o).trigger("reloadGrid",[{page:1}]),C.closeAfterReset&&$.jgrid.hideModal("#"+$.jgrid.jqID(l.themodal),{gb:"#gbox_"+$.jgrid.jqID(o.p.id),jqm:C.jqModal,onClose:C.onClose}),!1}),D($("#"+a)),$(".fm-button:not(."+s.disabled+")",d).hover(function(){$(this).addClass(s.hover)},function(){$(this).removeClass(s.hover)})}}function D(e){void 0===(t=$(o).triggerHandler("jqGridFilterBeforeShow",[e]))&&(t=!0),t&&$.isFunction(C.beforeShowSearch)&&(t=C.beforeShowSearch.call(o,e)),t&&($.jgrid.viewModal("#"+$.jgrid.jqID(l.themodal),{gbox:"#gbox_"+$.jgrid.jqID(o.p.id),jqm:C.jqModal,modal:C.modal,overlay:C.overlay,toTop:C.toTop}),$(o).triggerHandler("jqGridFilterAfterShow",[e]),$.isFunction(C.afterShowSearch)&&C.afterShowSearch.call(o,e))}})},filterInput:function(l,s){return s=$.extend(!0,{defaultSearch:"cn",groupOp:"OR",searchAll:!1,beforeSearch:null,afterSearch:null},s||{}),this.each(function(){var r=this;if(r.grid){var e,t,i,o='{"groupOp":"'+s.groupOp+'","rules":[',a=0;if(l+="","local"===r.p.datatype){$.each(r.p.colModel,function(){e=this.index||this.name,t=this.searchoptions||{},i=s.defaultSearch?s.defaultSearch:t.sopt?t.sopt[0]:s.defaultSearch,this.search=!1!==this.search,(this.search||s.searchAll)&&(0<a&&(o+=","),o+='{"field":"'+e+'",',o+='"op":"'+i+'",',o+='"data":"'+l.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',a++)}),o+="]}",$.extend(r.p.postData,{filters:o}),$.each(["searchField","searchString","searchOper"],function(e,t){r.p.postData.hasOwnProperty(t)&&delete r.p.postData[t]});var n="stop"===$(r).triggerHandler("jqGridFilterInputBeforeSearch");!n&&$.isFunction(s.beforeSearch)&&(n=s.beforeSearch.call(r)),n||$(r).jqGrid("setGridParam",{search:!0}).trigger("reloadGrid",[{page:1}]),$(r).triggerHandler("jqGridFilterInputAfterSearch"),$.isFunction(s.afterSearch)&&s.afterSearch.call(r)}}})}});var rp_ge={};if($.jgrid.extend({editGridRow:function(H,L){var e=$.jgrid.getRegional(this[0],"edit"),t=this[0].p.styleUI,V=$.jgrid.styleUI[t].formedit,W=$.jgrid.styleUI[t].common;return L=$.extend(!0,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:W.overlay,removemodal:!0,form:"edit",template:null,focusField:!0,editselected:!1,html5Check:!1,buttons:[]},e,L||{}),rp_ge[$(this)[0].p.id]=L,this.each(function(){var _=this;if(_.grid&&H){_.p.savedData={};var i,f,m,v=_.p.id,x="FrmGrid_"+v,e="TblGrid_"+v,b="#"+$.jgrid.jqID(e),j={themodal:"editmod"+v,modalhead:"edithd"+v,modalcontent:"editcnt"+v,scrollelm:x},t=!0,r=1,o=0,q="string"==typeof rp_ge[_.p.id].template&&0<rp_ge[_.p.id].template.length,y=$.jgrid.getRegional(this,"errors");rp_ge[_.p.id].styleUI=_.p.styleUI||"jQueryUI",$.jgrid.isMobile()&&(rp_ge[_.p.id].resize=!1),"new"===H?(H="_empty",m="add",L.caption=rp_ge[_.p.id].addCaption):(L.caption=rp_ge[_.p.id].editCaption,m="edit"),L.recreateForm||$(_).data("formProp")&&$.extend(rp_ge[$(this)[0].p.id],$(_).data("formProp"));var a=!0;L.checkOnUpdate&&L.jqModal&&!L.modal&&(a=!1);var n,l,s,d=isNaN(rp_ge[$(this)[0].p.id].dataheight)?rp_ge[$(this)[0].p.id].dataheight:rp_ge[$(this)[0].p.id].dataheight+"px",p=isNaN(rp_ge[$(this)[0].p.id].datawidth)?rp_ge[$(this)[0].p.id].datawidth:rp_ge[$(this)[0].p.id].datawidth+"px",I=$("<form name='FormPost' id='"+x+"' class='FormGrid' onSubmit='return false;' style='width:"+p+";height:"+d+";'></form>").data("disabled",!1);if(q?(l=rp_ge[$(this)[0].p.id].template,s="","string"==typeof l&&(s=l.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(e,t){return'<span id="'+t+'" ></span>'})),n=s,i=b):(n=$("<table id='"+e+"' class='EditTable ui-common-table'><tbody></tbody></table>"),i=b+"_2"),x="#"+$.jgrid.jqID(x),$(I).append("<div class='FormError "+W.error+"' style='display:none;'></div>"),$(I).append("<div class='tinfo topinfo'>"+rp_ge[_.p.id].topinfo+"</div>"),$(_.p.colModel).each(function(){var e=this.formoptions;r=Math.max(r,e&&e.colpos||0),o=Math.max(o,e&&e.rowpos||0)}),$(I).append(n),void 0===(t=$(_).triggerHandler("jqGridAddEditBeforeInitData",[I,m]))&&(t=!0),t&&$.isFunction(rp_ge[_.p.id].beforeInitData)&&(t=rp_ge[_.p.id].beforeInitData.call(_,I,m)),!1!==t){!function(){var e;if("_empty"!==H&&void 0!==_.p.savedRow&&0<_.p.savedRow.length&&$.isFunction($.fn.jqGrid.restoreRow))for(e=0;e<_.p.savedRow.length;e++)if(_.p.savedRow[e].id===H){$(_).jqGrid("restoreRow",H);break}}(),function(l,s,d,p){var c,u,g,h,f,m,e,v,t,b=0,j=[],y=!1,w="";for(e=1;e<=p;e++)w+="<td class='CaptionTD'></td><td class='DataTD'></td>";"_empty"!==l&&(y=$(s).jqGrid("getInd",l)),$(s.p.colModel).each(function(t){if(c=this.name,u=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,f=u?"style='display:none'":"","cb"!==c&&"subgrid"!==c&&!0===this.editable&&"rn"!==c){if(!1===y)h="";else if(c===s.p.ExpandColumn&&!0===s.p.treeGrid)h=$("td[role='gridcell']:eq("+t+")",s.rows[y]).text();else{try{h=$.unformat.call(s,$("td[role='gridcell']:eq("+t+")",s.rows[y]),{rowId:l,colModel:this},t)}catch(e){h=this.edittype&&"textarea"===this.edittype?$("td[role='gridcell']:eq("+t+")",s.rows[y]).text():$("td[role='gridcell']:eq("+t+")",s.rows[y]).html()}(!h||"&nbsp;"===h||"&#160;"===h||1===h.length&&160===h.charCodeAt(0))&&(h="")}var e=$.extend({},this.editoptions||{},{id:c,name:c,rowId:l,oper:"edit"}),r=$.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),i=parseInt(r.rowpos,10)||b+1,o=parseInt(2*(parseInt(r.colpos,10)||1),10);if("_empty"===l&&e.defaultValue&&(h=$.isFunction(e.defaultValue)?e.defaultValue.call(_):e.defaultValue),this.edittype||(this.edittype="text"),_.p.autoencode&&(h=$.jgrid.htmlDecode(h)),m=$.jgrid.createEl.call(_,this.edittype,e,h,!1,$.extend({},$.jgrid.ajaxOptions,s.p.ajaxSelectOptions||{})),"select"===this.edittype&&(h=$(m).val(),"select-multiple"===$(m).get(0).type&&h&&(h=h.join(","))),"checkbox"===this.edittype&&(h=$(m).is(":checked")?$(m).val():$(m).attr("offval")),$(m).addClass("FormElement"),-1<$.inArray(this.edittype,["text","textarea","password","select","color","date","datetime","datetime-local","email","month","number","range","search","tel","time","url","week"])&&$(m).addClass(V.inputClass),v=!0,q){var a=$(I).find("#"+c);a.length?a.replaceWith(m):v=!1}else{if(g=$(d).find("tr[rowpos="+i+"]"),r.rowabove){var n=$("<tr><td class='contentinfo' colspan='"+2*p+"'>"+r.rowcontent+"</td></tr>");$(d).append(n),n[0].rp=i}0===g.length&&(g=$("<tr "+f+" rowpos='"+i+"'></tr>").addClass("FormData").attr("id","tr_"+c),$(g).append(w),$(d).append(g),g[0].rp=i),$("td:eq("+(o-2)+")",g[0]).html("<label for='"+c+"'>"+(void 0===r.label?s.p.colNames[t]:r.label)+"</label>"),$("td:eq("+(o-1)+")",g[0]).append(r.elmprefix).append(m).append(r.elmsuffix)}(rp_ge[_.p.id].checkOnSubmit||rp_ge[_.p.id].checkOnUpdate)&&v&&(_.p.savedData[c]=h),"custom"===this.edittype&&$.isFunction(e.custom_value)&&e.custom_value.call(_,$("#"+c,x),"set",h),$.jgrid.bindEv.call(_,m,e),j[b]=t,b++}}),0<b&&(q?(t="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+s.p.id+"_id' value='"+l+"'/>",$(I).append(t)):((t=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*p-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+s.p.id+"_id' value='"+l+"'/></td></tr>"))[0].rp=b+999,$(d).append(t)),(rp_ge[_.p.id].checkOnSubmit||rp_ge[_.p.id].checkOnUpdate)&&(_.p.savedData[s.p.id+"_id"]=l))}(H,_,n,r);var c="rtl"===_.p.direction,u=c?"pData":"nData",g="<a id='"+(c?"nData":"pData")+"' class='fm-button "+W.button+"'><span class='"+W.icon_base+" "+V.icon_prev+"'></span></a>",h="<a id='"+u+"' class='fm-button "+W.button+"'><span class='"+W.icon_base+" "+V.icon_next+"'></span></a>",w="<a id='sData' class='fm-button "+W.button+"'>"+L.bSubmit+"</a>",D="<a id='cData' class='fm-button "+W.button+"'>"+L.bCancel+"</a>",C=$.isArray(rp_ge[_.p.id].buttons)?$.jgrid.buildButtons(rp_ge[_.p.id].buttons,w+D,W):w+D,F="<table style='height:auto' class='EditTable ui-common-table' id='"+e+"_2'><tbody><tr><td colspan='2'><hr class='"+W.content+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(c?h+g:g+h)+"</td><td class='EditButton'>"+C+"</td></tr>";if(F+="</tbody></table>",0<o){var G=[];$.each($(n)[0].rows,function(e,t){G[e]=t}),G.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),$.each(G,function(e,t){$("tbody",n).append(t)})}L.gbox="#gbox_"+$.jgrid.jqID(v);var k,S=!1;!0===L.closeOnEscape&&(L.closeOnEscape=!1,S=!0),q?($(I).find("#pData").replaceWith(g),$(I).find("#nData").replaceWith(h),$(I).find("#sData").replaceWith(w),$(I).find("#cData").replaceWith(D),k=$("<div id="+e+"></div>").append(I)):k=$("<div></div>").append(I).append(F),$(I).append("<div class='binfo topinfo bottominfo'>"+rp_ge[_.p.id].bottominfo+"</div>");var R=$(".ui-jqgrid").css("font-size")||"11px";if($.jgrid.createModal(j,k,rp_ge[$(this)[0].p.id],"#gview_"+$.jgrid.jqID(_.p.id),$("#gbox_"+$.jgrid.jqID(_.p.id))[0],null,{"font-size":R}),c&&($("#pData, #nData",b+"_2").css("float","right"),$(".EditButton",b+"_2").css("text-align","left")),rp_ge[_.p.id].topinfo&&$(".tinfo",x).show(),rp_ge[_.p.id].bottominfo&&$(".binfo",x).show(),F=k=null,$("#"+$.jgrid.jqID(j.themodal)).keydown(function(e){var t=e.target;if(!0===$(x).data("disabled"))return!1;if(!0===rp_ge[_.p.id].savekey[0]&&e.which===rp_ge[_.p.id].savekey[1]&&"TEXTAREA"!==t.tagName)return $("#sData",b+"_2").trigger("click"),!1;if(27===e.which)return E()&&S&&$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:L.gbox,jqm:L.jqModal,onClose:rp_ge[_.p.id].onClose,removemodal:rp_ge[_.p.id].removemodal,formprop:!rp_ge[_.p.id].recreateForm,form:rp_ge[_.p.id].form}),!1;if(!0===rp_ge[_.p.id].navkeys[0]){if("_empty"===$("#id_g",b).val())return!0;if(e.which===rp_ge[_.p.id].navkeys[1])return $("#pData",i).trigger("click"),!1;if(e.which===rp_ge[_.p.id].navkeys[2])return $("#nData",i).trigger("click"),!1}}),L.checkOnUpdate&&($("a.ui-jqdialog-titlebar-close span","#"+$.jgrid.jqID(j.themodal)).removeClass("jqmClose"),$("a.ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(j.themodal)).off("click").click(function(){return E()&&$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(v),jqm:L.jqModal,onClose:rp_ge[_.p.id].onClose,removemodal:rp_ge[_.p.id].removemodal,formprop:!rp_ge[_.p.id].recreateForm,form:rp_ge[_.p.id].form}),!1})),L.saveicon=$.extend([!0,"left",V.icon_save],L.saveicon),L.closeicon=$.extend([!0,"left",V.icon_close],L.closeicon),!0===L.saveicon[0]&&$("#sData",i).addClass("right"===L.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+W.icon_base+" "+L.saveicon[2]+"'></span>"),!0===L.closeicon[0]&&$("#cData",i).addClass("right"===L.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+W.icon_base+" "+L.closeicon[2]+"'></span>"),rp_ge[_.p.id].checkOnSubmit||rp_ge[_.p.id].checkOnUpdate){w="<a id='sNew' class='fm-button "+W.button+"' style='z-index:1002'>"+L.bYes+"</a>",h="<a id='nNew' class='fm-button "+W.button+"' style='z-index:1002;margin-left:5px'>"+L.bNo+"</a>",D="<a id='cNew' class='fm-button "+W.button+"' style='z-index:1002;margin-left:5px;'>"+L.bExit+"</a>";var M=L.zIndex||999;M++,$("#"+j.themodal).append("<div class='"+L.overlayClass+" jqgrid-overlay confirm' style='z-index:"+M+";display:none;position:absolute;'>&#160;</div><div class='confirm ui-jqconfirm "+W.content+"' style='z-index:"+(M+1)+"'>"+L.saveData+"<br/><br/>"+w+h+D+"</div>"),$("#sNew","#"+$.jgrid.jqID(j.themodal)).click(function(){return A(),$(x).data("disabled",!1),$(".confirm","#"+$.jgrid.jqID(j.themodal)).hide(),!1}),$("#nNew","#"+$.jgrid.jqID(j.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(j.themodal)).hide(),$(x).data("disabled",!1),setTimeout(function(){$(":input:visible",x)[0].focus()},0),!1}),$("#cNew","#"+$.jgrid.jqID(j.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(j.themodal)).hide(),$(x).data("disabled",!1),$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(v),jqm:L.jqModal,onClose:rp_ge[_.p.id].onClose,removemodal:rp_ge[_.p.id].removemodal,formprop:!rp_ge[_.p.id].recreateForm,form:rp_ge[_.p.id].form}),!1})}$(_).triggerHandler("jqGridAddEditInitializeForm",[$(x),m]),$.isFunction(rp_ge[_.p.id].onInitializeForm)&&rp_ge[_.p.id].onInitializeForm.call(_,$(x),m),"_empty"!==H&&rp_ge[_.p.id].viewPagerButtons?$("#pData,#nData",i).show():$("#pData,#nData",i).hide(),$(_).triggerHandler("jqGridAddEditBeforeShowForm",[$(x),m]),$.isFunction(rp_ge[_.p.id].beforeShowForm)&&rp_ge[_.p.id].beforeShowForm.call(_,$(x),m),U(),$("#"+$.jgrid.jqID(j.themodal)).data("onClose",rp_ge[_.p.id].onClose),$.jgrid.viewModal("#"+$.jgrid.jqID(j.themodal),{gbox:"#gbox_"+$.jgrid.jqID(v),jqm:L.jqModal,overlay:L.overlay,modal:L.modal,overlayClass:L.overlayClass,focusField:L.focusField,onHide:function(e){var t=$("#editmod"+v)[0].style.height,r=$("#editmod"+v)[0].style.width;-1<t.indexOf("px")&&(t=parseFloat(t)),-1<r.indexOf("px")&&(r=parseFloat(r)),$(_).data("formProp",{top:parseFloat($(e.w).css("top")),left:parseFloat($(e.w).css("left")),width:r,height:t,dataheight:$(x).height(),datawidth:$(x).width()}),e.w.remove(),e.o&&e.o.remove()}}),a||$("."+$.jgrid.jqID(L.overlayClass)).click(function(){return E()&&$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(v),jqm:L.jqModal,onClose:rp_ge[_.p.id].onClose,removemodal:rp_ge[_.p.id].removemodal,formprop:!rp_ge[_.p.id].recreateForm,form:rp_ge[_.p.id].form}),!1}),$(".fm-button","#"+$.jgrid.jqID(j.themodal)).hover(function(){$(this).addClass(W.hover)},function(){$(this).removeClass(W.hover)}),$("#sData",i).click(function(){return f={},$(".FormError",x).hide(),O(),"_empty"===f[_.p.id+"_id"]?A():!0===L.checkOnSubmit&&P(f,_.p.savedData)?($(x).data("disabled",!0),$(".confirm","#"+$.jgrid.jqID(j.themodal)).show()):A(),!1}),$("#cData",i).click(function(){return E()&&$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(v),jqm:L.jqModal,onClose:rp_ge[_.p.id].onClose,removemodal:rp_ge[_.p.id].removemodal,formprop:!rp_ge[_.p.id].recreateForm,form:rp_ge[_.p.id].form}),!1}),$(i).find("[data-index]").each(function(){var t=parseInt($(this).attr("data-index"),10);0<=t&&L.buttons[t].hasOwnProperty("click")&&$(this).on("click",function(e){L.buttons[t].click.call(_,$(x)[0],rp_ge[_.p.id],e)})}),$("#nData",i).click(function(){if(!E())return!1;$(".FormError",x).hide();var e=z();if(e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]){var t;if($(_).triggerHandler("jqGridAddEditClickPgButtons",["next",$(x),e[1][e[0]]]),$.isFunction(L.onclickPgButtons)&&void 0!==(t=L.onclickPgButtons.call(_,"next",$(x),e[1][e[0]]))&&!1===t)return!1;if($("#"+$.jgrid.jqID(e[1][e[0]+1])).hasClass(W.disabled))return!1;T(e[1][e[0]+1],_,x),_.p.multiselect&&rp_ge[_.p.id].editselected||$(_).jqGrid("setSelection",e[1][e[0]+1]),$(_).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",$(x),e[1][e[0]]]),$.isFunction(L.afterclickPgButtons)&&L.afterclickPgButtons.call(_,"next",$(x),e[1][e[0]+1]),U(),B(e[0]+1,e)}return!1}),$("#pData",i).click(function(){if(!E())return!1;$(".FormError",x).hide();var e=z();if(-1!==e[0]&&e[1][e[0]-1]){var t;if($(_).triggerHandler("jqGridAddEditClickPgButtons",["prev",$(x),e[1][e[0]]]),$.isFunction(L.onclickPgButtons)&&void 0!==(t=L.onclickPgButtons.call(_,"prev",$(x),e[1][e[0]]))&&!1===t)return!1;if($("#"+$.jgrid.jqID(e[1][e[0]-1])).hasClass(W.disabled))return!1;T(e[1][e[0]-1],_,x),_.p.multiselect&&rp_ge[_.p.id].editselected||$(_).jqGrid("setSelection",e[1][e[0]-1]),$(_).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",$(x),e[1][e[0]]]),$.isFunction(L.afterclickPgButtons)&&L.afterclickPgButtons.call(_,"prev",$(x),e[1][e[0]-1]),U(),B(e[0]-1,e)}return!1}),$(_).triggerHandler("jqGridAddEditAfterShowForm",[$(x),m]),$.isFunction(rp_ge[_.p.id].afterShowForm)&&rp_ge[_.p.id].afterShowForm.call(_,$(x),m);var N=z();B(N[0],N)}}function O(){var e,o={};for(e in $(b).find(".FormElement").each(function(){var e=$(".customelement",this);if(e.length){var t=e[0],r=$(t).attr("name");$.each(_.p.colModel,function(){if(this.name===r&&this.editoptions&&$.isFunction(this.editoptions.custom_value)){try{if(f[r]=this.editoptions.custom_value.call(_,$("#"+$.jgrid.jqID(r),b),"get"),void 0===f[r])throw"e1"}catch(e){"e1"===e?$.jgrid.info_dialog(y.errcap,"function 'custom_value' "+rp_ge[$(this)[0]].p.msg.novalue,rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI}):$.jgrid.info_dialog(y.errcap,e.message,rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI})}return!0}})}else{switch($(this).get(0).type){case"checkbox":if($(this).is(":checked"))f[this.name]=$(this).val();else{var i=$(this).attr("offval");f[this.name]=i}break;case"select-one":f[this.name]=$(this).val();break;case"select-multiple":f[this.name]=$(this).val(),f[this.name]=f[this.name]?f[this.name].join(","):"";break;case"radio":if(o.hasOwnProperty(this.name))return!0;o[this.name]=void 0===$(this).attr("offval")?"off":$(this).attr("offval");break;default:f[this.name]=$(this).val()}_.p.autoencode&&(f[this.name]=$.jgrid.htmlEncode(f[this.name]))}}),o)if(o.hasOwnProperty(e)){var t=$('input[name="'+e+'"]:checked',b).val();f[e]=void 0!==t?t:o[e],_.p.autoencode&&(f[e]=$.jgrid.htmlEncode(f[e]))}return!0}function T(r,i,o){var a,n,e,t,l,s,d=0;(rp_ge[_.p.id].checkOnSubmit||rp_ge[_.p.id].checkOnUpdate)&&(_.p.savedData={},_.p.savedData[i.p.id+"_id"]=r);var p=i.p.colModel;if("_empty"===r)return $(p).each(function(){a=this.name,t=$.extend({},this.editoptions||{}),(e=$("#"+$.jgrid.jqID(a),o))&&e.length&&null!==e[0]&&(l="","custom"===this.edittype&&$.isFunction(t.custom_value)?t.custom_value.call(_,$("#"+a,o),"set",l):t.defaultValue?(l=$.isFunction(t.defaultValue)?t.defaultValue.call(_):t.defaultValue,"checkbox"===e[0].type?(s=l.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==s?(e[0].checked=!0,e[0].defaultChecked=!0,e[0].value=l):(e[0].checked=!1,e[0].defaultChecked=!1):e.val(l)):"checkbox"===e[0].type?(e[0].checked=!1,e[0].defaultChecked=!1,l=$(e).attr("offval")):e[0].type&&"select"===e[0].type.substr(0,6)?e[0].selectedIndex=0:e.val(l),(!0===rp_ge[_.p.id].checkOnSubmit||rp_ge[_.p.id].checkOnUpdate)&&(_.p.savedData[a]=l))}),void $("#id_g",o).val(r);var c=$(i).jqGrid("getInd",r,!0);c&&($('td[role="gridcell"]',c).each(function(t){if("cb"!==(a=p[t].name)&&"subgrid"!==a&&"rn"!==a&&!0===p[t].editable){if(a===i.p.ExpandColumn&&!0===i.p.treeGrid)n=$(this).text();else try{n=$.unformat.call(i,$(this),{rowId:r,colModel:p[t]},t)}catch(e){n="textarea"===p[t].edittype?$(this).text():$(this).html()}switch(_.p.autoencode&&(n=$.jgrid.htmlDecode(n)),(!0===rp_ge[_.p.id].checkOnSubmit||rp_ge[_.p.id].checkOnUpdate)&&(_.p.savedData[a]=n),a=$.jgrid.jqID(a),p[t].edittype){case"select":var e=n.split(",");e=$.map(e,function(e){return $.trim(e)}),$("#"+a+" option",o).each(function(){p[t].editoptions.multiple||$.trim(n)!==$.trim($(this).text())&&e[0]!==$.trim($(this).text())&&e[0]!==$.trim($(this).val())?p[t].editoptions.multiple&&(-1<$.inArray($.trim($(this).text()),e)||-1<$.inArray($.trim($(this).val()),e))?this.selected=!0:this.selected=!1:this.selected=!0}),(!0===rp_ge[_.p.id].checkOnSubmit||rp_ge[_.p.id].checkOnUpdate)&&(n=$("#"+a,o).val(),p[t].editoptions.multiple&&(n=n.join(",")),_.p.savedData[a]=n);break;case"checkbox":if(n=String(n),p[t].editoptions&&p[t].editoptions.value)p[t].editoptions.value.split(":")[0]===n?$("#"+a,o)[_.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0}):$("#"+a,o)[_.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1});else(n=n.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==n?($("#"+a,o)[_.p.useProp?"prop":"attr"]("checked",!0),$("#"+a,o)[_.p.useProp?"prop":"attr"]("defaultChecked",!0)):($("#"+a,o)[_.p.useProp?"prop":"attr"]("checked",!1),$("#"+a,o)[_.p.useProp?"prop":"attr"]("defaultChecked",!1));(!0===rp_ge[_.p.id].checkOnSubmit||rp_ge[_.p.id].checkOnUpdate)&&(n=$("#"+a,o).is(":checked")?$("#"+a,o).val():$("#"+a,o).attr("offval"),_.p.savedData[a]=n);break;case"custom":try{if(!p[t].editoptions||!$.isFunction(p[t].editoptions.custom_value))throw"e1";p[t].editoptions.custom_value.call(_,$("#"+a,o),"set",n)}catch(e){"e1"===e?$.jgrid.info_dialog(y.errcap,"function 'custom_value' "+rp_ge[$(this)[0]].p.msg.nodefined,$.rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI}):$.jgrid.info_dialog(y.errcap,e.message,$.rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI})}break;default:("&nbsp;"===n||"&#160;"===n||1===n.length&&160===n.charCodeAt(0))&&(n=""),$("#"+a,o).val(n)}d++}}),0<d&&($("#id_g",b).val(r),(!0===rp_ge[_.p.id].checkOnSubmit||rp_ge[_.p.id].checkOnUpdate)&&(_.p.savedData[i.p.id+"_id"]=r)))}function A(){var i,o,a,e,n,t,r,l=[!0,"",""],s={},d=_.p.prmNames,p=$(_).triggerHandler("jqGridAddEditBeforeCheckValues",[f,$(x),m]);if(p&&"object"==typeof p&&(f=p),$.isFunction(rp_ge[_.p.id].beforeCheckValues)&&(p=rp_ge[_.p.id].beforeCheckValues.call(_,f,$(x),m))&&"object"==typeof p&&(f=p),rp_ge[_.p.id].html5Check&&!$.jgrid.validateForm(I[0]))return!1;for(e in f)if(f.hasOwnProperty(e)&&!1===(l=$.jgrid.checkValues.call(_,f[e],e))[0])break;if($.each(_.p.colModel,function(e,t){t.editoptions&&!0===t.editoptions.NullIfEmpty&&f.hasOwnProperty(t.name)&&""===f[t.name]&&(f[t.name]="null")}),l[0]&&(void 0===(s=$(_).triggerHandler("jqGridAddEditClickSubmit",[rp_ge[_.p.id],f,m]))&&$.isFunction(rp_ge[_.p.id].onclickSubmit)&&(s=rp_ge[_.p.id].onclickSubmit.call(_,rp_ge[_.p.id],f,m)||{}),void 0===(l=$(_).triggerHandler("jqGridAddEditBeforeSubmit",[f,$(x),m]))&&(l=[!0,"",""]),l[0]&&$.isFunction(rp_ge[_.p.id].beforeSubmit)&&(l=rp_ge[_.p.id].beforeSubmit.call(_,f,$(x),m))),l[0]&&!rp_ge[_.p.id].processing){if(rp_ge[_.p.id].processing=!0,$("#sData",b+"_2").addClass(W.active),r=rp_ge[_.p.id].url||$(_).jqGrid("getGridParam","editurl"),a=d.oper,o="clientArray"===r?_.p.keyName:d.id,f[a]="_empty"===$.trim(f[_.p.id+"_id"])?d.addoper:d.editoper,f[a]!==d.addoper?f[o]=f[_.p.id+"_id"]:void 0===f[o]&&(f[o]=f[_.p.id+"_id"]),delete f[_.p.id+"_id"],f=$.extend(f,rp_ge[_.p.id].editData,s),!0===_.p.treeGrid){if(f[a]===d.addoper){n=$(_).jqGrid("getGridParam","selrow");var c="adjacency"===_.p.treeGridModel?_.p.treeReader.parent_id_field:"parent_id";f[c]=n}for(t in _.p.treeReader)if(_.p.treeReader.hasOwnProperty(t)){var u=_.p.treeReader[t];if(f.hasOwnProperty(u)){if(f[a]===d.addoper&&"parent_id_field"===t)continue;delete f[u]}}}f[o]=$.jgrid.stripPref(_.p.idPrefix,f[o]);var g=$.extend({url:r,type:rp_ge[_.p.id].mtype,data:$.isFunction(rp_ge[_.p.id].serializeEditData)?rp_ge[_.p.id].serializeEditData.call(_,f):f,complete:function(e,t){var r;if($("#sData",b+"_2").removeClass(W.active),f[o]=_.p.idPrefix+f[o],300<=e.status&&304!==e.status?(l[0]=!1,l[1]=$(_).triggerHandler("jqGridAddEditErrorTextFormat",[e,m]),$.isFunction(rp_ge[_.p.id].errorTextFormat)?l[1]=rp_ge[_.p.id].errorTextFormat.call(_,e,m):l[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status):(void 0===(l=$(_).triggerHandler("jqGridAddEditAfterSubmit",[e,f,m]))&&(l=[!0,"",""]),l[0]&&$.isFunction(rp_ge[_.p.id].afterSubmit)&&(l=rp_ge[_.p.id].afterSubmit.call(_,e,f,m))),!1===l[0])$(".FormError",x).html(l[1]),$(".FormError",x).show();else if(_.p.autoencode&&$.each(f,function(e,t){f[e]=$.jgrid.htmlDecode(t)}),f[a]===d.addoper?(l[2]||(l[2]=$.jgrid.randId()),null==f[o]||f[o]===_.p.idPrefix+"_empty"||""===f[o]?f[o]=l[2]:l[2]=f[o],rp_ge[_.p.id].reloadAfterSubmit?$(_).trigger("reloadGrid"):!0===_.p.treeGrid?$(_).jqGrid("addChildNode",l[2],n,f):$(_).jqGrid("addRowData",l[2],f,L.addedrow),rp_ge[_.p.id].closeAfterAdd?(!0!==_.p.treeGrid&&$(_).jqGrid("setSelection",l[2]),$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(v),jqm:L.jqModal,onClose:rp_ge[_.p.id].onClose,removemodal:rp_ge[_.p.id].removemodal,formprop:!rp_ge[_.p.id].recreateForm,form:rp_ge[_.p.id].form})):rp_ge[_.p.id].clearAfterAdd&&T("_empty",_,x)):(rp_ge[_.p.id].reloadAfterSubmit?($(_).trigger("reloadGrid"),rp_ge[_.p.id].closeAfterEdit||setTimeout(function(){$(_).jqGrid("setSelection",f[o])},1e3)):!0===_.p.treeGrid?$(_).jqGrid("setTreeRow",f[o],f):$(_).jqGrid("setRowData",f[o],f),rp_ge[_.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(v),jqm:L.jqModal,onClose:rp_ge[_.p.id].onClose,removemodal:rp_ge[_.p.id].removemodal,formprop:!rp_ge[_.p.id].recreateForm,form:rp_ge[_.p.id].form})),($.isFunction(rp_ge[_.p.id].afterComplete)||$._data($(_)[0],"events").hasOwnProperty("jqGridAddEditAfterComplete"))&&(i=e,setTimeout(function(){$(_).triggerHandler("jqGridAddEditAfterComplete",[i,f,$(x),m]);try{rp_ge[_.p.id].afterComplete.call(_,i,f,$(x),m)}catch(e){}i=null},500)),(rp_ge[_.p.id].checkOnSubmit||rp_ge[_.p.id].checkOnUpdate)&&($(x).data("disabled",!1),"_empty"!==_.p.savedData[_.p.id+"_id"]))for(r in _.p.savedData)_.p.savedData.hasOwnProperty(r)&&f[r]&&(_.p.savedData[r]=f[r]);rp_ge[_.p.id].processing=!1;try{$(":input:visible",x)[0].focus()}catch(e){}}},$.jgrid.ajaxOptions,rp_ge[_.p.id].ajaxEditOptions);if(g.url||rp_ge[_.p.id].useDataProxy||($.isFunction(_.p.dataProxy)?rp_ge[_.p.id].useDataProxy=!0:(l[0]=!1,l[1]+=" "+y.nourl)),l[0])if(rp_ge[_.p.id].useDataProxy){var h=_.p.dataProxy.call(_,g,"set_"+_.p.id);void 0===h&&(h=[!0,""]),!1===h[0]?(l[0]=!1,l[1]=h[1]||"Error deleting the selected row!"):(g.data.oper===d.addoper&&rp_ge[_.p.id].closeAfterAdd&&$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(v),jqm:L.jqModal,onClose:rp_ge[_.p.id].onClose,removemodal:rp_ge[_.p.id].removemodal,formprop:!rp_ge[_.p.id].recreateForm,form:rp_ge[_.p.id].form}),g.data.oper===d.editoper&&rp_ge[_.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(v),jqm:L.jqModal,onClose:rp_ge[_.p.id].onClose,removemodal:rp_ge[_.p.id].removemodal,formprop:!rp_ge[_.p.id].recreateForm,form:rp_ge[_.p.id].form}))}else"clientArray"===g.url?(rp_ge[_.p.id].reloadAfterSubmit=!1,f=g.data,g.complete({status:200,statusText:""},"")):$.ajax(g)}!1===l[0]&&($(".FormError",x).html(l[1]),$(".FormError",x).show())}function P(e,t){var r,i=!1;if(!(i=!($.isPlainObject(e)&&$.isPlainObject(t)&&Object.getOwnPropertyNames(e).length===Object.getOwnPropertyNames(t).length)))for(r in t)if(t.hasOwnProperty(r)){if(!e.hasOwnProperty(r)){i=!0;break}if(e[r]!==t[r]){i=!0;break}}return i}function E(){var e=!0;return $(".FormError",x).hide(),rp_ge[_.p.id].checkOnUpdate&&(f={},O(),P(f,_.p.savedData)&&($(x).data("disabled",!0),$(".confirm","#"+j.themodal).show(),e=!1)),e}function B(e,t){var r=t[1].length-1;0===e?$("#pData",i).addClass(W.disabled):void 0!==t[1][e-1]&&$("#"+$.jgrid.jqID(t[1][e-1])).hasClass(W.disabled)?$("#pData",i).addClass(W.disabled):$("#pData",i).removeClass(W.disabled),e===r?$("#nData",i).addClass(W.disabled):void 0!==t[1][e+1]&&$("#"+$.jgrid.jqID(t[1][e+1])).hasClass(W.disabled)?$("#nData",i).addClass(W.disabled):$("#nData",i).removeClass(W.disabled)}function z(){var e=$(_).jqGrid("getDataIDs"),t=$("#id_g",b).val();if(_.p.multiselect&&rp_ge[_.p.id].editselected){for(var r=[],i=0,o=e.length;i<o;i++)-1!==$.inArray(e[i],_.p.selarrrow)&&r.push(e[i]);return[$.inArray(t,r),r]}return[$.inArray(t,e),e]}function U(){if(rp_ge[_.p.id].checkOnSubmit||rp_ge[_.p.id].checkOnUpdate){var r=[],i={};for(var e in r=$.map(_.p.savedData,function(e,t){return t}),$(".FormElement",I).each(function(){if(-1===r.indexOf(this.name)){var e=$(this).val(),t=$(this).get(0).type;if("checkbox"===t)$(this).is(":checked")||(e=$(this).attr("offval"));else if("select-multiple"===t)e=e.join(",");else if("radio"===t){if(i.hasOwnProperty(this.name))return!0;i[this.name]=void 0===$(this).attr("offval")?"off":$(this).attr("offval")}_.p.savedData[this.name]=e}}),i)if(i.hasOwnProperty(e)){var t=$('input[name="'+e+'"]:checked',I).val();_.p.savedData[e]=void 0!==t?t:i[e]}}}})},viewGridRow:function(F,G){var e=$.jgrid.getRegional(this[0],"view"),t=this[0].p.styleUI,k=$.jgrid.styleUI[t].formedit,S=$.jgrid.styleUI[t].common;return G=$.extend(!0,{top:0,left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"auto",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view",buttons:[]},e,G||{}),rp_ge[$(this)[0].p.id]=G,this.each(function(){var r=this;if(r.grid&&F){var e=r.p.id,t="ViewGrid_"+$.jgrid.jqID(e),l="ViewTbl_"+$.jgrid.jqID(e),i="ViewGrid_"+e,o="ViewTbl_"+e,a={themodal:"viewmod"+e,modalhead:"viewhd"+e,modalcontent:"viewcnt"+e,scrollelm:t},n=!0,s=1,d=0;rp_ge[r.p.id].styleUI=r.p.styleUI||"jQueryUI",G.recreateForm||$(r).data("viewProp")&&$.extend(rp_ge[$(this)[0].p.id],$(r).data("viewProp"));var p=isNaN(rp_ge[$(this)[0].p.id].dataheight)?rp_ge[$(this)[0].p.id].dataheight:rp_ge[$(this)[0].p.id].dataheight+"px",c=isNaN(rp_ge[$(this)[0].p.id].datawidth)?rp_ge[$(this)[0].p.id].datawidth:rp_ge[$(this)[0].p.id].datawidth+"px",u=$("<form name='FormPost' id='"+i+"' class='FormGrid' style='width:"+c+";height:"+p+";'></form>"),g=$("<table id='"+o+"' class='EditTable ViewTable'><tbody></tbody></table>");if($(r.p.colModel).each(function(){var e=this.formoptions;s=Math.max(s,e&&e.colpos||0),d=Math.max(d,e&&e.rowpos||0)}),$(u).append(g),void 0===(n=$(r).triggerHandler("jqGridViewRowBeforeInitData",[u]))&&(n=!0),n&&$.isFunction(rp_ge[r.p.id].beforeInitData)&&(n=rp_ge[r.p.id].beforeInitData.call(r,u)),!1!==n){!function(e,a,n,l){var s,d,p,c,u,g,t,h,f,m,v=0,b=[],r="<td class='CaptionTD form-view-label "+S.content+"' width='"+G.labelswidth+"'></td><td class='DataTD form-view-data ui-helper-reset "+S.content+"'></td>",j="",i="<td class='CaptionTD form-view-label "+S.content+"'></td><td class='DataTD form-view-data "+S.content+"'></td>",o=["integer","number","currency"],y=0,w=0;for(t=1;t<=l;t++)j+=1===t?r:i;if($(a.p.colModel).each(function(){(d=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden)||"right"!==this.align||(this.formatter&&-1!==$.inArray(this.formatter,o)?y=Math.max(y,parseInt(this.width,10)):w=Math.max(w,parseInt(this.width,10)))}),h=0!==y?y:0!==w?w:0,g=$(a).jqGrid("getInd",e),$(a.p.colModel).each(function(e){if(s=this.name,f=!1,d=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,u=d?"style='display:none'":"",m="boolean"!=typeof this.viewable||this.viewable,"cb"!==s&&"subgrid"!==s&&"rn"!==s&&m){c=!1===g?"":s===a.p.ExpandColumn&&!0===a.p.treeGrid?$("td:eq("+e+")",a.rows[g]).text():$("td:eq("+e+")",a.rows[g]).html(),f="right"===this.align&&0!==h;var t=$.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),r=parseInt(t.rowpos,10)||v+1,i=parseInt(2*(parseInt(t.colpos,10)||1),10);if(t.rowabove){var o=$("<tr><td class='contentinfo' colspan='"+2*l+"'>"+t.rowcontent+"</td></tr>");$(n).append(o),o[0].rp=r}0===(p=$(n).find("tr[rowpos="+r+"]")).length&&(p=$("<tr "+u+" rowpos='"+r+"'></tr>").addClass("FormData").attr("id","trv_"+s),$(p).append(j),$(n).append(p),p[0].rp=r),$("td:eq("+(i-2)+")",p[0]).html("<b>"+(void 0===t.label?a.p.colNames[e]:t.label)+"</b>"),$("td:eq("+(i-1)+")",p[0]).append("<span>"+c+"</span>").attr("id","v_"+s),f&&$("td:eq("+(i-1)+") span",p[0]).css({"text-align":"right",width:h+"px"}),b[v]=e,v++}}),0<v){var _=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*l-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+e+"'/></td></tr>");_[0].rp=v+99,$(n).append(_)}}(F,r,g,s);var h="rtl"===r.p.direction,f=h?"pData":"nData",m="<a id='"+(h?"nData":"pData")+"' class='fm-button "+S.button+"'><span class='"+S.icon_base+" "+k.icon_prev+"'></span></a>",v="<a id='"+f+"' class='fm-button "+S.button+"'><span class='"+S.icon_base+" "+k.icon_next+"'></span></a>",b="<a id='cData' class='fm-button "+S.button+"'>"+G.bClose+"</a>",j=$.isArray(rp_ge[r.p.id].buttons)?$.jgrid.buildButtons(rp_ge[r.p.id].buttons,b,S):b;if(0<d){var y=[];$.each($(g)[0].rows,function(e,t){y[e]=t}),y.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),$.each(y,function(e,t){$("tbody",g).append(t)})}G.gbox="#gbox_"+$.jgrid.jqID(e);var w=$("<div></div>").append(u).append("<table border='0' class='EditTable' id='"+l+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+G.labelswidth+"'>"+(h?v+m:m+v)+"</td><td class='EditButton'>"+j+"</td></tr></tbody></table>"),_=$(".ui-jqgrid").css("font-size")||"11px";$.jgrid.createModal(a,w,rp_ge[$(this)[0].p.id],"#gview_"+$.jgrid.jqID(r.p.id),$("#gview_"+$.jgrid.jqID(r.p.id))[0],null,{"font-size":_}),h&&($("#pData, #nData","#"+l+"_2").css("float","right"),$(".EditButton","#"+l+"_2").css("text-align","left")),G.viewPagerButtons||$("#pData, #nData","#"+l+"_2").hide(),w=null,$("#"+a.themodal).keydown(function(e){if(27===e.which)return rp_ge[r.p.id].closeOnEscape&&$.jgrid.hideModal("#"+$.jgrid.jqID(a.themodal),{gb:G.gbox,jqm:G.jqModal,onClose:G.onClose,removemodal:rp_ge[r.p.id].removemodal,formprop:!rp_ge[r.p.id].recreateForm,form:rp_ge[r.p.id].form}),!1;if(!0===G.navkeys[0]){if(e.which===G.navkeys[1])return $("#pData","#"+l+"_2").trigger("click"),!1;if(e.which===G.navkeys[2])return $("#nData","#"+l+"_2").trigger("click"),!1}}),G.closeicon=$.extend([!0,"left",k.icon_close],G.closeicon),!0===G.closeicon[0]&&$("#cData","#"+l+"_2").addClass("right"===G.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+S.icon_base+" "+G.closeicon[2]+"'></span>"),$(r).triggerHandler("jqGridViewRowBeforeShowForm",[$("#"+t)]),$.isFunction(G.beforeShowForm)&&G.beforeShowForm.call(r,$("#"+t)),$.jgrid.viewModal("#"+$.jgrid.jqID(a.themodal),{gbox:"#gbox_"+$.jgrid.jqID(e),jqm:G.jqModal,overlay:G.overlay,modal:G.modal,onHide:function(e){$(r).data("viewProp",{top:parseFloat($(e.w).css("top")),left:parseFloat($(e.w).css("left")),width:$(e.w).width(),height:$(e.w).height(),dataheight:$("#"+t).height(),datawidth:$("#"+t).width()}),e.w.remove(),e.o&&e.o.remove()}}),$(".fm-button:not(."+S.disabled+")","#"+l+"_2").hover(function(){$(this).addClass(S.hover)},function(){$(this).removeClass(S.hover)}),q(),$("#cData","#"+l+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(a.themodal),{gb:"#gbox_"+$.jgrid.jqID(e),jqm:G.jqModal,onClose:G.onClose,removemodal:rp_ge[r.p.id].removemodal,formprop:!rp_ge[r.p.id].recreateForm,form:rp_ge[r.p.id].form}),!1}),$("#"+l+"_2").find("[data-index]").each(function(){var t=parseInt($(this).attr("data-index"),10);0<=t&&G.buttons[t].hasOwnProperty("click")&&$(this).on("click",function(e){G.buttons[t].click.call(r,$("#"+i)[0],rp_ge[r.p.id],e)})}),$("#nData","#"+l+"_2").click(function(){$("#FormError","#"+l).hide();var e=C();return e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]&&($(r).triggerHandler("jqGridViewRowClickPgButtons",["next",$("#"+t),e[1][e[0]]]),$.isFunction(G.onclickPgButtons)&&G.onclickPgButtons.call(r,"next",$("#"+t),e[1][e[0]]),I(e[1][e[0]+1],r),$(r).jqGrid("setSelection",e[1][e[0]+1]),$(r).triggerHandler("jqGridViewRowAfterClickPgButtons",["next",$("#"+t),e[1][e[0]+1]]),$.isFunction(G.afterclickPgButtons)&&G.afterclickPgButtons.call(r,"next",$("#"+t),e[1][e[0]+1]),D(e[0]+1,e)),q(),!1}),$("#pData","#"+l+"_2").click(function(){$("#FormError","#"+l).hide();var e=C();return-1!==e[0]&&e[1][e[0]-1]&&($(r).triggerHandler("jqGridViewRowClickPgButtons",["prev",$("#"+t),e[1][e[0]]]),$.isFunction(G.onclickPgButtons)&&G.onclickPgButtons.call(r,"prev",$("#"+t),e[1][e[0]]),I(e[1][e[0]-1],r),$(r).jqGrid("setSelection",e[1][e[0]-1]),$(r).triggerHandler("jqGridViewRowAfterClickPgButtons",["prev",$("#"+t),e[1][e[0]-1]]),$.isFunction(G.afterclickPgButtons)&&G.afterclickPgButtons.call(r,"prev",$("#"+t),e[1][e[0]-1]),D(e[0]-1,e)),q(),!1});var x=C();D(x[0],x)}}function q(){!0!==rp_ge[r.p.id].closeOnEscape&&!0!==rp_ge[r.p.id].navkeys[0]||setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(a.modalhead)).attr("tabindex","-1").focus()},0)}function I(e,t){var r,i,o,a,n=0;(a=$(t).jqGrid("getInd",e,!0))&&($("td",a).each(function(e){r=t.p.colModel[e].name,i=(!t.p.colModel[e].editrules||!0!==t.p.colModel[e].editrules.edithidden)&&!0===t.p.colModel[e].hidden,"cb"!==r&&"subgrid"!==r&&"rn"!==r&&(o=r===t.p.ExpandColumn&&!0===t.p.treeGrid?$(this).text():$(this).html(),r=$.jgrid.jqID("v_"+r),$("#"+r+" span","#"+l).html(o),i&&$("#"+r,"#"+l).parents("tr:first").hide(),n++)}),0<n&&$("#id_g","#"+l).val(e))}function D(e,t){var r=t[1].length-1;0===e?$("#pData","#"+l+"_2").addClass(S.disabled):void 0!==t[1][e-1]&&$("#"+$.jgrid.jqID(t[1][e-1])).hasClass(S.disabled)?$("#pData",l+"_2").addClass(S.disabled):$("#pData","#"+l+"_2").removeClass(S.disabled),e===r?$("#nData","#"+l+"_2").addClass(S.disabled):void 0!==t[1][e+1]&&$("#"+$.jgrid.jqID(t[1][e+1])).hasClass(S.disabled)?$("#nData",l+"_2").addClass(S.disabled):$("#nData","#"+l+"_2").removeClass(S.disabled)}function C(){var e=$(r).jqGrid("getDataIDs"),t=$("#id_g","#"+l).val();return[$.inArray(t,e),e]}})},delGridRow:function(b,j){var e=$.jgrid.getRegional(this[0],"del"),t=this[0].p.styleUI,y=$.jgrid.styleUI[t].formedit,w=$.jgrid.styleUI[t].common;return j=$.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},e,j||{}),rp_ge[$(this)[0].p.id]=j,this.each(function(){var n=this;if(n.grid&&b){var l,i,s,d,p=n.p.id,c={},e=!0,u="DelTbl_"+$.jgrid.jqID(p),r="DelTbl_"+p,g={themodal:"delmod"+p,modalhead:"delhd"+p,modalcontent:"delcnt"+p,scrollelm:u};if(rp_ge[n.p.id].styleUI=n.p.styleUI||"jQueryUI",$.isArray(b)&&(b=b.join()),void 0!==$("#"+$.jgrid.jqID(g.themodal))[0]){if(void 0===(e=$(n).triggerHandler("jqGridDelRowBeforeInitData",[$("#"+u)]))&&(e=!0),e&&$.isFunction(rp_ge[n.p.id].beforeInitData)&&(e=rp_ge[n.p.id].beforeInitData.call(n,$("#"+u))),!1===e)return;$("#DelData>td","#"+u).text(b),$("#DelError","#"+u).hide(),!0===rp_ge[n.p.id].processing&&(rp_ge[n.p.id].processing=!1,$("#dData","#"+u).removeClass(w.active)),$(n).triggerHandler("jqGridDelRowBeforeShowForm",[$("#"+u)]),$.isFunction(rp_ge[n.p.id].beforeShowForm)&&rp_ge[n.p.id].beforeShowForm.call(n,$("#"+u)),$.jgrid.viewModal("#"+$.jgrid.jqID(g.themodal),{gbox:"#gbox_"+$.jgrid.jqID(p),jqm:rp_ge[n.p.id].jqModal,overlay:rp_ge[n.p.id].overlay,modal:rp_ge[n.p.id].modal}),$(n).triggerHandler("jqGridDelRowAfterShowForm",[$("#"+u)]),$.isFunction(rp_ge[n.p.id].afterShowForm)&&rp_ge[n.p.id].afterShowForm.call(n,$("#"+u))}else{var t=isNaN(rp_ge[n.p.id].dataheight)?rp_ge[n.p.id].dataheight:rp_ge[n.p.id].dataheight+"px",o=isNaN(j.datawidth)?j.datawidth:j.datawidth+"px",a="<div id='"+r+"' class='formdata' style='width:"+o+";overflow:auto;position:relative;height:"+t+";'>";a+="<table class='DelTable'><tbody>",a+="<tr id='DelError' style='display:none'><td class='"+w.error+"'></td></tr>",a+="<tr id='DelData' style='display:none'><td >"+b+"</td></tr>",a+='<tr><td class="delmsg" style="white-space:pre;">'+rp_ge[n.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>",a+="</tbody></table></div>";var h="<a id='dData' class='fm-button "+w.button+"'>"+j.bSubmit+"</a>",f="<a id='eData' class='fm-button "+w.button+"'>"+j.bCancel+"</a>",m=$.isArray(rp_ge[n.p.id].buttons)?$.jgrid.buildButtons(rp_ge[n.p.id].buttons,h+f,w):h+f,v=$(".ui-jqgrid").css("font-size")||"11px";if(a+="<table class='EditTable ui-common-table' id='"+u+"_2'><tbody><tr><td><hr class='"+w.content+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+m+"</td></tr></tbody></table>",j.gbox="#gbox_"+$.jgrid.jqID(p),$.jgrid.createModal(g,a,rp_ge[n.p.id],"#gview_"+$.jgrid.jqID(n.p.id),$("#gview_"+$.jgrid.jqID(n.p.id))[0],null,{"font-size":v}),$(".fm-button","#"+u+"_2").hover(function(){$(this).addClass(w.hover)},function(){$(this).removeClass(w.hover)}),j.delicon=$.extend([!0,"left",y.icon_del],rp_ge[n.p.id].delicon),j.cancelicon=$.extend([!0,"left",y.icon_cancel],rp_ge[n.p.id].cancelicon),!0===j.delicon[0]&&$("#dData","#"+u+"_2").addClass("right"===j.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+w.icon_base+" "+j.delicon[2]+"'></span>"),!0===j.cancelicon[0]&&$("#eData","#"+u+"_2").addClass("right"===j.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+w.icon_base+" "+j.cancelicon[2]+"'></span>"),$("#dData","#"+u+"_2").click(function(){var e,o=[!0,""],a=$("#DelData>td","#"+u).text();if(c={},void 0===(c=$(n).triggerHandler("jqGridDelRowClickSubmit",[rp_ge[n.p.id],a]))&&$.isFunction(rp_ge[n.p.id].onclickSubmit)&&(c=rp_ge[n.p.id].onclickSubmit.call(n,rp_ge[n.p.id],a)||{}),void 0===(o=$(n).triggerHandler("jqGridDelRowBeforeSubmit",[a]))&&(o=[!0,"",""]),o[0]&&$.isFunction(rp_ge[n.p.id].beforeSubmit)&&(o=rp_ge[n.p.id].beforeSubmit.call(n,a)),o[0]&&!rp_ge[n.p.id].processing){if(rp_ge[n.p.id].processing=!0,s=n.p.prmNames,l=$.extend({},rp_ge[n.p.id].delData,c),d=s.oper,l[d]=s.deloper,i=s.id,!(a=String(a).split(",")).length)return!1;for(e in a)a.hasOwnProperty(e)&&(a[e]=$.jgrid.stripPref(n.p.idPrefix,a[e]));l[i]=a.join(),$(this).addClass(w.active);var t=$.extend({url:rp_ge[n.p.id].url||$(n).jqGrid("getGridParam","editurl"),type:rp_ge[n.p.id].mtype,data:$.isFunction(rp_ge[n.p.id].serializeDelData)?rp_ge[n.p.id].serializeDelData.call(n,l):l,complete:function(e,t){var r;if($("#dData","#"+u+"_2").removeClass(w.active),300<=e.status&&304!==e.status?(o[0]=!1,o[1]=$(n).triggerHandler("jqGridDelRowErrorTextFormat",[e]),$.isFunction(rp_ge[n.p.id].errorTextFormat)&&(o[1]=rp_ge[n.p.id].errorTextFormat.call(n,e)),void 0===o[1]&&(o[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status)):(void 0===(o=$(n).triggerHandler("jqGridDelRowAfterSubmit",[e,l]))&&(o=[!0,"",""]),o[0]&&$.isFunction(rp_ge[n.p.id].afterSubmit)&&(o=rp_ge[n.p.id].afterSubmit.call(n,e,l))),!1===o[0])$("#DelError>td","#"+u).html(o[1]),$("#DelError","#"+u).show();else{if(rp_ge[n.p.id].reloadAfterSubmit&&"local"!==n.p.datatype)$(n).trigger("reloadGrid");else{if(!0===n.p.treeGrid)try{$(n).jqGrid("delTreeNode",n.p.idPrefix+a[0])}catch(e){}else for(r=0;r<a.length;r++)$(n).jqGrid("delRowData",n.p.idPrefix+a[r]);n.p.selrow=null,n.p.selarrrow=[]}if($.isFunction(rp_ge[n.p.id].afterComplete)||$._data($(n)[0],"events").hasOwnProperty("jqGridDelRowAfterComplete")){var i=e;setTimeout(function(){$(n).triggerHandler("jqGridDelRowAfterComplete",[i,l]);try{rp_ge[n.p.id].afterComplete.call(n,i,l)}catch(e){}},500)}}rp_ge[n.p.id].processing=!1,o[0]&&$.jgrid.hideModal("#"+$.jgrid.jqID(g.themodal),{gb:"#gbox_"+$.jgrid.jqID(p),jqm:j.jqModal,onClose:rp_ge[n.p.id].onClose})}},$.jgrid.ajaxOptions,rp_ge[n.p.id].ajaxDelOptions);if(t.url||rp_ge[n.p.id].useDataProxy||($.isFunction(n.p.dataProxy)?rp_ge[n.p.id].useDataProxy=!0:(o[0]=!1,o[1]+=" "+$.jgrid.getRegional(n,"errors.nourl"))),o[0])if(rp_ge[n.p.id].useDataProxy){var r=n.p.dataProxy.call(n,t,"del_"+n.p.id);void 0===r&&(r=[!0,""]),!1===r[0]?(o[0]=!1,o[1]=r[1]||"Error deleting the selected row!"):$.jgrid.hideModal("#"+$.jgrid.jqID(g.themodal),{gb:"#gbox_"+$.jgrid.jqID(p),jqm:j.jqModal,onClose:rp_ge[n.p.id].onClose})}else"clientArray"===t.url?(l=t.data,t.complete({status:200,statusText:""},"")):$.ajax(t)}return!1===o[0]&&($("#DelError>td","#"+u).html(o[1]),$("#DelError","#"+u).show()),!1}),$("#eData","#"+u+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(g.themodal),{gb:"#gbox_"+$.jgrid.jqID(p),jqm:rp_ge[n.p.id].jqModal,onClose:rp_ge[n.p.id].onClose}),!1}),$("#"+u+"_2").find("[data-index]").each(function(){var t=parseInt($(this).attr("data-index"),10);0<=t&&j.buttons[t].hasOwnProperty("click")&&$(this).on("click",function(e){j.buttons[t].click.call(n,$("#"+r)[0],rp_ge[n.p.id],e)})}),void 0===(e=$(n).triggerHandler("jqGridDelRowBeforeInitData",[$("#"+u)]))&&(e=!0),e&&$.isFunction(rp_ge[n.p.id].beforeInitData)&&(e=rp_ge[n.p.id].beforeInitData.call(n,$("#"+u))),!1===e)return;$(n).triggerHandler("jqGridDelRowBeforeShowForm",[$("#"+u)]),$.isFunction(rp_ge[n.p.id].beforeShowForm)&&rp_ge[n.p.id].beforeShowForm.call(n,$("#"+u)),$.jgrid.viewModal("#"+$.jgrid.jqID(g.themodal),{gbox:"#gbox_"+$.jgrid.jqID(p),jqm:rp_ge[n.p.id].jqModal,overlay:rp_ge[n.p.id].overlay,modal:rp_ge[n.p.id].modal}),$(n).triggerHandler("jqGridDelRowAfterShowForm",[$("#"+u)]),$.isFunction(rp_ge[n.p.id].afterShowForm)&&rp_ge[n.p.id].afterShowForm.call(n,$("#"+u))}!0===rp_ge[n.p.id].closeOnEscape&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(g.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(f,m,v,b,j,y,w){var _=$.jgrid.getRegional(this[0],"nav"),x=this[0].p.styleUI,e=$.jgrid.styleUI[x].navigator,q=$.jgrid.styleUI[x].common;return m=$.extend({edit:!0,editicon:e.icon_edit_nav,add:!0,addicon:e.icon_add_nav,del:!0,delicon:e.icon_del_nav,search:!0,searchicon:e.icon_search_nav,refresh:!0,refreshicon:e.icon_refresh_nav,refreshstate:"firstpage",view:!1,viewicon:e.icon_view_nav,position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:!1,navButtonText:""},_,m||{}),this.each(function(){if(!this.p.navGrid){var e,t,r,i={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},o=this;if(o.grid&&"string"==typeof f){if($(o).data("navGrid")||$(o).data("navGrid",m),r=$(o).data("navGrid"),o.p.force_regional&&(r=$.extend(r,_)),void 0===$("#"+i.themodal)[0]){r.alerttop||r.alertleft||(void 0!==window.innerWidth?(r.alertleft=window.innerWidth,r.alerttop=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(r.alertleft=document.documentElement.clientWidth,r.alerttop=document.documentElement.clientHeight):(r.alertleft=1024,r.alerttop=768),r.alertleft=r.alertleft/2-parseInt(r.alertwidth,10)/2,r.alerttop=r.alerttop/2-25);var a=$(".ui-jqgrid").css("font-size")||"11px";$.jgrid.createModal(i,"<div>"+r.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+$.jgrid.jqID(o.p.id),jqModal:!0,drag:!0,resize:!0,caption:r.alertcap,top:r.alerttop,left:r.alertleft,width:r.alertwidth,height:r.alertheight,closeOnEscape:r.closeOnEscape,zIndex:r.alertzIndex,styleUI:o.p.styleUI},"#gview_"+$.jgrid.jqID(o.p.id),$("#gbox_"+$.jgrid.jqID(o.p.id))[0],!0,{"font-size":a})}var n,l=1,s=function(){$(this).hasClass(q.disabled)||$(this).addClass(q.hover)},d=function(){$(this).removeClass(q.hover)};for(r.cloneToTop&&o.p.toppager&&(l=2),n=0;n<l;n++){var p,c,u,g=$("<table class='ui-pg-table navtable ui-common-table'><tbody><tr></tr></tbody></table>"),h="<td class='ui-pg-button "+q.disabled+"' style='width:4px;'><span class='ui-separator'></span></td>";0===n?(c=f,u=o.p.id,c===o.p.toppager&&(u+="_top",l=1)):(c=o.p.toppager,u=o.p.id+"_top"),"rtl"===o.p.direction&&$(g).attr("dir","rtl").css("float","right"),b=b||{},r.add&&(p=$("<td class='ui-pg-button "+q.cornerall+"'></td>"),$(p).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+r.addicon+"'></span>"+r.addtext+"</div>"),$("tr",g).append(p),$(p,g).attr({title:r.addtitle||"",id:b.id||"add_"+u}).click(function(){return $(this).hasClass(q.disabled)||($.isFunction(r.addfunc)?r.addfunc.call(o):$(o).jqGrid("editGridRow","new",b)),!1}).hover(s,d),p=null),v=v||{},r.edit&&(p=$("<td class='ui-pg-button "+q.cornerall+"'></td>"),$(p).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+r.editicon+"'></span>"+r.edittext+"</div>"),$("tr",g).append(p),$(p,g).attr({title:r.edittitle||"",id:v.id||"edit_"+u}).click(function(){if(!$(this).hasClass(q.disabled)){var e=o.p.selrow;e?$.isFunction(r.editfunc)?r.editfunc.call(o,e):$(o).jqGrid("editGridRow",e,v):($.jgrid.viewModal("#"+i.themodal,{gbox:"#gbox_"+$.jgrid.jqID(o.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(s,d),p=null),w=w||{},r.view&&(p=$("<td class='ui-pg-button "+q.cornerall+"'></td>"),$(p).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+r.viewicon+"'></span>"+r.viewtext+"</div>"),$("tr",g).append(p),$(p,g).attr({title:r.viewtitle||"",id:w.id||"view_"+u}).click(function(){if(!$(this).hasClass(q.disabled)){var e=o.p.selrow;e?$.isFunction(r.viewfunc)?r.viewfunc.call(o,e):$(o).jqGrid("viewGridRow",e,w):($.jgrid.viewModal("#"+i.themodal,{gbox:"#gbox_"+$.jgrid.jqID(o.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(s,d),p=null),j=j||{},r.del&&(p=$("<td class='ui-pg-button "+q.cornerall+"'></td>"),$(p).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+r.delicon+"'></span>"+r.deltext+"</div>"),$("tr",g).append(p),$(p,g).attr({title:r.deltitle||"",id:j.id||"del_"+u}).click(function(){var e;$(this).hasClass(q.disabled)||(o.p.multiselect?0===(e=o.p.selarrrow).length&&(e=null):e=o.p.selrow,e?$.isFunction(r.delfunc)?r.delfunc.call(o,e):$(o).jqGrid("delGridRow",e,j):($.jgrid.viewModal("#"+i.themodal,{gbox:"#gbox_"+$.jgrid.jqID(o.p.id),jqm:!0}),$("#jqg_alrt").focus()));return!1}).hover(s,d),p=null),(r.add||r.edit||r.del||r.view)&&$("tr",g).append(h),y=y||{},r.search&&(p=$("<td class='ui-pg-button "+q.cornerall+"'></td>"),$(p).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+r.searchicon+"'></span>"+r.searchtext+"</div>"),$("tr",g).append(p),$(p,g).attr({title:r.searchtitle||"",id:y.id||"search_"+u}).click(function(){return $(this).hasClass(q.disabled)||($.isFunction(r.searchfunc)?r.searchfunc.call(o,y):$(o).jqGrid("searchGrid",y)),!1}).hover(s,d),y.showOnLoad&&!0===y.showOnLoad&&$(p,g).click(),p=null),r.refresh&&(p=$("<td class='ui-pg-button "+q.cornerall+"'></td>"),$(p).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+r.refreshicon+"'></span>"+r.refreshtext+"</div>"),$("tr",g).append(p),$(p,g).attr({title:r.refreshtitle||"",id:"refresh_"+u}).click(function(){if(!$(this).hasClass(q.disabled)){$.isFunction(r.beforeRefresh)&&r.beforeRefresh.call(o),o.p.search=!1,o.p.resetsearch=!0;try{if("currentfilter"!==r.refreshstate){var e=o.p.id;o.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}$.isFunction(o.clearToolbar)&&o.clearToolbar.call(o,!1)}}catch(e){}switch(r.refreshstate){case"firstpage":$(o).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$(o).trigger("reloadGrid",[{current:!0}])}$.isFunction(r.afterRefresh)&&r.afterRefresh.call(o)}return!1}).hover(s,d),p=null),t=$(".ui-jqgrid").css("font-size")||"11px",$("body").append("<div id='testpg2' class='ui-jqgrid "+$.jgrid.styleUI[x].base.entrieBox+"' style='font-size:"+t+";visibility:hidden;' ></div>"),e=$(g).clone().appendTo("#testpg2").width(),$("#testpg2").remove(),o.p._nvtd&&(r.dropmenu?(g=null,$(o).jqGrid("_buildNavMenu",c,u,m,v,b,j,y,w)):e>o.p._nvtd[0]?(o.p.responsive?(g=null,$(o).jqGrid("_buildNavMenu",c,u,m,v,b,j,y,w)):$(c+"_"+r.position,c).append(g).width(e),o.p._nvtd[0]=e):$(c+"_"+r.position,c).append(g),o.p._nvtd[1]=e),o.p.navGrid=!0}o.p.storeNavOptions&&(o.p.navOptions=r,o.p.editOptions=v,o.p.addOptions=b,o.p.delOptions=j,o.p.searchOptions=y,o.p.viewOptions=w,o.p.navButtons=[])}}})},navButtonAdd:function(p,c){var u=this[0].p.styleUI,e=$.jgrid.styleUI[u].navigator;return c=$.extend({caption:"newButton",title:"",buttonicon:e.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:!1},c||{}),this.each(function(){if(this.grid){"string"==typeof p&&0!==p.indexOf("#")&&(p="#"+$.jgrid.jqID(p));var e=$(".navtable",p)[0],t=this,r=$.jgrid.styleUI[u].common.disabled,i=$.jgrid.styleUI[u].common.hover,o=$.jgrid.styleUI[u].common.cornerall,a=$.jgrid.styleUI[u].common.icon_base;if(t.p.storeNavOptions&&!c.internal&&t.p.navButtons.push([p,c]),e){if(c.id&&void 0!==$("#"+$.jgrid.jqID(c.id),e)[0])return;var n=$("<td></td>");"NONE"===c.buttonicon.toString().toUpperCase()?$(n).addClass("ui-pg-button "+o).append("<div class='ui-pg-div'>"+c.caption+"</div>"):$(n).addClass("ui-pg-button "+o).append("<div class='ui-pg-div'><span class='"+a+" "+c.buttonicon+"'></span>"+c.caption+"</div>"),c.id&&$(n).attr("id",c.id),"first"===c.position?0===e.rows[0].cells.length?$("tr",e).append(n):$("tr td:eq(0)",e).before(n):$("tr",e).append(n),$(n,e).attr("title",c.title||"").click(function(e){return $(this).hasClass(r)||$.isFunction(c.onClickButton)&&c.onClickButton.call(t,e),!1}).hover(function(){$(this).hasClass(r)||$(this).addClass(i)},function(){$(this).removeClass(i)})}else if(e=$(".dropdownmenu",p)[0]){var l=$(e).val(),s=c.id||$.jgrid.randId(),d=$('<li class="ui-menu-item" role="presentation"><a class="'+o+' g-menu-item" tabindex="0" role="menuitem" id="'+s+'">'+(c.caption||c.title)+"</a></li>");l&&("first"===c.position?$("#"+l).prepend(d):$("#"+l).append(d),$(d).on("click",function(e){return $(this).hasClass(r)||($("#"+l).hide(),$.isFunction(c.onClickButton)&&c.onClickButton.call(t,e)),!1}).find("a").hover(function(){$(this).hasClass(r)||$(this).addClass(i)},function(){$(this).removeClass(i)}))}}})},navSeparatorAdd:function(i,o){var e=this[0].p.styleUI,a=$.jgrid.styleUI[e].common;return o=$.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},o||{}),this.each(function(){if(this.grid){"string"==typeof i&&0!==i.indexOf("#")&&(i="#"+$.jgrid.jqID(i));var e,t,r=$(".navtable",i)[0];this.p.storeNavOptions&&this.p.navButtons.push([i,o]),r?(e="<td class='ui-pg-button "+a.disabled+"' style='width:4px;'><span class='"+o.sepclass+"'></span>"+o.sepcontent+"</td>","first"===o.position?0===r.rows[0].cells.length?$("tr",r).append(e):$("tr td:eq(0)",r).before(e):$("tr",r).append(e)):(r=$(".dropdownmenu",i)[0],e="<li class='ui-menu-item "+a.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>",r&&(t=$(r).val())&&("first"===o.position?$("#"+t).prepend(e):$("#"+t).append(e)))}})},_buildNavMenu:function(g,h,f,m,v,b,j,y){return this.each(function(){var t=this,e=$.jgrid.getRegional(t,"nav"),r=t.p.styleUI,i=($.jgrid.styleUI[r].navigator,$.jgrid.styleUI[r].filter),o=$.jgrid.styleUI[r].common,a="form_menu_"+$.jgrid.randId(),n=f.navButtonText?f.navButtonText:e.selectcaption||"Actions",l="<button class='dropdownmenu "+o.button+"' value='"+a+"'>"+n+"</button>";$(g+"_"+f.position,g).append(l);var s,d,p,c,u="alertmod_"+this.p.id;this.p.id,this.p.id;p=$(".ui-jqgrid").css("font-size")||"11px",c=$('<ul id="'+a+'" class="ui-nav-menu modal-content" role="menu" tabindex="0" style="display:none;font-size:'+p+'"></ul>'),f.add&&(s=(v=v||{}).id||"add_"+h,d=$('<li class="ui-menu-item" role="presentation"><a class="'+o.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+s+'">'+(f.addtext||f.addtitle)+"</a></li>").click(function(){return $(this).hasClass(o.disabled)||($.isFunction(f.addfunc)?f.addfunc.call(t):$(t).jqGrid("editGridRow","new",v),$(c).hide()),!1}),$(c).append(d)),f.edit&&(s=(m=m||{}).id||"edit_"+h,d=$('<li class="ui-menu-item" role="presentation"><a class="'+o.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+s+'">'+(f.edittext||f.edittitle)+"</a></li>").click(function(){if(!$(this).hasClass(o.disabled)){var e=t.p.selrow;e?$.isFunction(f.editfunc)?f.editfunc.call(t,e):$(t).jqGrid("editGridRow",e,m):($.jgrid.viewModal("#"+u,{gbox:"#gbox_"+$.jgrid.jqID(t.p.id),jqm:!0}),$("#jqg_alrt").focus()),$(c).hide()}return!1}),$(c).append(d)),f.view&&(s=(y=y||{}).id||"view_"+h,d=$('<li class="ui-menu-item" role="presentation"><a class="'+o.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+s+'">'+(f.viewtext||f.viewtitle)+"</a></li>").click(function(){if(!$(this).hasClass(o.disabled)){var e=t.p.selrow;e?$.isFunction(f.editfunc)?f.viewfunc.call(t,e):$(t).jqGrid("viewGridRow",e,y):($.jgrid.viewModal("#"+u,{gbox:"#gbox_"+$.jgrid.jqID(t.p.id),jqm:!0}),$("#jqg_alrt").focus()),$(c).hide()}return!1}),$(c).append(d)),f.del&&(s=(b=b||{}).id||"del_"+h,d=$('<li class="ui-menu-item" role="presentation"><a class="'+o.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+s+'">'+(f.deltext||f.deltitle)+"</a></li>").click(function(){var e;return $(this).hasClass(o.disabled)||(t.p.multiselect?0===(e=t.p.selarrrow).length&&(e=null):e=t.p.selrow,e?$.isFunction(f.delfunc)?f.delfunc.call(t,e):$(t).jqGrid("delGridRow",e,b):($.jgrid.viewModal("#"+u,{gbox:"#gbox_"+$.jgrid.jqID(t.p.id),jqm:!0}),$("#jqg_alrt").focus()),$(c).hide()),!1}),$(c).append(d)),(f.add||f.edit||f.del||f.view)&&$(c).append("<li class='ui-menu-item "+o.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>"),f.search&&(s=(j=j||{}).id||"search_"+h,d=$('<li class="ui-menu-item" role="presentation"><a class="'+o.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+s+'">'+(f.searchtext||f.searchtitle)+"</a></li>").click(function(){return $(this).hasClass(o.disabled)||($.isFunction(f.searchfunc)?f.searchfunc.call(t,j):$(t).jqGrid("searchGrid",j),$(c).hide()),!1}),$(c).append(d),j.showOnLoad&&!0===j.showOnLoad&&$(d).click()),f.refresh&&(s=j.id||"search_"+h,d=$('<li class="ui-menu-item" role="presentation"><a class="'+o.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+s+'">'+(f.refreshtext||f.refreshtitle)+"</a></li>").click(function(){if(!$(this).hasClass(o.disabled)){$.isFunction(f.beforeRefresh)&&f.beforeRefresh.call(t),t.p.search=!1,t.p.resetsearch=!0;try{if("currentfilter"!==f.refreshstate){var e=t.p.id;t.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}$.isFunction(t.clearToolbar)&&t.clearToolbar.call(t,!1)}}catch(e){}switch(f.refreshstate){case"firstpage":$(t).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$(t).trigger("reloadGrid",[{current:!0}])}$.isFunction(f.afterRefresh)&&f.afterRefresh.call(t),$(c).hide()}return!1}),$(c).append(d)),$(c).hide(),$("body").append(c),$("#"+a).addClass("ui-menu "+i.menu_widget),$("#"+a+" > li > a").hover(function(){$(this).addClass(o.hover)},function(){$(this).removeClass(o.hover)}),$(".dropdownmenu",g+"_"+f.position).on("click",function(e){var t=$(this).offset(),r=t.left,i=parseInt(t.top),o=$(this).val();$("#"+o).show().css({top:i-($("#"+o).height()+10)+"px",left:r+"px"}),e.stopPropagation()}),$("body").on("click",function(e){$(e.target).hasClass("dropdownmenu")||$("#"+a).hide()})})},GridToForm:function(i,o){return this.each(function(){var e,t=this;if(t.grid){var r=$(t).jqGrid("getRowData",i);if(r)for(e in r)r.hasOwnProperty(e)&&($("[name="+$.jgrid.jqID(e)+"]",o).is("input:radio")||$("[name="+$.jgrid.jqID(e)+"]",o).is("input:checkbox")?$("[name="+$.jgrid.jqID(e)+"]",o).each(function(){$(this).val()==r[e]?$(this)[t.p.useProp?"prop":"attr"]("checked",!0):$(this)[t.p.useProp?"prop":"attr"]("checked",!1)}):$("[name="+$.jgrid.jqID(e)+"]",o).val(r[e]))}})},FormToGrid:function(t,i,o,a){return this.each(function(){if(this.grid){o||(o="set"),a||(a="first");var e=$(i).serializeArray(),r={};$.each(e,function(e,t){r[t.name]=t.value}),"add"===o?$(this).jqGrid("addRowData",t,r,a):"set"===o&&$(this).jqGrid("setRowData",t,r)}})}}),$.jgrid.extend({groupingSetup:function(){return this.each(function(){var e,t,r,i=this,o=i.p.colModel,a=i.p.groupingView,n=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].grouping;if(null===a||"object"!=typeof a&&!$.isFunction(a))i.p.grouping=!1;else if(a.plusicon||(a.plusicon=n.icon_plus),a.minusicon||(a.minusicon=n.icon_minus),a.groupField.length){for(void 0===a.visibiltyOnNextGrouping&&(a.visibiltyOnNextGrouping=[]),a.lastvalues=[],a._locgr||(a.groups=[]),a.counters=[],e=0;e<a.groupField.length;e++)a.groupOrder[e]||(a.groupOrder[e]="asc"),a.groupText[e]||(a.groupText[e]="{0}"),"boolean"!=typeof a.groupColumnShow[e]&&(a.groupColumnShow[e]=!0),"boolean"!=typeof a.groupSummary[e]&&(a.groupSummary[e]=!1),a.groupSummaryPos[e]||(a.groupSummaryPos[e]="footer"),!0===a.groupColumnShow[e]?(a.visibiltyOnNextGrouping[e]=!0,$(i).jqGrid("showCol",a.groupField[e])):(a.visibiltyOnNextGrouping[e]=$("#"+$.jgrid.jqID(i.p.id+"_"+a.groupField[e])).is(":visible"),$(i).jqGrid("hideCol",a.groupField[e]));for(a.summary=[],a.hideFirstGroupCol&&$.isArray(a.formatDisplayField)&&!$.isFunction(a.formatDisplayField[0])&&(a.formatDisplayField[0]=function(e){return e}),t=0,r=o.length;t<r;t++)a.hideFirstGroupCol&&(o[t].hidden||a.groupField[0]!==o[t].name||(o[t].formatter=function(){return""})),o[t].summaryType&&(o[t].summaryDivider?a.summary.push({nm:o[t].name,st:o[t].summaryType,v:"",sd:o[t].summaryDivider,vd:"",sr:o[t].summaryRound,srt:o[t].summaryRoundType||"round"}):a.summary.push({nm:o[t].name,st:o[t].summaryType,v:"",sr:o[t].summaryRound,srt:o[t].summaryRoundType||"round"}))}else i.p.grouping=!1})},groupingPrepare:function(p,c){return this.each(function(){var e,t,r,i,o,a=this.p.groupingView,n=this,l=function(){$.isFunction(this.st)?this.v=this.st.call(n,this.v,this.nm,p):(this.v=$(n).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,p),"avg"===this.st.toLowerCase()&&this.sd&&(this.vd=$(n).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,p)))},s=a.groupField.length,d=0;for(e=0;e<s;e++)t=a.groupField[e],i=a.displayField[e],r=p[t],null==(o=null==i?null:p[i])&&(o=r),void 0!==r&&(0===c?(a.groups.push({idx:e,dataIndex:t,value:r,displayValue:o,startRow:c,cnt:1,summary:[]}),a.lastvalues[e]=r,a.counters[e]={cnt:1,pos:a.groups.length-1,summary:$.extend(!0,[],a.summary)}):"object"==typeof r||($.isArray(a.isInTheSameGroup)&&$.isFunction(a.isInTheSameGroup[e])?a.isInTheSameGroup[e].call(n,a.lastvalues[e],r,e,a):a.lastvalues[e]===r)?1===d?(a.groups.push({idx:e,dataIndex:t,value:r,displayValue:o,startRow:c,cnt:1,summary:[]}),a.lastvalues[e]=r,a.counters[e]={cnt:1,pos:a.groups.length-1,summary:$.extend(!0,[],a.summary)}):(a.counters[e].cnt+=1,a.groups[a.counters[e].pos].cnt=a.counters[e].cnt):(a.groups.push({idx:e,dataIndex:t,value:r,displayValue:o,startRow:c,cnt:1,summary:[]}),a.lastvalues[e]=r,d=1,a.counters[e]={cnt:1,pos:a.groups.length-1,summary:$.extend(!0,[],a.summary)}),$.each(a.counters[e].summary,l),a.groups[a.counters[e].pos].summary=a.counters[e].summary)}),this},groupingToggle:function(j){return this.each(function(){var e=this,t=e.p.groupingView,r=j.split("_"),i=parseInt(r[r.length-2],10);r.splice(r.length-2,2);var o,a,n,l=r.join("_"),s=t.minusicon,d=t.plusicon,p=$("#"+$.jgrid.jqID(j)),c=p.length?p[0].nextSibling:null,u=$("#"+$.jgrid.jqID(j)+" span.tree-wrap-"+e.p.direction),g=function(e){var t=$.map(e.split(" "),function(e){if(e.substring(0,l.length+1)===l+"_")return parseInt(e.substring(l.length+1),10)});return 0<t.length?t[0]:void 0},h=!1,f=!1,m=!!e.p.frozenColumns&&e.p.id+"_frozen",v=!!m&&$("#"+$.jgrid.jqID(j),"#"+$.jgrid.jqID(m)),b=v&&v.length?v[0].nextSibling:null;if(u.hasClass(s)){if(c)for(;c&&!(void 0!==(o=g(c.className))&&o<=i);)n=parseInt($(c).attr("jqfootlevel"),10),(f=!isNaN(n)&&(t.showSummaryOnHide&&n<=i))||$(c).hide(),c=c.nextSibling,m&&(f||$(b).hide(),b=b.nextSibling);u.removeClass(s).addClass(d),h=!0}else{if(c)for(a=void 0;c;){if(o=g(c.className),void 0===a&&(a=void 0===o),f=$(c).hasClass("ui-subgrid")&&$(c).hasClass("ui-sg-collapsed"),void 0!==o){if(o<=i)break;o===i+1&&(f||($(c).show().find(">td>span.tree-wrap-"+e.p.direction).removeClass(s).addClass(d),m&&$(b).show().find(">td>span.tree-wrap-"+e.p.direction).removeClass(s).addClass(d)))}else a&&(f||($(c).show(),m&&$(b).show()));c=c.nextSibling,m&&(b=b.nextSibling)}u.removeClass(d).addClass(s)}$(e).triggerHandler("jqGridGroupingClickGroup",[j,h]),$.isFunction(e.p.onClickGroup)&&e.p.onClickGroup.call(e,j,h)}),!1},groupingRender:function(D,C,F,G){return this.each(function(){var c,u,g,h=this,f=h.p.groupingView,m="",v="",b=f.groupCollapse?f.plusicon:f.minusicon,j=[],y=f.groupField.length,w=$.jgrid.styleUI[h.p.styleUI||"jQueryUI"].common;b=b+" tree-wrap-"+h.p.direction,$.each(h.p.colModel,function(e,t){var r;for(r=0;r<y;r++)if(f.groupField[r]===t.name){j[r]=e;break}});var _=0;function x(e,t,r,i,o){var a,n,l,s,d=function(e,t,r){var i,o=!1;if(0===t)o=r[e];else{var a=r[e].idx;if(0===a)o=r[e];else for(i=e;0<=i;i--)if(r[i].idx===a-t){o=r[i];break}}return o}(e,t,r),p=h.p.colModel,c=d.cnt,u="",g=!1;for(n=i;n<C;n++)p[n].hidden?l="<td "+h.formatCol(n,1,"")+">&#160;</td>":!g&&o?(l=o,g=!0):l="<td "+h.formatCol(n,1,"")+">&#160;</td>",$.each(d.summary,function(){if(this.nm===p[n].name){s=p[n].summaryTpl?p[n].summaryTpl:"{0}","string"==typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&0<c&&(this.v=this.v/c));try{this.groupCount=d.cnt,this.groupIndex=d.dataIndex,this.groupValue=d.value,a=h.formatter("",this.v,n,this)}catch(e){a=this.v}return l="<td "+h.formatCol(n,1,"")+">"+$.jgrid.template(s,a,d.cnt,d.dataIndex,d.displayValue)+"</td>",!1}}),u+=l;return u}var q,I=$.makeArray(f.groupSummary);I.reverse(),q=h.p.multiselect?' colspan="2"':"",$.each(f.groups,function(e,t){if(f._locgr&&!(t.startRow+t.cnt>(F-1)*G&&t.startRow<F*G))return!0;_++,u=h.p.id+"ghead_"+t.idx,c=u+"_"+e,v="<span style='cursor:pointer;margin-right:8px;margin-left:5px;' class='"+w.icon_base+" "+b+"' onclick=\"jQuery('#"+$.jgrid.jqID(h.p.id)+"').jqGrid('groupingToggle','"+c+"');return false;\"></span>";try{g=$.isArray(f.formatDisplayField)&&$.isFunction(f.formatDisplayField[t.idx])?f.formatDisplayField[t.idx].call(h,t.displayValue,t.value,h.p.colModel[j[t.idx]],t.idx,f):h.formatter(c,t.displayValue,j[t.idx],t.value)}catch(e){g=t.displayValue}var r="";if("string"!=typeof(r=$.isFunction(f.groupText[t.idx])?f.groupText[t.idx].call(h,g,t.cnt,t.summary):$.jgrid.template(f.groupText[t.idx],g,t.cnt,t.summary))&&"number"!=typeof r&&(r=g),"header"===f.groupSummaryPos[t.idx]?(m+='<tr id="'+c+'"'+(f.groupCollapse&&0<t.idx?' style="display:none;" ':" ")+'role="row" class= "'+w.content+" jqgroup ui-row-"+h.p.direction+" "+u+'">',m+=x(e,0,f.groups,""===q?0:1,'<td style="padding-left:'+12*t.idx+'px;"'+q+">"+v+r+"</td>"),m+="</tr>"):m+='<tr id="'+c+'"'+(f.groupCollapse&&0<t.idx?' style="display:none;" ':" ")+'role="row" class= "'+w.content+" jqgroup ui-row-"+h.p.direction+" "+u+'"><td style="padding-left:'+12*t.idx+'px;" colspan="'+(!1===f.groupColumnShow[t.idx]?C-1:C)+'">'+v+r+"</td></tr>",y-1===t.idx){var i,o,a=f.groups[e+1],n=0,l=t.startRow,s=void 0!==a?a.startRow:f.groups[e].startRow+f.groups[e].cnt;for(f._locgr&&(n=(F-1)*G)>t.startRow&&(l=n),i=l;i<s&&D[i-n];i++)m+=D[i-n].join("");if("header"!==f.groupSummaryPos[t.idx]){var d;if(void 0!==a){for(d=0;d<f.groupField.length&&a.dataIndex!==f.groupField[d];d++);_=f.groupField.length-d}for(o=0;o<_;o++)if(I[o]){var p="";f.groupCollapse&&!f.showSummaryOnHide&&(p=' style="display:none;"'),m+="<tr"+p+' jqfootlevel="'+(t.idx-o)+'" role="row" class="'+w.content+" jqfoot ui-row-"+h.p.direction+'">',m+=x(e,o,f.groups,0,!1),m+="</tr>"}_=d}}}),$("#"+$.jgrid.jqID(h.p.id)+" tbody:first").append(m),m=null})},groupingGroupBy:function(i,o){return this.each(function(){var e=this;"string"==typeof i&&(i=[i]);var t,r=e.p.groupingView;for(e.p.grouping=!0,r._locgr=!1,void 0===r.visibiltyOnNextGrouping&&(r.visibiltyOnNextGrouping=[]),t=0;t<r.groupField.length;t++)!r.groupColumnShow[t]&&r.visibiltyOnNextGrouping[t]&&$(e).jqGrid("showCol",r.groupField[t]);for(t=0;t<i.length;t++)r.visibiltyOnNextGrouping[t]=$("#"+$.jgrid.jqID(e.p.id)+"_"+$.jgrid.jqID(i[t])).is(":visible");e.p.groupingView=$.extend(e.p.groupingView,o||{}),r.groupField=i,$(e).trigger("reloadGrid")})},groupingRemove:function(i){return this.each(function(){var e=this;if(void 0===i&&(i=!0),!(e.p.grouping=!1)===i){var t,r=e.p.groupingView;for(t=0;t<r.groupField.length;t++)!r.groupColumnShow[t]&&r.visibiltyOnNextGrouping[t]&&$(e).jqGrid("showCol",r.groupField);$("tr.jqgroup, tr.jqfoot","#"+$.jgrid.jqID(e.p.id)+" tbody:first").remove(),$("tr.jqgrow:hidden","#"+$.jgrid.jqID(e.p.id)+" tbody:first").show()}else $(e).trigger("reloadGrid")})},groupingCalculations:{handler:function(e,t,r,i,o,a){var n={sum:function(){return parseFloat(t||0)+parseFloat(a[r]||0)},min:function(){return""===t?parseFloat(a[r]||0):Math.min(parseFloat(t),parseFloat(a[r]||0))},max:function(){return""===t?parseFloat(a[r]||0):Math.max(parseFloat(t),parseFloat(a[r]||0))},count:function(){return""===t&&(t=0),a.hasOwnProperty(r)?t+1:0},avg:function(){return n.sum()}};if(!n[e])throw"jqGrid Grouping No such method: "+e;var l=n[e]();if(null!=i)if("fixed"===o)l=l.toFixed(i);else{var s=Math.pow(10,i);l=Math.round(l*s)/s}return l}},setGroupHeaders:function(C){return C=$.extend({useColSpanStyle:!1,groupHeaders:[]},C||{}),this.each(function(){var e,t,r,i,o,a,n,l,s,d,p,c,u,g,h=this,f=0,m=h.p.colModel,v=m.length,b=h.grid.headers,j=$("table.ui-jqgrid-htable",h.grid.hDiv),y=j.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),w=j.children("thead"),_=j.find(".jqg-first-row-header"),x=$.jgrid.styleUI[h.p.styleUI||"jQueryUI"].base;h.p.groupHeader||(h.p.groupHeader=[]),h.p.groupHeader.push(C),void 0===_[0]?_=$("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):_.empty();var q,I=function(e,t){var r,i=t.length;for(r=0;r<i;r++)if(t[r].startColumnName===e)return r;return-1};for($(h).prepend(w),r=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header"),e=0;e<v;e++)if(o=b[e].el,a=$(o),t=m[e],n={height:"0px",width:b[e].width+"px",display:t.hidden?"none":""},$("<th>",{role:"gridcell"}).css(n).addClass("ui-first-th-"+h.p.direction).appendTo(_),o.style.width="",0<=(l=I(t.name,C.groupHeaders))){for(d=(s=C.groupHeaders[l]).numberOfColumns,p=s.titleText,u=s.className||"",l=c=0;l<d&&e+l<v;l++)m[e+l].hidden||c++;i=$("<th>").attr({role:"columnheader"}).addClass(x.headerBox+" ui-th-column-header ui-th-"+h.p.direction+" "+u).html(p),0<c&&i.attr("colspan",String(c)),h.p.headertitles&&i.attr("title",i.text()),0===c&&i.hide(),a.before(i),r.append(o),f=d-1}else if(0===f)if(C.useColSpanStyle){var D=a.attr("rowspan")?parseInt(a.attr("rowspan"),10)+1:2;a.attr("rowspan",D)}else $("<th>",{role:"columnheader"}).addClass(x.headerBox+" ui-th-column-header ui-th-"+h.p.direction).css({display:t.hidden?"none":""}).insertBefore(a),r.append(o);else r.append(o),f--;(g=$(h).children("thead")).prepend(_),r.insertAfter(y),j.append(g),C.useColSpanStyle&&(j.find("span.ui-jqgrid-resize").each(function(){var e=$(this).parent();e.is(":visible")&&(this.style.cssText="height: "+e.height()+"px !important; cursor: col-resize;")}),j.find("div.ui-jqgrid-sortable").each(function(){var e=$(this),t=e.parent();t.is(":visible")&&t.is(":has(span.ui-jqgrid-resize)")&&e.css("top",(t.height()-e.outerHeight())/2-4+"px")})),q=g.find("tr.jqg-first-row-header"),$(h).on("jqGridResizeStop.setGroupHeaders",function(e,t,r){q.find("th").eq(r)[0].style.width=t+"px"})})},destroyGroupHeader:function(p){return void 0===p&&(p=!0),this.each(function(){var e,t,r,i,o,a,n,l=this.grid,s=$("table.ui-jqgrid-htable thead",l.hDiv),d=this.p.colModel;if(l){for($(this).off(".setGroupHeaders"),e=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),t=0,r=(i=l.headers).length;t<r;t++){n=d[t].hidden?"none":"",o=$(i[t].el).width(i[t].width).css("display",n);try{o.removeAttr("rowSpan")}catch(e){o.attr("rowSpan",1)}e.append(o),0<(a=o.children("span.ui-jqgrid-resize")).length&&(a[0].style.height=""),o.children("div")[0].style.top=""}$(s).children("tr.ui-jqgrid-labels").remove(),$(s).prepend(e),!0===p&&$(this).jqGrid("setGridParam",{groupHeader:null})}})}}),$.jgrid=$.jgrid||{},$.extend($.jgrid,{saveState:function(e,t){if(t=$.extend({useStorage:!0,storageType:"localStorage",beforeSetItem:null,compression:!1,compressionModule:"LZString",compressionMethod:"compressToUTF16",debug:!1,saveData:!0},t||{}),e){var r,i,o="",a="",n=$("#"+e)[0];if(n.grid){if((i=$(n).data("inlineNav"))&&n.p.inlineNav&&$(n).jqGrid("setGridParam",{_iN:i}),(i=$(n).data("filterToolbar"))&&n.p.filterToolbar&&$(n).jqGrid("setGridParam",{_fT:i}),o=$(n).jqGrid("jqGridExport",{exptype:"jsonstring",ident:"",root:"",data:t.saveData}),a="",t.saveData){var l=(a=$(n.grid.bDiv).find(".ui-jqgrid-btable tbody:first").html()).indexOf("</tr>");a=a.slice(l+5)}if($.isFunction(t.beforeSetItem)&&null!=(r=t.beforeSetItem.call(n,o))&&(o=r),t.debug){$("#gbox_tree").prepend('<a id="link_save" target="_blank" download="jqGrid_dump.txt">Click to save Dump Data</a>');var s,d,p=[],c={};p.push("Grid Options\n"),p.push(o),p.push("\n"),p.push("GridData\n"),p.push(a),c.type="plain/text;charset=utf-8";try{s=new File(p,"jqGrid_dump.txt",c)}catch(e){s=new Blob(p,c)}d=URL.createObjectURL(s),$("#link_save").attr("href",d).on("click",function(){$(this).remove()})}if(t.compression&&t.compressionModule)try{null!=(r=window[t.compressionModule][t.compressionMethod](o))&&(o=r,a=window[t.compressionModule][t.compressionMethod](a))}catch(e){}if(t.useStorage&&$.jgrid.isLocalStorage())try{window[t.storageType].setItem("jqGrid"+n.p.id,o),window[t.storageType].setItem("jqGrid"+n.p.id+"_data",a)}catch(e){22===e.code&&alert("Local storage limit is over!")}return o}}},loadState:function(e,t,r){if(r=$.extend({useStorage:!0,storageType:"localStorage",clearAfterLoad:!1,beforeSetGrid:null,afterSetGrid:null,decompression:!1,decompressionModule:"LZString",decompressionMethod:"decompressFromUTF16",restoreData:!0},r||{}),e){var o,i,a,n,l,s=$("#"+e)[0];if(r.useStorage)try{t=window[r.storageType].getItem("jqGrid"+s.id),a=window[r.storageType].getItem("jqGrid"+s.id+"_data")}catch(e){}if(t){if(r.decompression&&r.decompressionModule)try{null!=(o=window[r.decompressionModule][r.decompressionMethod](t))&&(t=o,a=window[r.decompressionModule][r.decompressionMethod](a))}catch(e){}if((o=$.jgrid.parseFunc(t))&&"object"===$.type(o)){s.grid&&$.jgrid.gridUnload(e),$.isFunction(r.beforeSetGrid)&&(i=r.beforeSetGrid(o))&&"object"===$.type(i)&&(o=i);var d=function(e){return e},p={reccount:o.reccount,records:o.records,lastpage:o.lastpage,shrinkToFit:d(o.shrinkToFit),data:d(o.data),datatype:d(o.datatype),grouping:d(o.grouping)};o.shrinkToFit=!1,o.data=[],o.datatype="local",o.grouping=!1,o.inlineNav&&(n=d(o._iN),o._iN=null,delete o._iN),o.filterToolbar&&(l=d(o._fT),o._fT=null,delete o._fT);var c=$("#"+e).jqGrid(o);if(r.restoreData&&""!==$.trim(a)&&c.append(a),c.jqGrid("setGridParam",p),o.storeNavOptions&&o.navGrid&&(c[0].p.navGrid=!1,c.jqGrid("navGrid",o.pager,o.navOptions,o.editOptions,o.addOptions,o.delOptions,o.searchOptions,o.viewOptions),o.navButtons&&o.navButtons.length))for(var u=0;u<o.navButtons.length;u++)"sepclass"in o.navButtons[u][1]?c.jqGrid("navSeparatorAdd",o.navButtons[u][0],o.navButtons[u][1]):c.jqGrid("navButtonAdd",o.navButtons[u][0],o.navButtons[u][1]);if(c[0].refreshIndex(),o.subGrid){var g=1===o.multiselect?1:0,h=!0===o.rownumbers?1:0;c.jqGrid("addSubGrid",g+h),$.each(c[0].rows,function(e,t){$(t).hasClass("ui-sg-expanded")&&$(c[0].rows[e-1]).find("td.sgexpanded").click().click()})}if(o.treeGrid)for(var f=1,m=c[0].rows.length,v=o.expColInd,b=o.treeReader.leaf_field,j=o.treeReader.expanded_field;f<m;)$(c[0].rows[f].cells[v]).find("div.treeclick").on("click",function(e){var t=e.target||e.srcElement,r=$.jgrid.stripPref(o.idPrefix,$(t,c[0].rows).closest("tr.jqgrow")[0].id),i=c[0].p._index[r];return c[0].p.data[i][b]||(c[0].p.data[i][j]?(c.jqGrid("collapseRow",c[0].p.data[i]),c.jqGrid("collapseNode",c[0].p.data[i])):(c.jqGrid("expandRow",c[0].p.data[i]),c.jqGrid("expandNode",c[0].p.data[i]))),!1}),!0===o.ExpandColClick&&$(c[0].rows[f].cells[v]).find("span.cell-wrapper").css("cursor","pointer").on("click",function(e){var t=e.target||e.srcElement,r=$.jgrid.stripPref(o.idPrefix,$(t,c[0].rows).closest("tr.jqgrow")[0].id),i=c[0].p._index[r];return c[0].p.data[i][b]||(c[0].p.data[i][j]?(c.jqGrid("collapseRow",c[0].p.data[i]),c.jqGrid("collapseNode",c[0].p.data[i])):(c.jqGrid("expandRow",c[0].p.data[i]),c.jqGrid("expandNode",c[0].p.data[i]))),c.jqGrid("setSelection",r),!1}),f++;o.multiselect&&$.each(o.selarrrow,function(){$("#jqg_"+e+"_"+this)[o.useProp?"prop":"attr"]("checked","checked")}),o.inlineNav&&n&&(c.jqGrid("setGridParam",{inlineNav:!1}),c.jqGrid("inlineNav",o.pager,n)),o.filterToolbar&&l&&(c.jqGrid("setGridParam",{filterToolbar:!1}),l.restoreFromFilters=!0,c.jqGrid("filterToolbar",l)),o.frozenColumns&&c.jqGrid("setFrozenColumns"),c[0].updatepager(!0,!0),$.isFunction(r.afterSetGrid)&&r.afterSetGrid(c),r.clearAfterLoad&&(window[r.storageType].removeItem("jqGrid"+s.id),window[r.storageType].removeItem("jqGrid"+s.id+"_data"))}else alert("can not convert to object")}}},isGridInStorage:function(e,t){var r,i,o,a={storageType:"localStorage"};a=$.extend(a,t||{});try{i=window[a.storageType].getItem("jqGrid"+e),o=window[a.storageType].getItem("jqGrid"+e+"_data"),r=null!=i&&null!=o&&"string"==typeof i&&"string"==typeof o}catch(e){r=!1}return r},setRegional:function(e,t){var r={storageType:"sessionStorage"};if((r=$.extend(r,t||{})).regional){$.jgrid.saveState(e,r),r.beforeSetGrid=function(e){return e.regional=r.regional,e.force_regional=!0,e},$.jgrid.loadState(e,null,r);var i=$("#"+e)[0],o=$(i).jqGrid("getGridParam","colModel"),a=-1,n=$.jgrid.getRegional(i,"nav");$.each(o,function(e){if(this.formatter&&"actions"===this.formatter)return a=e,!1}),-1!==a&&n&&$("#"+e+" tbody tr").each(function(){var e=this.cells[a];$(e).find(".ui-inline-edit").attr("title",n.edittitle),$(e).find(".ui-inline-del").attr("title",n.deltitle),$(e).find(".ui-inline-save").attr("title",n.savetitle),$(e).find(".ui-inline-cancel").attr("title",n.canceltitle)});try{window[r.storageType].removeItem("jqGrid"+i.id),window[r.storageType].removeItem("jqGrid"+i.id+"_data")}catch(e){}}},jqGridImport:function(e,r){r=$.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"root>grid",data:"root>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},r||{});var s=(0===e.indexOf("#")?"":"#")+$.jgrid.jqID(e),i=function(e,t){var r,i,o,a=$(t.xmlGrid.config,e)[0],n=$(t.xmlGrid.data,e)[0];if($.grid.xmlToJSON){for(o in r=$.jgrid.xmlToJSON(a))r.hasOwnProperty(o)&&(i=r[o]);if(n){var l=r.grid.datatype;r.grid.datatype="xmlstring",r.grid.datastr=e,$(s).jqGrid(i).jqGrid("setGridParam",{datatype:l})}else setTimeout(function(){$(s).jqGrid(i)},0)}else alert("xml2json or parse are not present")},t=function(e,t){if(e&&"string"==typeof e){var r=$.jgrid.parseFunc(e),i=r[t.jsonGrid.config],o=r[t.jsonGrid.data];if(o){var a=i.datatype;i.datatype="jsonstring",i.datastr=o,$(s).jqGrid(i).jqGrid("setGridParam",{datatype:a})}else $(s).jqGrid(i)}};switch(r.imptype){case"xml":$.ajax($.extend({url:r.impurl,type:r.mtype,data:r.impData,dataType:"xml",complete:function(e,t){"success"===t&&(i(e.responseXML,r),$(s).triggerHandler("jqGridImportComplete",[e,r]),$.isFunction(r.importComplete)&&r.importComplete(e)),e=null}},r.ajaxOptions));break;case"xmlstring":if(r.impstring&&"string"==typeof r.impstring){var o=$.parseXML(r.impstring);o&&(i(o,r),$(s).triggerHandler("jqGridImportComplete",[o,r]),$.isFunction(r.importComplete)&&r.importComplete(o))}break;case"json":$.ajax($.extend({url:r.impurl,type:r.mtype,data:r.impData,dataType:"json",complete:function(e){try{t(e.responseText,r),$(s).triggerHandler("jqGridImportComplete",[e,r]),$.isFunction(r.importComplete)&&r.importComplete(e)}catch(e){}e=null}},r.ajaxOptions));break;case"jsonstring":r.impstring&&"string"==typeof r.impstring&&(t(r.impstring,r),$(s).triggerHandler("jqGridImportComplete",[r.impstring,r]),$.isFunction(r.importComplete)&&r.importComplete(r.impstring))}}}),$.jgrid.extend({jqGridExport:function(t){t=$.extend({exptype:"xmlstring",root:"grid",ident:"\t",addOptions:{},data:!0},t||{});var r=null;return this.each(function(){if(this.grid){var e=$.extend(!0,{},$(this).jqGrid("getGridParam"),t.addOptions);switch(e.rownumbers&&(e.colNames.splice(0,1),e.colModel.splice(0,1)),e.multiselect&&(e.colNames.splice(0,1),e.colModel.splice(0,1)),e.subGrid&&(e.colNames.splice(0,1),e.colModel.splice(0,1)),e.knv=null,t.data||(e.data=[],e._index={}),t.exptype){case"xmlstring":r="<"+t.root+">"+$.jgrid.jsonToXML(e,{xmlDecl:""})+"</"+t.root+">";break;case"jsonstring":r=$.jgrid.stringify(e),t.root&&(r="{"+t.root+":"+r+"}")}}}),r},excelExport:function(p){return p=$.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",beforeExport:null,exporthidden:!1,exportgrouping:!1,exportOptions:{}},p||{}),this.each(function(){var e;if(this.grid&&"remote"===p.exptype){var t,r=$.extend({},this.p.postData);if(r[p.oper]=p.tag,$.isFunction(p.beforeExport)){var i=p.beforeExport.call(this,r);$.isPlainObject(i)&&(r=i)}if(p.exporthidden){var o,a=this.p.colModel,n=a.length,l=[];for(o=0;o<n;o++)void 0===a[o].hidden&&(a[o].hidden=!1),l.push({name:a[o].name,hidden:a[o].hidden});var s=JSON.stringify(l);"string"==typeof s&&(r.colModel=s)}p.exportgrouping&&"string"==typeof(t=JSON.stringify(this.p.groupingView))&&(r.groupingView=t);var d=jQuery.param(r);e=-1!==p.url.indexOf("?")?p.url+"&"+d:p.url+"?"+d,window.location=e}})}}),$.jgrid.inlineEdit=$.jgrid.inlineEdit||{},$.jgrid.extend({editRow:function(c,e,t,r,i,o,a,n,l){var u={},s=$.makeArray(arguments).slice(1),g=this[0];return"object"===$.type(s[0])?u=s[0]:(void 0!==e&&(u.keys=e),$.isFunction(t)&&(u.oneditfunc=t),$.isFunction(r)&&(u.successfunc=r),void 0!==i&&(u.url=i),void 0!==o&&(u.extraparam=o),$.isFunction(a)&&(u.aftersavefunc=a),$.isFunction(n)&&(u.errorfunc=n),$.isFunction(l)&&(u.afterrestorefunc=l)),u=$.extend(!0,{keys:!1,keyevent:"keydown",onEnter:null,onEscape:null,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",focusField:!0,saveui:"enable",savetext:$.jgrid.getRegional(g,"defaults.savetext")},$.jgrid.inlineEdit,u),this.each(function(){var o,a,t,n,e,l=0,s=null,d={},p=$(this).jqGrid("getStyleUI",g.p.styleUI+".inlinedit","inputClass",!0);g.grid&&!1!==(t=$(g).jqGrid("getInd",c,!0))&&(g.p.beforeAction=!0,void 0===(e=$.isFunction(u.beforeEditRow)?u.beforeEditRow.call(g,u,c):void 0)&&(e=!0),e?"0"!==($(t).attr("editable")||"0")||$(t).hasClass("not-editable-row")||(n=g.p.colModel,$('td[role="gridcell"]',t).each(function(t){o=n[t].name;var e=!0===g.p.treeGrid&&o===g.p.ExpandColumn;if(e)a=$("span:first",this).html();else try{a=$.unformat.call(g,this,{rowId:c,colModel:n[t]},t)}catch(e){a=n[t].edittype&&"textarea"===n[t].edittype?$(this).text():$(this).html()}if("cb"!==o&&"subgrid"!==o&&"rn"!==o&&(g.p.autoencode&&(a=$.jgrid.htmlDecode(a)),d[o]=a,!0===n[t].editable)){null===s&&(s=t),e?$("span:first",this).html(""):$(this).html("");var r=$.extend({},n[t].editoptions||{},{id:c+"_"+o,name:o,rowId:c,oper:"edit"});n[t].edittype||(n[t].edittype="text"),("&nbsp;"===a||"&#160;"===a||1===a.length&&160===a.charCodeAt(0))&&(a="");var i=$.jgrid.createEl.call(g,n[t].edittype,r,a,!0,$.extend({},$.jgrid.ajaxOptions,g.p.ajaxSelectOptions||{}));$(i).addClass("editable inline-edit-cell"),-1<$.inArray(n[t].edittype,["text","textarea","password","select"])&&$(i).addClass(p),e?$("span:first",this).append(i):$(this).append(i),$.jgrid.bindEv.call(g,i,r),"select"===n[t].edittype&&void 0!==n[t].editoptions&&!0===n[t].editoptions.multiple&&void 0===n[t].editoptions.dataUrl&&$.jgrid.msie()&&$(i).width($(i).width()),l++}}),0<l&&(d.id=c,g.p.savedRow.push(d),$(t).attr("editable","1"),u.focusField&&("number"==typeof u.focusField&&parseInt(u.focusField,10)<=n.length&&(s=u.focusField),setTimeout(function(){var e=$("td:eq("+s+") :input:visible",t).not(":disabled");0<e.length&&e.focus()},0)),!0===u.keys&&$(t).on(u.keyevent,function(e){if(27===e.keyCode){if($.isFunction(u.onEscape))return u.onEscape.call(g,c,u,e),!0;if($(g).jqGrid("restoreRow",c,u),g.p.inlineNav)try{$(g).jqGrid("showAddEditButtons")}catch(e){}return!1}if(13===e.keyCode){if("TEXTAREA"===e.target.tagName)return!0;if($.isFunction(u.onEnter))return u.onEnter.call(g,c,u,e),!0;if($(g).jqGrid("saveRow",c,u)&&g.p.inlineNav)try{$(g).jqGrid("showAddEditButtons")}catch(e){}return!1}}),$(g).triggerHandler("jqGridInlineEditRow",[c,u]),$.isFunction(u.oneditfunc)&&u.oneditfunc.call(g,c))):g.p.beforeAction=!1)})},saveRow:function(a,e,t,r,i,o,n){var l=$.makeArray(arguments).slice(1),s={},d=this[0];"object"===$.type(l[0])?s=l[0]:($.isFunction(e)&&(s.successfunc=e),void 0!==t&&(s.url=t),void 0!==r&&(s.extraparam=r),$.isFunction(i)&&(s.aftersavefunc=i),$.isFunction(o)&&(s.errorfunc=o),$.isFunction(n)&&(s.afterrestorefunc=n)),s=$.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",saveui:"enable",savetext:$.jgrid.getRegional(d,"defaults.savetext")},$.jgrid.inlineEdit,s);var p,c,u,g,h,f=!1,m={},v={},b={},j=!1,y=$.trim($(d).jqGrid("getStyleUI",d.p.styleUI+".common","error",!0));if(!d.grid)return f;if(!1===(h=$(d).jqGrid("getInd",a,!0)))return f;var w=$.jgrid.getRegional(d,"errors"),_=$.jgrid.getRegional(d,"edit"),x=$.isFunction(s.beforeSaveRow)?s.beforeSaveRow.call(d,s,a):void 0;if(void 0===x&&(x=!0),x){if(c=$(h).attr("editable"),s.url=s.url||d.p.editurl,"1"===c){var q,I,D;if($('td[role="gridcell"]',h).each(function(e){if(q=d.p.colModel[e],p=q.name,D="","cb"!==p&&"subgrid"!==p&&!0===q.editable&&"rn"!==p&&!$(this).hasClass("not-editable-cell")){switch(q.edittype){case"checkbox":var t=["Yes","No"];q.editoptions&&q.editoptions.value&&(t=q.editoptions.value.split(":")),m[p]=$("input",this).is(":checked")?t[0]:t[1],D=$("input",this);break;case"text":case"password":case"textarea":case"button":m[p]=$("input, textarea",this).val(),D=$("input, textarea",this);break;case"select":if(q.editoptions.multiple){var r=$("select",this),i=[];m[p]=$(r).val(),m[p]?m[p]=m[p].join(","):m[p]="",$("select option:selected",this).each(function(e,t){i[e]=$(t).text()}),v[p]=i.join(",")}else m[p]=$("select option:selected",this).val(),v[p]=$("select option:selected",this).text();q.formatter&&"select"===q.formatter&&(v={}),D=$("select",this);break;case"custom":try{if(!q.editoptions||!$.isFunction(q.editoptions.custom_value))throw"e1";if(m[p]=q.editoptions.custom_value.call(d,$(".customelement",this),"get"),void 0===m[p])throw"e2"}catch(e){"e1"===e?$.jgrid.info_dialog(w.errcap,"function 'custom_value' "+_.msg.nodefined,_.bClose,{styleUI:d.p.styleUI}):$.jgrid.info_dialog(w.errcap,e.message,_.bClose,{styleUI:d.p.styleUI})}}if(!1===(g=$.jgrid.checkValues.call(d,m[p],e))[0])return I=e,!1;d.p.autoencode&&(m[p]=$.jgrid.htmlEncode(m[p])),"clientArray"!==s.url&&q.editoptions&&!0===q.editoptions.NullIfEmpty&&""===m[p]&&(b[p]="null",j=!0)}}),!1===g[0]){try{if($.isFunction(d.p.validationCell))d.p.validationCell.call(d,D,g[1],h.rowIndex,I);else{var C=$(d).jqGrid("getGridRowById",a),F=$.jgrid.findPos(C);$.jgrid.info_dialog(w.errcap,g[1],_.bClose,{left:F[0],top:F[1]+$(C).outerHeight(),styleUI:d.p.styleUI,onClose:function(){0<=I&&$("#"+a+"_"+d.p.colModel[I].name).focus()}})}}catch(e){alert(g[1])}return f}var G,k=d.p.prmNames,S=a;if(G=!1===d.p.keyName?k.id:d.p.keyName,m){if(m[k.oper]=k.editoper,void 0===m[G]||""===m[G])m[G]=a;else if(h.id!==d.p.idPrefix+m[G]){var R=$.jgrid.stripPref(d.p.idPrefix,a);if(void 0!==d.p._index[R]&&(d.p._index[m[G]]=d.p._index[R],delete d.p._index[R]),a=d.p.idPrefix+m[G],$(h).attr("id",a),d.p.selrow===S&&(d.p.selrow=a),$.isArray(d.p.selarrrow)){var M=$.inArray(S,d.p.selarrrow);0<=M&&(d.p.selarrrow[M]=a)}if(d.p.multiselect){var N="jqg_"+d.p.id+"_"+a;$("input.cbox",h).attr("id",N).attr("name",N)}}void 0===d.p.inlineData&&(d.p.inlineData={}),m=$.extend({},m,d.p.inlineData,s.extraparam)}if("clientArray"===s.url){m=$.extend({},m,v),d.p.autoencode&&$.each(m,function(e,t){m[e]=$.jgrid.htmlDecode(t)});var O,T=$(d).jqGrid("setRowData",a,m);for($(h).attr("editable","0"),O=0;O<d.p.savedRow.length;O++)if(String(d.p.savedRow[O].id)===String(S)){u=O;break}$(d).triggerHandler("jqGridInlineAfterSaveRow",[a,T,m,s]),$.isFunction(s.aftersavefunc)&&s.aftersavefunc.call(d,a,T,m,s),0<=u&&d.p.savedRow.splice(u,1),f=!0,$(h).removeClass("jqgrid-new-row").off("keydown")}else $(d).jqGrid("progressBar",{method:"show",loadtype:s.saveui,htmlcontent:s.savetext}),(b=$.extend({},m,b))[G]=$.jgrid.stripPref(d.p.idPrefix,b[G]),$.ajax($.extend({url:s.url,data:$.isFunction(d.p.serializeRowData)?d.p.serializeRowData.call(d,b):b,type:s.mtype,async:!1,complete:function(e,t){if($(d).jqGrid("progressBar",{method:"hide",loadtype:s.saveui,htmlcontent:s.savetext}),"success"===t){var r,i,o=!0;if(r=$(d).triggerHandler("jqGridInlineSuccessSaveRow",[e,a,s]),$.isArray(r)||(r=[!0,b]),r[0]&&$.isFunction(s.successfunc)&&(r=s.successfunc.call(d,e)),$.isArray(r)?(o=r[0],m=r[1]||m):o=r,!0===o){for(d.p.autoencode&&$.each(m,function(e,t){m[e]=$.jgrid.htmlDecode(t)}),j&&$.each(m,function(e){"null"===m[e]&&(m[e]="")}),m=$.extend({},m,v),$(d).jqGrid("setRowData",a,m),$(h).attr("editable","0"),i=0;i<d.p.savedRow.length;i++)if(String(d.p.savedRow[i].id)===String(a)){u=i;break}$(d).triggerHandler("jqGridInlineAfterSaveRow",[a,e,m,s]),$.isFunction(s.aftersavefunc)&&s.aftersavefunc.call(d,a,e,m,s),0<=u&&d.p.savedRow.splice(u,1),f=!0,$(h).removeClass("jqgrid-new-row").off("keydown")}else $(d).triggerHandler("jqGridInlineErrorSaveRow",[a,e,t,null,s]),$.isFunction(s.errorfunc)&&s.errorfunc.call(d,a,e,t,null),!0===s.restoreAfterError&&$(d).jqGrid("restoreRow",a,s)}},error:function(e,t,r){if($("#lui_"+$.jgrid.jqID(d.p.id)).hide(),$(d).triggerHandler("jqGridInlineErrorSaveRow",[a,e,t,r,s]),$.isFunction(s.errorfunc))s.errorfunc.call(d,a,e,t,r);else{var i=e.responseText||e.statusText;try{$.jgrid.info_dialog(w.errcap,'<div class="'+y+'">'+i+"</div>",_.bClose,{buttonalign:"right",styleUI:d.p.styleUI})}catch(e){alert(i)}}!0===s.restoreAfterError&&$(d).jqGrid("restoreRow",a,s)}},$.jgrid.ajaxOptions,d.p.ajaxRowOptions||{}))}return f}},restoreRow:function(n,e){var t=$.makeArray(arguments).slice(1),l={};return"object"===$.type(t[0])?l=t[0]:$.isFunction(e)&&(l.afterrestorefunc=e),l=$.extend(!0,{},$.jgrid.inlineEdit,l),this.each(function(){var e,t,r=this,i=-1,o={};if(r.grid&&!1!==(e=$(r).jqGrid("getInd",n,!0))){var a=$.isFunction(l.beforeCancelRow)?l.beforeCancelRow.call(r,l,n):void 0;if(void 0===a&&(a=!0),a){for(t=0;t<r.p.savedRow.length;t++)if(String(r.p.savedRow[t].id)===String(n)){i=t;break}if(0<=i){if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker","#"+$.jgrid.jqID(e.id)).datepicker("hide")}catch(e){}$.each(r.p.colModel,function(){r.p.savedRow[i].hasOwnProperty(this.name)&&(o[this.name]=r.p.savedRow[i][this.name])}),$(r).jqGrid("setRowData",n,o),$(e).attr("editable","0").off("keydown"),r.p.savedRow.splice(i,1),$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(r.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){$(r).jqGrid("delRowData",n),$(r).jqGrid("showAddEditButtons")},0)}$(r).triggerHandler("jqGridInlineAfterRestoreRow",[n]),$.isFunction(l.afterrestorefunc)&&l.afterrestorefunc.call(r,n)}}})},addRow:function(o){return o=$.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},o||{}),this.each(function(){if(this.grid){var r=this;r.p.beforeAction=!0;var e=$.isFunction(o.beforeAddRow)?o.beforeAddRow.call(r,o.addRowParams):void 0;if(void 0===e&&(e=!0),e)if(o.rowID=$.isFunction(o.rowID)?o.rowID.call(r,o):null!=o.rowID?o.rowID:$.jgrid.randId(),!0===o.useDefValues&&$(r.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var e=this.editoptions.defaultValue,t=$.isFunction(e)?e.call(r):e;o.initdata[this.name]=t}}),$(r).jqGrid("addRowData",o.rowID,o.initdata,o.position),o.rowID=r.p.idPrefix+o.rowID,$("#"+$.jgrid.jqID(o.rowID),"#"+$.jgrid.jqID(r.p.id)).addClass("jqgrid-new-row"),o.useFormatter)$("#"+$.jgrid.jqID(o.rowID)+" .ui-inline-edit","#"+$.jgrid.jqID(r.p.id)).click();else{var t=r.p.prmNames,i=t.oper;o.addRowParams.extraparam[i]=t.addoper,$(r).jqGrid("editRow",o.rowID,o.addRowParams),$(r).jqGrid("setSelection",o.rowID)}else r.p.beforeAction=!1}})},inlineNav:function(a,n){var l=this[0],s=$.jgrid.getRegional(l,"nav"),e=$.jgrid.styleUI[l.p.styleUI].inlinedit;return n=$.extend(!0,{edit:!0,editicon:e.icon_edit_nav,add:!0,addicon:e.icon_add_nav,save:!0,saveicon:e.icon_save_nav,cancel:!0,cancelicon:e.icon_cancel_nav,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0,saveAfterSelect:!1},s,n||{}),this.each(function(){if(this.grid&&!this.p.inlineNav){var o=$.jgrid.jqID(l.p.id),t=$.trim($(l).jqGrid("getStyleUI",l.p.styleUI+".common","disabled",!0));if(l.p.navGrid||$(l).jqGrid("navGrid",a,{refresh:!1,edit:!1,add:!1,del:!1,search:!1,view:!1}),$(l).data("inlineNav")||$(l).data("inlineNav",n),l.p.force_regional&&(n=$.extend(n,s)),(l.p.inlineNav=!0)===n.addParams.useFormatter){var e,r=l.p.colModel;for(e=0;e<r.length;e++)if(r[e].formatter&&"actions"===r[e].formatter){if(r[e].formatoptions){var i=$.extend({keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},r[e].formatoptions);n.addParams.addRowParams={keys:i.keys,oneditfunc:i.onEdit,successfunc:i.onSuccess,url:i.url,extraparam:i.extraparam,aftersavefunc:i.afterSave,errorfunc:i.onError,afterrestorefunc:i.afterRestore}}break}}n.add&&$(l).jqGrid("navButtonAdd",a,{caption:n.addtext,title:n.addtitle,buttonicon:n.addicon,id:l.p.id+"_iladd",internal:!0,onClickButton:function(){void 0===l.p.beforeAction&&(l.p.beforeAction=!0),$(l).jqGrid("addRow",n.addParams),!n.addParams.useFormatter&&l.p.beforeAction&&($("#"+o+"_ilsave").removeClass(t),$("#"+o+"_ilcancel").removeClass(t),$("#"+o+"_iladd").addClass(t),$("#"+o+"_iledit").addClass(t))}}),n.edit&&$(l).jqGrid("navButtonAdd",a,{caption:n.edittext,title:n.edittitle,buttonicon:n.editicon,id:l.p.id+"_iledit",internal:!0,onClickButton:function(){var e=$(l).jqGrid("getGridParam","selrow");e?(void 0===l.p.beforeAction&&(l.p.beforeAction=!0),$(l).jqGrid("editRow",e,n.editParams),l.p.beforeAction&&($("#"+o+"_ilsave").removeClass(t),$("#"+o+"_ilcancel").removeClass(t),$("#"+o+"_iladd").addClass(t),$("#"+o+"_iledit").addClass(t))):($.jgrid.viewModal("#alertmod_"+o,{gbox:"#gbox_"+o,jqm:!0}),$("#jqg_alrt").focus())}}),n.save&&($(l).jqGrid("navButtonAdd",a,{caption:n.savetext||"",title:n.savetitle||"Save row",buttonicon:n.saveicon,id:l.p.id+"_ilsave",internal:!0,onClickButton:function(){var e=l.p.savedRow[0].id;if(e){var t=l.p.prmNames,r=t.oper,i=n.editParams;$("#"+$.jgrid.jqID(e),"#"+o).hasClass("jqgrid-new-row")?(n.addParams.addRowParams.extraparam[r]=t.addoper,i=n.addParams.addRowParams):(n.editParams.extraparam||(n.editParams.extraparam={}),n.editParams.extraparam[r]=t.editoper),$(l).jqGrid("saveRow",e,i)&&$(l).jqGrid("showAddEditButtons")}else $.jgrid.viewModal("#alertmod_"+o,{gbox:"#gbox_"+o,jqm:!0}),$("#jqg_alrt").focus()}}),$("#"+o+"_ilsave").addClass(t)),n.cancel&&($(l).jqGrid("navButtonAdd",a,{caption:n.canceltext||"",title:n.canceltitle||"Cancel row editing",buttonicon:n.cancelicon,id:l.p.id+"_ilcancel",internal:!0,onClickButton:function(){var e=l.p.savedRow[0].id,t=n.editParams;e?($("#"+$.jgrid.jqID(e),"#"+o).hasClass("jqgrid-new-row")&&(t=n.addParams.addRowParams),$(l).jqGrid("restoreRow",e,t),$(l).jqGrid("showAddEditButtons")):($.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+o,jqm:!0}),$("#jqg_alrt").focus())}}),$("#"+o+"_ilcancel").addClass(t)),!0!==n.restoreAfterSelect&&!0!==n.saveAfterSelect||$(l).on("jqGridBeforeSelectRow.inlineNav",function(e,t){if(0<l.p.savedRow.length&&!0===l.p.inlineNav&&t!==l.p.selrow&&null!==l.p.selrow){var r=!0;l.p.selrow===n.addParams.rowID?$(l).jqGrid("delRowData",l.p.selrow):!0===n.restoreAfterSelect?$(l).jqGrid("restoreRow",l.p.selrow,n.editParams):r=$(l).jqGrid("saveRow",l.p.selrow,n.editParams),r&&$(l).jqGrid("showAddEditButtons")}})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var e=$.jgrid.jqID(this.p.id),t=$.trim($(this).jqGrid("getStyleUI",this.p.styleUI+".common","disabled",!0));$("#"+e+"_ilsave").addClass(t),$("#"+e+"_ilcancel").addClass(t),$("#"+e+"_iladd").removeClass(t),$("#"+e+"_iledit").removeClass(t)}})},showSaveCancelButtons:function(){return this.each(function(){if(this.grid){var e=$.jgrid.jqID(this.p.id),t=$.trim($(this).jqGrid("getStyleUI",this.p.styleUI+".common","disabled",!0));$("#"+e+"_ilsave").removeClass(t),$("#"+e+"_ilcancel").removeClass(t),$("#"+e+"_iladd").addClass(t),$("#"+e+"_iledit").addClass(t)}})}}),$.jgrid.msie()&&8===$.jgrid.msiever()&&($.expr[":"].hidden=function(e){return 0===e.offsetWidth||0===e.offsetHeight||"none"===e.style.display}),$.jgrid._multiselect=!1,$.ui&&$.ui.multiselect){if($.ui.multiselect.prototype._setSelected){var setSelected=$.ui.multiselect.prototype._setSelected;$.ui.multiselect.prototype._setSelected=function(e,t){var r=setSelected.call(this,e,t);if(t&&this.selectedList){var i=this.element;this.selectedList.find("li").each(function(){$(this).data("optionLink")&&$(this).data("optionLink").remove().appendTo(i)})}return r}}$.ui.multiselect.prototype.destroy&&($.ui.multiselect.prototype.destroy=function(){this.element.show(),this.container.remove(),void 0===$.Widget?$.widget.prototype.destroy.apply(this,arguments):$.Widget.prototype.destroy.apply(this,arguments)}),$.jgrid._multiselect=!0}function _pivotfilter(e,t){var r,i,o,a=[];if(!this||"function"!=typeof e||e instanceof RegExp)throw new TypeError;for(o=this.length,r=0;r<o;r++)if(this.hasOwnProperty(r)&&(i=this[r],e.call(t,i,r,this))){a.push(i);break}return a}$.jgrid.extend({sortableColumns:function(p){return this.each(function(){var s=this,e=$.jgrid.jqID(s.p.id),t=!1;function r(){s.p.disableClick=!0,s.p.frozenColumns&&($(s).jqGrid("destroyFrozenColumns"),t=!0)}function i(){setTimeout(function(){s.p.disableClick=!1,t&&($(s).jqGrid("setFrozenColumns"),t=!1)},50)}var o={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+e+"_cb,#jqgh_"+e+"_rn,#jqgh_"+e+"_subgrid),:hidden)",placeholder:{element:function(e){return $(document.createElement(e[0].nodeName)).addClass(e[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(e,t){t.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),t.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}},update:function(e,t){var r=$(t.item).parent(),i=$(">th",r),o=s.p.colModel,a={},n=s.p.id+"_";$.each(o,function(e){a[this.name]=e});var l=[];i.each(function(){var e=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(n,"");a.hasOwnProperty(e)&&l.push(a[e])}),$(s).jqGrid("remapColumns",l,!0,!0),$.isFunction(s.p.sortable.update)&&s.p.sortable.update(l)}};if(s.p.sortable.options?$.extend(o,s.p.sortable.options):$.isFunction(s.p.sortable)&&(s.p.sortable={update:s.p.sortable}),o.start){var a=o.start;o.start=function(e,t){r(),a.call(this,e,t)}}else o.start=r;if(o.stop){var n=o.stop;o.stop=function(e,t){i(),n.call(this,e,t)}}else o.stop=i;s.p.sortable.exclude&&(o.items+=":not("+s.p.sortable.exclude+")");var l=p.sortable(o),d=l.data("sortable")||l.data("uiSortable");null!=d&&(d.data("sortable").floating=!0)})},columnChooser:function(t){var r,i,e,o,a,n,l,s=this,d={},p=[],c=s.jqGrid("getGridParam","colModel"),u=s.jqGrid("getGridParam","colNames"),g=function(e){return $.ui.multiselect.prototype&&e.data($.ui.multiselect.prototype.widgetFullName||$.ui.multiselect.prototype.widgetName)||e.data("ui-multiselect")||e.data("multiselect")},h=$.jgrid.getRegional(this[0],"col");if(!$("#colchooser_"+$.jgrid.jqID(s[0].p.id)).length){if(r=$('<div id="colchooser_'+s[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),i=$("select",r),t=$.extend({width:400,height:240,classname:null,done:function(e){e&&s.jqGrid("remapColumns",e,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(e){var t={};return t[e.bSubmit]=function(){e.apply_perm(),e.cleanup(!1)},t[e.bCancel]=function(){e.cleanup(!0)},$.extend(!0,{buttons:t,close:function(){e.cleanup(!0)},modal:e.modal||!1,resizable:e.resizable||!0,width:e.width+70,resize:v},e.dialog_opts||{})},apply_perm:function(){var n=[];$("option",i).each(function(){$(this).is(":selected")?s.jqGrid("showCol",c[this.value].name):s.jqGrid("hideCol",c[this.value].name)}),$("option[selected]",i).each(function(){n.push(parseInt(this.value,10))}),$.each(n,function(){delete d[c[parseInt(this,10)].name]}),$.each(d,function(){var e,t,r,i,o,a=parseInt(this,10);e=n,r=t=a,n=0<=t?(o=(i=e.slice()).splice(t,Math.max(e.length-t,t)),t>e.length&&(t=e.length),i[t]=r,i.concat(o)):e}),t.done&&t.done.call(s,n),s.jqGrid("setGridWidth",s[0].p.width,s[0].p.shrinkToFit)},cleanup:function(e){m(t.dlog,r,"destroy"),m(t.msel,i,"destroy"),r.remove(),e&&t.done&&t.done.call(s)},msel_opts:{}},h,t||{}),$.ui&&$.ui.multiselect&&$.ui.multiselect.defaults){if(!$.jgrid._multiselect)return void alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");t.msel_opts=$.extend($.ui.multiselect.defaults,t.msel_opts)}t.caption&&r.attr("title",t.caption),t.classname&&(r.addClass(t.classname),i.addClass(t.classname)),t.width&&($(">div",r).css({width:t.width,margin:"0 auto"}),i.css("width",t.width)),t.height&&($(">div",r).css("height",t.height),i.css("height",t.height-10)),i.empty(),$.each(c,function(e){d[this.name]=e,this.hidedlg?this.hidden||p.push(e):i.append("<option value='"+e+"' "+(this.hidden?"":"selected='selected'")+">"+$.jgrid.stripHtml(u[e])+"</option>")}),e=$.isFunction(t.dlog_opts)?t.dlog_opts.call(s,t):t.dlog_opts,m(t.dlog,r,e),o=$.isFunction(t.msel_opts)?t.msel_opts.call(s,t):t.msel_opts,m(t.msel,i,o),a=$("#colchooser_"+$.jgrid.jqID(s[0].p.id));var f=$(".ui-jqgrid").css("font-size")||"11px";a.parent().css("font-size",f),a.css({margin:"auto"}),a.find(">div").css({width:"100%",height:"100%",margin:"auto"}),(n=g(i)).container.css({width:"100%",height:"100%",margin:"auto"}),n.selectedContainer.css({width:100*n.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),n.availableContainer.css({width:100-100*n.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),n.selectedList.css("height","auto"),n.availableList.css("height","auto"),l=Math.max(n.selectedList.height(),n.availableList.height()),l=Math.min(l,$(window).height()),n.selectedList.css("height",l),n.availableList.css("height",l),v()}function m(e,t){e&&("string"==typeof e?$.fn[e]&&$.fn[e].apply(t,$.makeArray(arguments).slice(2)):$.isFunction(e)&&e.apply(t,$.makeArray(arguments).slice(2)))}function v(){var e=g(i),t=e.container.closest(".ui-dialog-content");0<t.length&&"object"==typeof t[0].style?t[0].style.width="":t.css("width",""),e.selectedList.height(Math.max(e.selectedContainer.height()-e.selectedActions.outerHeight()-1,1)),e.availableList.height(Math.max(e.availableContainer.height()-e.availableActions.outerHeight()-1,1))}},sortableRows:function(o){return this.each(function(){var i=this;i.grid&&(i.p.treeGrid||$.fn.sortable&&((o=$.extend({cursor:"move",axis:"y",items:" > .jqgrow"},o||{})).start&&$.isFunction(o.start)?(o._start_=o.start,delete o.start):o._start_=!1,o.update&&$.isFunction(o.update)?(o._update_=o.update,delete o.update):o._update_=!1,o.start=function(e,t){if($(t.item).css("border-width","0"),$("td",t.item).each(function(e){this.style.width=i.grid.cols[e].style.width}),i.p.subGrid){var r=$(t.item).attr("id");try{$(i).jqGrid("collapseSubGridRow",r)}catch(e){}}o._start_&&o._start_.apply(this,[e,t])},o.update=function(e,t){$(t.item).css("border-width",""),!0===i.p.rownumbers&&$("td.jqgrid-rownum",i.rows).each(function(e){$(this).html(e+1+(parseInt(i.p.page,10)-1)*parseInt(i.p.rowNum,10))}),o._update_&&o._update_.apply(this,[e,t])},$("tbody:first",i).sortable(o),$("tbody:first > .jqgrow",i).disableSelection()))})},gridDnD:function(i){return this.each(function(){var e,t,a=this;if(a.grid&&!a.p.treeGrid&&$.fn.draggable&&$.fn.droppable){var h;if(void 0===$("#jqgrid_dnd")[0]&&$("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>"),"string"!=typeof i||"updateDnD"!==i||!0!==a.p.jqgdnd){if((i=$.extend({drag:function(o){return $.extend({start:function(e,t){var r,i;if(a.p.subGrid){i=$(t.helper).attr("id");try{$(a).jqGrid("collapseSubGridRow",i)}catch(e){}}for(r=0;r<$.data(a,"dnd").connectWith.length;r++)0===$($.data(a,"dnd").connectWith[r]).jqGrid("getGridParam","reccount")&&$($.data(a,"dnd").connectWith[r]).jqGrid("addRowData","jqg_empty_row",{});t.helper.addClass("ui-state-highlight"),$("td",t.helper).each(function(e){this.style.width=a.grid.headers[e].width+"px"}),o.onstart&&$.isFunction(o.onstart)&&o.onstart.call($(a),e,t)},stop:function(e,t){var r,i;for(t.helper.dropped&&!o.dragcopy&&(void 0===(i=$(t.helper).attr("id"))&&(i=$(this).attr("id")),$(a).jqGrid("delRowData",i)),r=0;r<$.data(a,"dnd").connectWith.length;r++)$($.data(a,"dnd").connectWith[r]).jqGrid("delRowData","jqg_empty_row");o.onstop&&$.isFunction(o.onstop)&&o.onstop.call($(a),e,t)}},o.drag_opts||{})},drop:function(g){return $.extend({accept:function(e){if(!$(e).hasClass("jqgrow"))return e;h=$(e).closest("table.ui-jqgrid-btable");var t=$(this).find("table.ui-jqgrid-btable:first")[0];if(0<h.length&&void 0!==$.data(h[0],"dnd")){var r=$.data(h[0],"dnd").connectWith;return-1!==$.inArray("#"+$.jgrid.jqID(t.id),r)}return!1},drop:function(e,t){if($(t.draggable).hasClass("jqgrow")){var r,i=$(t.draggable).attr("id"),o=t.draggable.parent().parent().jqGrid("getRowData",i),a=[],n=$(this).find("table.ui-jqgrid-btable:first")[0];if($.isPlainObject(o)&&(a=Object.keys(o)),!g.dropbyname){var l,s,d={},p=0,c=$("#"+$.jgrid.jqID(n.id)).jqGrid("getGridParam","colModel");try{for(l=0;l<c.length;l++)"cb"!==(s=c[l].name)&&"rn"!==s&&"subgrid"!==s&&(void 0!==a[p]&&(d[s]=o[a[p]]),p++);o=d}catch(e){}}if(t.helper.dropped=!0,$.data(h[0],"dnd").beforedrop&&$.isFunction($.data(h[0],"dnd").beforedrop)){var u=$.data(h[0],"dnd").beforedrop.call(n,e,t,o,$(h[0]),$(n));null!=u&&"object"==typeof u&&(o=u)}if(t.helper.dropped)g.autoid&&($.isFunction(g.autoid)?r=g.autoid.call(n,o):(r=Math.ceil(1e3*Math.random()),r=g.autoidprefix+r)),$("#"+$.jgrid.jqID(n.id)).jqGrid("addRowData",r,o,g.droppos);g.ondrop&&$.isFunction(g.ondrop)&&g.ondrop.call(n,e,t,o)}}},g.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover",tolerance:"intersect"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},i||{})).connectWith)for(i.connectWith=i.connectWith.split(","),i.connectWith=$.map(i.connectWith,function(e){return $.trim(e)}),$.data(a,"dnd",i),0===a.p.reccount||a.p.jqgdnd||r(),a.p.jqgdnd=!0,e=0;e<i.connectWith.length;e++)t=i.connectWith[e],$(t).closest(".ui-jqgrid-bdiv").droppable($.isFunction(i.drop)?i.drop.call($(a),i):i.drop)}else r()}function r(){var e=$.data(a,"dnd");$("tr.jqgrow:not(.ui-draggable)",a).draggable($.isFunction(e.drag)?e.drag.call($(a),e):e.drag)}})},gridResize:function(opts){return this.each(function(){var $t=this,gID=$.jgrid.jqID($t.p.id),req;if($t.grid&&$.fn.resizable){if(opts=$.extend({},opts||{}),opts.alsoResize?(opts._alsoResize_=opts.alsoResize,delete opts.alsoResize):opts._alsoResize_=!1,opts.stop&&$.isFunction(opts.stop)?(opts._stop_=opts.stop,delete opts.stop):opts._stop_=!1,opts.stop=function(e,t){$($t).jqGrid("setGridParam",{height:$("#gview_"+gID+" .ui-jqgrid-bdiv").height()}),$($t).jqGrid("setGridWidth",t.size.width,opts.shrinkToFit),opts._stop_&&opts._stop_.call($t,e,t),$t.p.caption&&$("#gbox_"+gID).css({height:"auto"}),$t.p.frozenColumns&&(req&&clearTimeout(req),req=setTimeout(function(){req&&clearTimeout(req),$("#"+gID).jqGrid("destroyFrozenColumns"),$("#"+gID).jqGrid("setFrozenColumns")}))},opts._alsoResize_){var optstest="{'#gview_"+gID+" .ui-jqgrid-bdiv':true,'"+opts._alsoResize_+"':true}";opts.alsoResize=eval("("+optstest+")")}else opts.alsoResize=$(".ui-jqgrid-bdiv","#gview_"+gID);delete opts._alsoResize_,$("#gbox_"+gID).resizable(opts)}})}}),$.assocArraySize=function(e){var t,r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r},$.jgrid.extend({pivotSetup:function(O,e){var T=[],A=[],P=[],E=[],B=[],z={grouping:!0,groupingView:{groupField:[],groupSummary:[],groupSummaryPos:[]}},U=[],H=$.extend({rowTotals:!1,rowTotalsText:"Total",colTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1},e||{});return this.each(function(){var e,m,t,u,g,h,r,i,o,n=this,a=O.length,l=0;function s(e,t){var r,i=0,o=!0;for(r in e)if(e.hasOwnProperty(r)){if(e[r]!=this[i]){o=!1;break}if(++i>=this.length)break}return o&&(m=t),o}function v(e,t,r,i,o){var a;if($.isFunction(e))a=e.call(n,t,r,i);else switch(e){case"sum":a=parseFloat(t||0)+parseFloat(i[r]||0);break;case"count":""!==t&&null!=t||(t=0),a=i.hasOwnProperty(r)?t+1:0;break;case"min":a=""===t||null==t?parseFloat(i[r]||0):Math.min(parseFloat(t),parseFloat(i[r]||0));break;case"max":a=""===t||null==t?parseFloat(i[r]||0):Math.max(parseFloat(t),parseFloat(i[r]||0));break;case"avg":a=(parseFloat(t||0)*(o-1)+parseFloat(i[r]||0))/o}return a}function d(e,t,r,i){var o,a,n,l,s,d,p=t.length,c="",u=[],g=1;for($.isArray(r)?(l=r.length,u=r):(l=1,u[0]=r),B=[],n=(E=[]).root=0;n<l;n++){var h,f=[];for(o=0;o<p;o++){if(s="string"==typeof t[o].aggregator?t[o].aggregator:"cust",null==r)h=a=$.trim(t[o].member)+"_"+s,u[0]=t[o].label||s+" "+$.trim(t[o].member);else{h=r[n].replace(/\s+/g,"");try{a=1===p?c+h:c+h+"_"+s+"_"+String(o)}catch(e){}u[n]=r[n]}a=isNaN(parseInt(a,10))?a:a+" ","avg"===t[o].aggregator&&(d=-1===m?A.length+"_"+a:m+"_"+a,_[d]?_[d]++:_[d]=1,g=_[d]),i[a]=f[a]=v(t[o].aggregator,i[a],t[o].member,e,g)}c+=r&&null!=r[n]?r[n].replace(/\s+/g,""):"",E[a]=f,B[a]=u[n]}return i}if(H.rowTotals&&0<H.yDimension.length){var p=H.yDimension[0].dataName;H.yDimension.splice(0,0,{dataName:p}),H.yDimension[0].converter=function(){return"_r_Totals"}}if(u=$.isArray(H.xDimension)?H.xDimension.length:0,g=H.yDimension.length,h=$.isArray(H.aggregates)?H.aggregates.length:0,0===u||0===h)throw"xDimension or aggregates optiona are not set!";for(t=0;t<u;t++)o={name:H.xDimension[t].dataName,frozen:H.frozenStaticCols},null==H.xDimension[t].isGroupField&&(H.xDimension[t].isGroupField=!0),o=$.extend(!0,o,H.xDimension[t]),T.push(o);for(var c,f,b,j,y=u-1,w={},_=[];l<a;){e=O[l];var x=[],q=[];for(r={},t=0;x[t]=$.trim(e[H.xDimension[t].dataName]),r[H.xDimension[t].dataName]=x[t],++t<u;);var I=0;if(m=-1,c=A,f=s,b=x,j=void 0,i=0<(j=_pivotfilter.call(c,f,b)).length?j[0]:null){if(0<=m){if(I=0,1<=g){for(I=0;I<g;I++)q[I]=$.trim(e[H.yDimension[I].dataName]),H.yDimension[I].converter&&$.isFunction(H.yDimension[I].converter)&&(q[I]=H.yDimension[I].converter.call(this,q[I],x,q));i=d(e,H.aggregates,q,i)}else 0===g&&(i=d(e,H.aggregates,null,i));A[m]=i}}else{if(I=0,1<=g){for(I=0;I<g;I++)q[I]=$.trim(e[H.yDimension[I].dataName]),H.yDimension[I].converter&&$.isFunction(H.yDimension[I].converter)&&(q[I]=H.yDimension[I].converter.call(this,q[I],x,q));r=d(e,H.aggregates,q,r)}else 0===g&&(r=d(e,H.aggregates,null,r));A.push(r)}var D,C=0,F=null,G=null;for(D in E)if(E.hasOwnProperty(D)){if(0===C)w.children&&void 0!==w.children||(w={text:D,level:0,children:[],label:D}),F=w.children;else{for(G=null,t=0;t<F.length;t++)if(F[t].text===D){G=F[t];break}G?F=G.children:(F.push({children:[],text:D,level:C,fields:E[D],label:B[D]}),F=F[F.length-1].children)}C++}l++}_=null;var k,S=[],R=T.length,M=R;if(0<g&&(U[g-1]={useColSpanStyle:!1,groupHeaders:[]}),function e(t){var r,i,o,a,n;for(o in t)if(t.hasOwnProperty(o)){if("object"!=typeof t[o]){if("level"===o){if(void 0===S[t.level]&&(S[t.level]="",0<t.level&&-1===t.text.indexOf("_r_Totals")&&(U[t.level-1]={useColSpanStyle:!1,groupHeaders:[]})),S[t.level]!==t.text&&t.children.length&&-1===t.text.indexOf("_r_Totals")&&0<t.level){U[t.level-1].groupHeaders.push({titleText:t.label,numberOfColumns:0});var l=U[t.level-1].groupHeaders.length-1,s=0===l?M:R;if(t.level-1==(H.rowTotals?1:0)&&0<l){for(var d=0,p=0;p<l;p++)d+=U[t.level-1].groupHeaders[p].numberOfColumns;d&&(s=d+u)}T[s]&&(U[t.level-1].groupHeaders[l].startColumnName=T[s].name,U[t.level-1].groupHeaders[l].numberOfColumns=T.length-s),R=T.length}S[t.level]=t.text}if(t.level===g&&"level"===o&&0<g)if(1<h){var c=1;for(r in t.fields)t.fields.hasOwnProperty(r)&&(1===c&&U[g-1].groupHeaders.push({startColumnName:r,numberOfColumns:1,titleText:t.label||t.text}),c++);U[g-1].groupHeaders[U[g-1].groupHeaders.length-1].numberOfColumns=c-1}else U.splice(g-1,1)}if(null!=t[o]&&"object"==typeof t[o]&&e(t[o]),"level"===o&&0<t.level&&(t.level===(0===g?t.level:g)||-1!==S[t.level].indexOf("_r_Totals")))for(r in i=0,t.fields)if(t.fields.hasOwnProperty(r)){for(a in n={},H.aggregates[i])if(H.aggregates[i].hasOwnProperty(a))switch(a){case"member":case"label":case"aggregator":break;default:n[a]=H.aggregates[i][a]}1<h?(n.name=r,n.label=H.aggregates[i].label||t.label):(n.name=t.text,n.label="_r_Totals"===t.text?H.rowTotalsText:t.label),T.push(n),i++}}}(w),H.colTotals)for(var N=A.length;N--;)for(t=u;t<T.length;t++)k=T[t].name,P[k]?P[k]+=parseFloat(A[N][k]||0):P[k]=parseFloat(A[N][k]||0);if(0<y)for(t=0;t<y;t++)T[t].isGroupField&&(z.groupingView.groupField.push(T[t].name),z.groupingView.groupSummary.push(H.groupSummary),z.groupingView.groupSummaryPos.push(H.groupSummaryPos));else z.grouping=!1;z.sortname=T[y].name,z.groupingView.hideFirstGroupCol=!0}),{colModel:T,rows:A,groupOptions:z,groupHeaders:U,summary:P}},jqPivot:function(e,p,c,r){return this.each(function(){var d=this;function t(e){$.isArray(e)||(e=[]);var t,r,i,o,a=jQuery(d).jqGrid("pivotSetup",e,p),n=0<$.assocArraySize(a.summary),l=$.jgrid.from.call(d,a.rows);for(p.ignoreCase&&(l=l.ignoreCase()),t=0;t<a.groupOptions.groupingView.groupField.length;t++)r=p.xDimension[t].sortorder?p.xDimension[t].sortorder:"asc",i=p.xDimension[t].sorttype?p.xDimension[t].sorttype:"text",l.orderBy(a.groupOptions.groupingView.groupField[t],r,i,"",i);if(o=p.xDimension.length,c.sortname){for(r=c.sortorder?c.sortorder:"asc",i="text",t=0;t<o;t++)if(p.xDimension[t].dataName===c.sortname){i=p.xDimension[t].sorttype?p.xDimension[t].sorttype:"text";break}l.orderBy(c.sortname,r,i,"",i)}else a.groupOptions.sortname&&o&&(r=p.xDimension[o-1].sortorder?p.xDimension[o-1].sortorder:"asc",i=p.xDimension[o-1].sorttype?p.xDimension[o-1].sorttype:"text",l.orderBy(a.groupOptions.sortname,r,i,"",i));jQuery(d).jqGrid($.extend(!0,{datastr:$.extend(l.select(),n?{userdata:a.summary}:{}),datatype:"jsonstring",footerrow:n,userDataOnFooter:n,colModel:a.colModel,viewrecords:!0,sortname:p.xDimension[0].dataName},a.groupOptions,c||{}));var s=a.groupHeaders;if(s.length)for(t=0;t<s.length;t++)s[t]&&s[t].groupHeaders.length&&jQuery(d).jqGrid("setGroupHeaders",s[t]);p.frozenStaticCols&&jQuery(d).jqGrid("setFrozenColumns")}"string"==typeof e?$.ajax($.extend({url:e,dataType:"json",success:function(e){t($.jgrid.getAccessor(e,r&&r.reader?r.reader:"rows"))}},r||{})):t(e)})}}),$.jgrid.extend({setSubGrid:function(){return this.each(function(){var e,t,r=this,i=$.jgrid.styleUI[r.p.styleUI||"jQueryUI"].subgrid,o={plusicon:i.icon_plus,minusicon:i.icon_minus,openicon:i.icon_open,expandOnLoad:!1,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0};if(r.p.subGridOptions=$.extend(o,r.p.subGridOptions||{}),r.p.colNames.unshift(""),r.p.colModel.unshift({name:"subgrid",width:$.jgrid.cell_width?r.p.subGridWidth+r.p.cellLayout:r.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0}),(e=r.p.subGridModel)[0])for(e[0].align=$.extend([],e[0].align||[]),t=0;t<e[0].name.length;t++)e[0].align[t]=e[0].align[t]||"left"})},addSubGridCell:function(e,t){var r,i,o,a="";return this.each(function(){a=this.formatCol(e,t),i=this.p.id,r=this.p.subGridOptions.plusicon,o=$.jgrid.styleUI[this.p.styleUI||"jQueryUI"].common}),'<td role="gridcell" aria-describedby="'+i+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+a+"><a style='cursor:pointer;' class='ui-sghref'><span class='"+o.icon_base+" "+r+"'></span></a></td>"},addSubGrid:function(b,j){return this.each(function(){var u=this;if(u.grid){var t,r,i,o,a,g=$.jgrid.styleUI[u.p.styleUI||"jQueryUI"].base,h=$.jgrid.styleUI[u.p.styleUI||"jQueryUI"].common,f=function(e,t,r){var i=$("<td align='"+u.p.subGridModel[0].align[r]+"'></td>").html(t);$(e).append(i)},n=function(e,t){var r,i,o,a=$("<table class='"+g.rowTable+" ui-common-table'><tbody></tbody></table>"),n=$("<tr></tr>");for(i=0;i<u.p.subGridModel[0].name.length;i++)r=$("<th class='"+g.headerBox+" ui-th-subgrid ui-th-column ui-th-"+u.p.direction+"'></th>"),$(r).html(u.p.subGridModel[0].name[i]),$(r).width(u.p.subGridModel[0].width[i]),$(n).append(r);$(a).append(n),e&&(o=u.p.xmlReader.subgrid,$(o.root+" "+o.row,e).each(function(){if(n=$("<tr class='"+h.content+" ui-subtblcell'></tr>"),!0===o.repeatitems)$(o.cell,this).each(function(e){f(n,$(this).text()||"&#160;",e)});else{var e=u.p.subGridModel[0].mapping||u.p.subGridModel[0].name;if(e)for(i=0;i<e.length;i++)f(n,$(e[i],this).text()||"&#160;",i)}$(a).append(n)}));var l=$("table:first",u.grid.bDiv).attr("id")+"_";return $("#"+$.jgrid.jqID(l+t)).append(a),u.grid.hDiv.loading=!1,$("#load_"+$.jgrid.jqID(u.p.id)).hide(),!1},l=function(e,t){var r,i,o,a,n,l,s=$("<table class='"+g.rowTable+" ui-common-table'><tbody></tbody></table>"),d=$("<tr></tr>");for(o=0;o<u.p.subGridModel[0].name.length;o++)r=$("<th class='"+g.headerBox+" ui-th-subgrid ui-th-column ui-th-"+u.p.direction+"'></th>"),$(r).html(u.p.subGridModel[0].name[o]),$(r).width(u.p.subGridModel[0].width[o]),$(d).append(r);if($(s).append(d),e&&(n=u.p.jsonReader.subgrid,void 0!==(i=$.jgrid.getAccessor(e,n.root))))for(o=0;o<i.length;o++){if(a=i[o],d=$("<tr class='"+h.content+" ui-subtblcell'></tr>"),!0===n.repeatitems)for(n.cell&&(a=a[n.cell]),l=0;l<a.length;l++)f(d,a[l]||"&#160;",l);else{var p=u.p.subGridModel[0].mapping||u.p.subGridModel[0].name;if(p.length)for(l=0;l<p.length;l++)f(d,a[p[l]]||"&#160;",l)}$(s).append(d)}var c=$("table:first",u.grid.bDiv).attr("id")+"_";return $("#"+$.jgrid.jqID(c+t)).append(s),u.grid.hDiv.loading=!1,$("#load_"+$.jgrid.jqID(u.p.id)).hide(),!1},s=function(e){var t,r,i,o;if(t=$(e).attr("id"),(r={nd_:(new Date).getTime()})[u.p.prmNames.subgridid]=t,!u.p.subGridModel[0])return!1;if(u.p.subGridModel[0].params)for(o=0;o<u.p.subGridModel[0].params.length;o++)for(i=0;i<u.p.colModel.length;i++)u.p.colModel[i].name===u.p.subGridModel[0].params[o]&&(r[u.p.colModel[i].name]=$("td:eq("+i+")",e).text().replace(/\&#160\;/gi,""));if(!u.grid.hDiv.loading)switch(u.grid.hDiv.loading=!0,$("#load_"+$.jgrid.jqID(u.p.id)).show(),u.p.subgridtype||(u.p.subgridtype=u.p.datatype),$.isFunction(u.p.subgridtype)?u.p.subgridtype.call(u,r):u.p.subgridtype=u.p.subgridtype.toLowerCase(),u.p.subgridtype){case"xml":case"json":$.ajax($.extend({type:u.p.mtype,url:$.isFunction(u.p.subGridUrl)?u.p.subGridUrl.call(u,r):u.p.subGridUrl,dataType:u.p.subgridtype,data:$.isFunction(u.p.serializeSubGridData)?u.p.serializeSubGridData.call(u,r):r,complete:function(e){"xml"===u.p.subgridtype?n(e.responseXML,t):l($.jgrid.parse(e.responseText),t),e=null}},$.jgrid.ajaxOptions,u.p.ajaxSubgridOptions||{}))}return!1},d=0;$.each(u.p.colModel,function(){!0!==this.hidden&&"rn"!==this.name&&"cb"!==this.name||d++});var e,p=u.rows.length,c=1,m=$.isFunction(u.p.isHasSubGrid);for(void 0!==j&&0<j&&(p=(c=j)+1);c<p;)$(u.rows[c]).hasClass("jqgrow")&&(u.p.scroll&&$(u.rows[c].cells[b]).off("click"),e=null,m&&(e=u.p.isHasSubGrid.call(u,u.rows[c].id)),!1===e?u.rows[c].cells[b].innerHTML="":$(u.rows[c].cells[b]).on("click",function(){var e=$(this).parent("tr")[0];if(r=u.p.id,t=e.id,a=$("#"+r+"_"+t+"_expandedContent"),$(this).hasClass("sgcollapsed")){if((o=!1!==(o=$(u).triggerHandler("jqGridSubGridBeforeExpand",[r+"_"+t,t]))&&"stop"!==o)&&$.isFunction(u.p.subGridBeforeExpand)&&(o=u.p.subGridBeforeExpand.call(u,r+"_"+t,t)),!1===o)return!1;!0===u.p.subGridOptions.reloadOnExpand||!1===u.p.subGridOptions.reloadOnExpand&&!a.hasClass("ui-subgrid")?(i=1<=b?"<td colspan='"+b+"'>&#160;</td>":"",$(e).after("<tr role='row' id='"+r+"_"+t+"_expandedContent' class='ui-subgrid ui-sg-expanded'>"+i+"<td class='"+h.content+" subgrid-cell'><span class='"+h.icon_base+" "+u.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(u.p.colNames.length-1-d,10)+"' class='"+h.content+" subgrid-data'><div id="+r+"_"+t+" class='tablediv'></div></td></tr>"),$(u).triggerHandler("jqGridSubGridRowExpanded",[r+"_"+t,t]),$.isFunction(u.p.subGridRowExpanded)?u.p.subGridRowExpanded.call(u,r+"_"+t,t):s(e)):a.show().removeClass("ui-sg-collapsed").addClass("ui-sg-expanded"),$(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+h.icon_base+" "+u.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded"),u.p.subGridOptions.selectOnExpand&&$(u).jqGrid("setSelection",t)}else if($(this).hasClass("sgexpanded")){if((o=!1!==(o=$(u).triggerHandler("jqGridSubGridRowColapsed",[r+"_"+t,t]))&&"stop"!==o)&&$.isFunction(u.p.subGridRowColapsed)&&(o=u.p.subGridRowColapsed.call(u,r+"_"+t,t)),!1===o)return!1;!0===u.p.subGridOptions.reloadOnExpand?a.remove(".ui-subgrid"):a.hasClass("ui-subgrid")&&a.hide().addClass("ui-sg-collapsed").removeClass("ui-sg-expanded"),$(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+h.icon_base+" "+u.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed"),u.p.subGridOptions.selectOnCollapse&&$(u).jqGrid("setSelection",t)}return!1})),c++;if(!0===u.p.subGridOptions.expandOnLoad){var v=0;u.p.multiselect&&v++,u.p.rownumbers&&v++,$(u.rows).filter(".jqgrow").each(function(e,t){$(t.cells[v]).click()})}u.subGridXml=function(e,t){n(e,t)},u.subGridJson=function(e,t){l(e,t)}}})},expandSubGridRow:function(r){return this.each(function(){if((this.grid||r)&&!0===this.p.subGrid){var e=$(this).jqGrid("getInd",r,!0);if(e){var t=$("td.sgcollapsed",e)[0];t&&$(t).trigger("click")}}})},collapseSubGridRow:function(r){return this.each(function(){if((this.grid||r)&&!0===this.p.subGrid){var e=$(this).jqGrid("getInd",r,!0);if(e){var t=$("td.sgexpanded",e)[0];t&&$(t).trigger("click")}}})},toggleSubGridRow:function(r){return this.each(function(){if((this.grid||r)&&!0===this.p.subGrid){var e=$(this).jqGrid("getInd",r,!0);if(e){var t=$("td.sgcollapsed",e)[0];t?$(t).trigger("click"):(t=$("td.sgexpanded",e)[0])&&$(t).trigger("click")}}})}}),$.jgrid.extend({setTreeNode:function(j,y){return this.each(function(){var o=this;if(o.grid&&o.p.treeGrid){var e,t,r,i,a,n,l,s,d=o.p.expColInd,p=o.p.treeReader.expanded_field,c=o.p.treeReader.leaf_field,u=o.p.treeReader.level_field,g=o.p.treeReader.icon_field,h=o.p.treeReader.loaded,f=$.jgrid.styleUI[o.p.styleUI||"jQueryUI"].common,m=j;for($(o).triggerHandler("jqGridBeforeSetTreeNode",[m,y]),$.isFunction(o.p.beforeSetTreeNode)&&o.p.beforeSetTreeNode.call(o,m,y);j<y;){var v=$.jgrid.stripPref(o.p.idPrefix,o.rows[j].id),b=o.p._index[v];l=o.p.data[b],"nested"===o.p.treeGridModel&&(l[c]||(e=parseInt(l[o.p.treeReader.left_field],10),t=parseInt(l[o.p.treeReader.right_field],10),l[c]=t===e+1?"true":"false",o.rows[j].cells[o.p._treeleafpos].innerHTML=l[c])),r=parseInt(l[u],10),0===o.p.tree_root_level?(i=r+1,a=r):a=(i=r)-1,n="<div class='tree-wrap tree-wrap-"+o.p.direction+"' style='width:"+18*i+"px;'>",n+="<div style='"+("rtl"===o.p.direction?"right:":"left:")+18*a+"px;' class='"+f.icon_base+" ",void 0!==l[h]&&("true"===l[h]||!0===l[h]?l[h]=!0:l[h]=!1),"true"===l[c]||!0===l[c]?(n+=(void 0!==l[g]&&""!==l[g]?l[g]:o.p.treeIcons.leaf)+" tree-leaf treeclick",l[c]=!0,s="leaf"):(l[c]=!1,s=""),l[p]=("true"===l[p]||!0===l[p])&&(l[h]||void 0===l[h]),!1===l[p]?n+=!0===l[c]?"'":o.p.treeIcons.plus+" tree-plus treeclick'":n+=!0===l[c]?"'":o.p.treeIcons.minus+" tree-minus treeclick'",n+="></div></div>",$(o.rows[j].cells[d]).wrapInner("<span class='cell-wrapper"+s+"'></span>").prepend(n),r!==parseInt(o.p.tree_root_level,10)&&($(o).jqGrid("isVisibleNode",l)||$(o.rows[j]).css("display","none")),$(o.rows[j].cells[d]).find("div.treeclick").on("click",function(e){var t=e.target||e.srcElement,r=$.jgrid.stripPref(o.p.idPrefix,$(t,o.rows).closest("tr.jqgrow")[0].id),i=o.p._index[r];return o.p.data[i][c]||(o.p.data[i][p]?($(o).jqGrid("collapseRow",o.p.data[i]),$(o).jqGrid("collapseNode",o.p.data[i])):($(o).jqGrid("expandRow",o.p.data[i]),$(o).jqGrid("expandNode",o.p.data[i]))),!1}),!0===o.p.ExpandColClick&&$(o.rows[j].cells[d]).find("span.cell-wrapper").css("cursor","pointer").on("click",function(e){var t=e.target||e.srcElement,r=$.jgrid.stripPref(o.p.idPrefix,$(t,o.rows).closest("tr.jqgrow")[0].id),i=o.p._index[r];return o.p.data[i][c]||(o.p.data[i][p]?($(o).jqGrid("collapseRow",o.p.data[i]),$(o).jqGrid("collapseNode",o.p.data[i])):($(o).jqGrid("expandRow",o.p.data[i]),$(o).jqGrid("expandNode",o.p.data[i]))),$(o).jqGrid("setSelection",r),!1}),j++}$(o).triggerHandler("jqGridAfterSetTreeNode",[m,y]),$.isFunction(o.p.afterSetTreeNode)&&o.p.afterSetTreeNode.call(o,m,y)}})},setTreeGrid:function(){return this.each(function(){var e,t,r,i,o=this,a=0,n=!1,l=[],s=$.jgrid.styleUI[o.p.styleUI||"jQueryUI"].treegrid;if(o.p.treeGrid){for(r in o.p.treedatatype||$.extend(o.p,{treedatatype:o.p.datatype}),o.p.loadonce&&(o.p.treedatatype="local"),o.p.subGrid=!1,o.p.altRows=!1,o.p.treeGrid_bigData||(o.p.pgbuttons=!1,o.p.pginput=!1,o.p.rowList=[]),o.p.gridview=!0,null!==o.p.rowTotal||o.p.treeGrid_bigData||(o.p.rowNum=1e4),o.p.multiselect=!1,o.p.expColInd=0,e=s.icon_plus,"jQueryUI"===o.p.styleUI&&(e+="rtl"===o.p.direction?"w":"e"),o.p.treeIcons=$.extend({plus:e,minus:s.icon_minus,leaf:s.icon_leaf},o.p.treeIcons||{}),"nested"===o.p.treeGridModel?o.p.treeReader=$.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},o.p.treeReader):"adjacency"===o.p.treeGridModel&&(o.p.treeReader=$.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},o.p.treeReader)),o.p.colModel)if(o.p.colModel.hasOwnProperty(r))for(i in(t=o.p.colModel[r].name)!==o.p.ExpandColumn||n||(n=!0,o.p.expColInd=a),a++,o.p.treeReader)o.p.treeReader.hasOwnProperty(i)&&o.p.treeReader[i]===t&&l.push(t);$.each(o.p.treeReader,function(e,t){t&&-1===$.inArray(t,l)&&("leaf_field"===e&&(o.p._treeleafpos=a),a++,o.p.colNames.push(t),o.p.colModel.push({name:t,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(n){this.each(function(){var t=this;if(!t.p.treeGrid_bigData)var e=t.p.lastpage;if(t.grid&&t.p.treeGrid){var r=$(t).jqGrid("getNodeChildren",n),i=t.p.treeReader.expanded_field,o=n[t.p.localReader.id],a=$(t).triggerHandler("jqGridBeforeExpandTreeGridRow",[o,n,r]);void 0===a&&(a=!0),a&&$.isFunction(t.p.beforeExpandTreeGridRow)&&(a=t.p.beforeExpandTreeGridRow.call(t,o,n,r)),!1!==a&&($(r).each(function(){var e=t.p.idPrefix+$.jgrid.getAccessor(this,t.p.localReader.id);$($(t).jqGrid("getGridRowById",e)).css("display",""),this[i]&&$(t).jqGrid("expandRow",this)}),$(t).triggerHandler("jqGridAfterExpandTreeGridRow",[o,n,r]),$.isFunction(t.p.afterExpandTreeGridRow)&&t.p.afterExpandTreeGridRow.call(t,o,n,r),t.p.treeGrid_bigData||(t.p.lastpage=e))}})},collapseRow:function(a){this.each(function(){var t=this;if(t.grid&&t.p.treeGrid){var e=$(t).jqGrid("getNodeChildren",a),r=t.p.treeReader.expanded_field,i=a[t.p.localReader.id],o=$(t).triggerHandler("jqGridBeforeCollapseTreeGridRow",[i,a,e]);void 0===o&&(o=!0),o&&$.isFunction(t.p.beforeCollapseTreeGridRow)&&(o=t.p.beforeCollapseTreeGridRow.call(t,i,a,e)),!1!==o&&($(e).each(function(){var e=t.p.idPrefix+$.jgrid.getAccessor(this,t.p.localReader.id);$($(t).jqGrid("getGridRowById",e)).css("display","none"),this[r]&&$(t).jqGrid("collapseRow",this)}),$(t).triggerHandler("jqGridAfterCollapseTreeGridRow",[i,a,e]),$.isFunction(t.p.afterCollapseTreeGridRow)&&t.p.afterCollapseTreeGridRow.call(t,i,a,e))}})},getRootNodes:function(o){var a=[];return this.each(function(){var e,t,r,i=this;if(i.grid&&i.p.treeGrid)switch("boolean"!=typeof o&&(o=!1),r=o?$(i).jqGrid("getRowData",null,!0):i.p.data,i.p.treeGridModel){case"nested":e=i.p.treeReader.level_field,$(r).each(function(){parseInt(this[e],10)===parseInt(i.p.tree_root_level,10)&&(o?a.push(i.p.data[i.p._index[this[i.p.keyName]]]):a.push(this))});break;case"adjacency":t=i.p.treeReader.parent_id_field,$(r).each(function(){null!==this[t]&&"null"!==String(this[t]).toLowerCase()||(o?a.push(i.p.data[i.p._index[this[i.p.keyName]]]):a.push(this))})}}),a},getNodeDepth:function(t){var r=null;return this.each(function(){if(this.grid&&this.p.treeGrid){switch(this.p.treeGridModel){case"nested":var e=this.p.treeReader.level_field;r=parseInt(t[e],10)-parseInt(this.p.tree_root_level,10);break;case"adjacency":r=$(this).jqGrid("getNodeAncestors",t).length}}}),r},getNodeParent:function(c){var u=null;return this.each(function(){var e=this;if(e.grid&&e.p.treeGrid)switch(e.p.treeGridModel){case"nested":var t=e.p.treeReader.left_field,r=e.p.treeReader.right_field,i=e.p.treeReader.level_field,o=parseInt(c[t],10),a=parseInt(c[r],10),n=parseInt(c[i],10);$(this.p.data).each(function(){if(parseInt(this[i],10)===n-1&&parseInt(this[t],10)<o&&parseInt(this[r],10)>a)return u=this,!1});break;case"adjacency":for(var l=e.p.treeReader.parent_id_field,s=e.p.localReader.id,d=c[s],p=e.p._index[d];p--;)if(String(e.p.data[p][s])===String($.jgrid.stripPref(e.p.idPrefix,c[l]))){u=e.p.data[p];break}}}),u},getNodeChildren:function(u,g){var h=[];return this.each(function(){var e=this;if(e.grid&&e.p.treeGrid){var t,r,i=g?this.rows.length:this.p.data.length;switch(e.p.treeGridModel){case"nested":var o=e.p.treeReader.left_field,a=e.p.treeReader.right_field,n=e.p.treeReader.level_field,l=parseInt(u[o],10),s=parseInt(u[a],10),d=parseInt(u[n],10);for(t=0;t<i;t++)(r=g?e.p.data[e.p._index[this.rows[t].id]]:e.p.data[t])&&parseInt(r[n],10)===d+1&&parseInt(r[o],10)>l&&parseInt(r[a],10)<s&&h.push(r);break;case"adjacency":var p=e.p.treeReader.parent_id_field,c=e.p.localReader.id;for(t=0;t<i;t++)(r=g?e.p.data[e.p._index[this.rows[t].id]]:e.p.data[t])&&String(r[p])===String($.jgrid.stripPref(e.p.idPrefix,u[c]))&&h.push(r)}}}),h},getFullTreeNode:function(c,u){var g=[];return this.each(function(){var t,r=this,i=r.p.treeReader.expanded_field;if(r.grid&&r.p.treeGrid)switch(null!=u&&"boolean"==typeof u||(u=!1),r.p.treeGridModel){case"nested":var e=r.p.treeReader.left_field,o=r.p.treeReader.right_field,a=r.p.treeReader.level_field,n=parseInt(c[e],10),l=parseInt(c[o],10),s=parseInt(c[a],10);$(this.p.data).each(function(){parseInt(this[a],10)>=s&&parseInt(this[e],10)>=n&&parseInt(this[e],10)<=l&&(u&&(this[i]=!0),g.push(this))});break;case"adjacency":if(c){g.push(c);var d=r.p.treeReader.parent_id_field,p=r.p.localReader.id;$(this.p.data).each(function(e){for(t=g.length,e=0;e<t;e++)if(String($.jgrid.stripPref(r.p.idPrefix,g[e][p]))===String(this[d])){u&&(this[i]=!0),g.push(this);break}})}}}),g},getNodeAncestors:function(t,r,i){var o=[];return void 0===r&&(r=!1),this.each(function(){if(this.grid&&this.p.treeGrid){i=void 0!==i&&this.p.treeReader.expanded_field;for(var e=$(this).jqGrid("getNodeParent",t);e;){if(i)try{e[i]=!0}catch(e){}r?o.unshift(e):o.push(e),e=$(this).jqGrid("getNodeParent",e)}}}),o},isVisibleNode:function(r){var i=!0;return this.each(function(){if(this.grid&&this.p.treeGrid){var e=$(this).jqGrid("getNodeAncestors",r),t=this.p.treeReader.expanded_field;$(e).each(function(){if(!(i=i&&this[t]))return!1})}}),i},isNodeLoaded:function(i){var o;return this.each(function(){var e=this;if(e.grid&&e.p.treeGrid){var t=e.p.treeReader.leaf_field,r=e.p.treeReader.loaded;o=void 0!==i&&(void 0!==i[r]?i[r]:!!(i[t]||0<$(e).jqGrid("getNodeChildren",i).length))}}),o},setLeaf:function(a,n,l){return this.each(function(){var e=$.jgrid.getAccessor(a,this.p.localReader.id),t=$("#"+e,this.grid.bDiv)[0],r=this.p.treeReader.leaf_field;try{var i=this.p._index[e];null!=i&&(this.p.data[i][r]=n)}catch(e){}if(!0===n)$("div.treeclick",t).removeClass(this.p.treeIcons.minus+" tree-minus "+this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.leaf+" tree-leaf");else if(!1===n){var o=this.p.treeIcons.minus+" tree-minus";l&&(o=this.p.treeIcons.plus+" tree-plus"),$("div.treeclick",t).removeClass(this.p.treeIcons.leaf+" tree-leaf").addClass(o)}})},reloadNode:function(c,u){return this.each(function(){if(this.grid&&this.p.treeGrid){var e=this.p.localReader.id,t=this.p.selrow;$(this).jqGrid("delChildren",c[e]),void 0===u&&(u=!1),u||jQuery._data(this,"events").jqGridAfterSetTreeNode||$(this).on("jqGridAfterSetTreeNode.reloadNode",function(){var e=this.p.treeReader.leaf_field;if(this.p.reloadnode){var t=this.p.reloadnode,r=$(this).jqGrid("getNodeChildren",t);t[e]&&r.length?$(this).jqGrid("setLeaf",t,!1):t[e]||0!==r.length||$(this).jqGrid("setLeaf",t,!0)}this.p.reloadnode=!1});var r=this.p.treeReader.expanded_field,i=this.p.treeReader.parent_id_field,o=this.p.treeReader.loaded,a=this.p.treeReader.level_field,n=this.p.treeReader.leaf_field,l=this.p.treeReader.left_field,s=this.p.treeReader.right_field,d=$.jgrid.getAccessor(c,this.p.localReader.id),p=$("#"+d,this.grid.bDiv)[0];c[r]=!0,c[n]||$("div.treeclick",p).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=p.rowIndex,this.p.datatype=this.p.treedatatype,this.p.reloadnode=c,u&&(this.p.treeANode=0<p.rowIndex?p.rowIndex-1:1,$(this).jqGrid("delRowData",d)),"nested"===this.p.treeGridModel?$(this).jqGrid("setGridParam",{postData:{nodeid:d,n_left:c[l],n_right:c[s],n_level:c[a]}}):$(this).jqGrid("setGridParam",{postData:{nodeid:d,parentid:c[i],n_level:c[a]}}),$(this).trigger("reloadGrid"),c[o]=!0,"nested"===this.p.treeGridModel?$(this).jqGrid("setGridParam",{selrow:t,postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):$(this).jqGrid("setGridParam",{selrow:t,postData:{nodeid:"",parentid:"",n_level:""}})}})},expandNode:function(p){return this.each(function(){if(this.grid&&this.p.treeGrid){var e=this.p.treeReader.expanded_field,t=this.p.treeReader.parent_id_field,r=this.p.treeReader.loaded,i=this.p.treeReader.level_field,o=this.p.treeReader.left_field,a=this.p.treeReader.right_field;if(!p[e]){var n=$.jgrid.getAccessor(p,this.p.localReader.id),l=$("#"+this.p.idPrefix+$.jgrid.jqID(n),this.grid.bDiv)[0],s=this.p._index[n],d=$(this).triggerHandler("jqGridBeforeExpandTreeGridNode",[n,p]);if(void 0===d&&(d=!0),d&&$.isFunction(this.p.beforeExpandTreeGridNode)&&(d=this.p.beforeExpandTreeGridNode.call(this,n,p)),!1===d)return;$(this).jqGrid("isNodeLoaded",this.p.data[s])?(p[e]=!0,$("div.treeclick",l).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(p[e]=!0,$("div.treeclick",l).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=l.rowIndex,this.p.datatype=this.p.treedatatype,"nested"===this.p.treeGridModel?$(this).jqGrid("setGridParam",{postData:{nodeid:n,n_left:p[o],n_right:p[a],n_level:p[i]}}):$(this).jqGrid("setGridParam",{postData:{nodeid:n,parentid:p[t],n_level:p[i]}}),$(this).trigger("reloadGrid"),p[r]=!0,"nested"===this.p.treeGridModel?$(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):$(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}})),$(this).triggerHandler("jqGridAfterExpandTreeGridNode",[n,p]),$.isFunction(this.p.afterExpandTreeGridNode)&&this.p.afterExpandTreeGridNode.call(this,n,p)}}})},collapseNode:function(o){return this.each(function(){if(this.grid&&this.p.treeGrid){var e=this.p.treeReader.expanded_field;if(o[e]){var t=$.jgrid.getAccessor(o,this.p.localReader.id),r=$("#"+this.p.idPrefix+$.jgrid.jqID(t),this.grid.bDiv)[0],i=$(this).triggerHandler("jqGridBeforeCollapseTreeGridNode",[t,o]);if(void 0===i&&(i=!0),i&&$.isFunction(this.p.beforeCollapseTreeGridNode)&&(i=this.p.beforeCollapseTreeGridNode.call(this,t,o)),(o[e]=!1)===i)return;$("div.treeclick",r).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus"),$(this).triggerHandler("jqGridAfterCollapseTreeGridNode",[t,o]),$.isFunction(this.p.afterCollapseTreeGridNode)&&this.p.afterCollapseTreeGridNode.call(this,t,o)}}})},SortTree:function(s,d,p,c){return this.each(function(){if(this.grid&&this.p.treeGrid){var e,t,r,i,o,a=[],n=this,l=$(this).jqGrid("getRootNodes",n.p.search);for((i=$.jgrid.from.call(this,l)).orderBy(s,d,p,c),e=0,t=(o=i.select()).length;e<t;e++)r=o[e],a.push(r),$(this).jqGrid("collectChildrenSortTree",a,r,s,d,p,c);$.each(a,function(e){var t=$.jgrid.getAccessor(this,n.p.localReader.id);$("#"+$.jgrid.jqID(n.p.id)+" tbody tr:eq("+e+")").after($("tr#"+$.jgrid.jqID(t),n.grid.bDiv))}),a=o=i=null}})},searchTree:function(t){var r,i,o,a,n,l,s=t.length||0,d=[],p=[],c=[];return this.each(function(){if(this.grid&&this.p.treeGrid&&s)for(r=this.p.localReader.id;s--;)if((d=$(this).jqGrid("getNodeAncestors",t[s],!0,!0)).push(t[s]),i=d[0][r],-1===$.inArray(i,p))p.push(i),c=c.concat(d);else for(n=0,o=d.length;n<o;n++){var e=!1;for(l=0,a=c.length;l<a;l++)if(d[n][r]===c[l][r]){e=!0;break}e||c.push(d[n])}}),c},collectChildrenSortTree:function(n,l,s,d,p,c){return this.each(function(){var e,t,r,i,o,a;if(this.grid&&this.p.treeGrid)for(i=$(this).jqGrid("getNodeChildren",l,this.p.search),(o=$.jgrid.from.call(this,i)).orderBy(s,d,p,c),e=0,t=(a=o.select()).length;e<t;e++)r=a[e],n.push(r),$(this).jqGrid("collectChildrenSortTree",n,r,s,d,p,c)})},setTreeRow:function(e,t){var r=!1;return this.each(function(){this.grid&&this.p.treeGrid&&(r=$(this).jqGrid("setRowData",e,t))}),r},delTreeNode:function(c){return this.each(function(){var e,t,r,i,o,a=this,n=a.p.localReader.id,l=a.p.treeReader.left_field,s=a.p.treeReader.right_field;if(a.grid&&a.p.treeGrid){var d=a.p._index[c];if(void 0!==d){r=(t=parseInt(a.p.data[d][s],10))-parseInt(a.p.data[d][l],10)+1;var p=$(a).jqGrid("getFullTreeNode",a.p.data[d]);if(0<p.length)for(e=0;e<p.length;e++)$(a).jqGrid("delRowData",p[e][n]);if("nested"===a.p.treeGridModel){if((i=$.jgrid.from.call(a,a.p.data).greater(l,t,{stype:"integer"}).select()).length)for(o in i)i.hasOwnProperty(o)&&(i[o][l]=parseInt(i[o][l],10)-r);if((i=$.jgrid.from.call(a,a.p.data).greater(s,t,{stype:"integer"}).select()).length)for(o in i)i.hasOwnProperty(o)&&(i[o][s]=parseInt(i[o][s],10)-r)}}}})},delChildren:function(c){return this.each(function(){var e,t,r,i,o=this,a=o.p.localReader.id,n=o.p.treeReader.left_field,l=o.p.treeReader.right_field;if(o.grid&&o.p.treeGrid){var s=o.p._index[c];if(void 0!==s){t=(e=parseInt(o.p.data[s][l],10))-parseInt(o.p.data[s][n],10)+1;var d=$(o).jqGrid("getFullTreeNode",o.p.data[s]);if(0<d.length)for(var p=0;p<d.length;p++)d[p][a]!==c&&$(o).jqGrid("delRowData",d[p][a]);if("nested"===o.p.treeGridModel){if((r=$.jgrid.from(o.p.data).greater(n,e,{stype:"integer"}).select()).length)for(i in r)r.hasOwnProperty(i)&&(r[i][n]=parseInt(r[i][n],10)-t);if((r=$.jgrid.from(o.p.data).greater(l,e,{stype:"integer"}).select()).length)for(i in r)r.hasOwnProperty(i)&&(r[i][l]=parseInt(r[i][l],10)-t)}}}})},addChildNode:function(e,t,r,i){var o=this[0];if(r){var a,n,l,s,d,p,c,u,g=o.p.treeReader.expanded_field,h=o.p.treeReader.leaf_field,f=o.p.treeReader.level_field,m=o.p.treeReader.parent_id_field,v=o.p.treeReader.left_field,b=o.p.treeReader.right_field,j=o.p.treeReader.loaded,y=0,w=t;if(void 0===i&&(i=!1),null==e){if(0<=(d=o.p.data.length-1))for(;0<=d;)y=Math.max(y,parseInt(o.p.data[d][o.p.localReader.id],10)),d--;e=y+1}var _,x,q=$(o).jqGrid("getInd",t);if(c=!1,null==t||""===t)w=t=null,a="last",s=o.p.tree_root_level,d=o.p.data.length+1;else{a="after",n=o.p._index[t],t=(l=o.p.data[n])[o.p.localReader.id],s=parseInt(l[f],10)+1;var I=$(o).jqGrid("getFullTreeNode",l);I.length?(w=d=I[I.length-1][o.p.localReader.id],d=$(o).jqGrid("getInd",w)+1):d=$(o).jqGrid("getInd",t)+1,l[h]&&(c=!0,l[g]=!0,$(o.rows[q]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(o.p.treeIcons.leaf+" tree-leaf").addClass(o.p.treeIcons.minus+" tree-minus"),o.p.data[n][h]=!1,l[j]=!0)}if(p=d+1,void 0===r[g]&&(r[g]=!1),void 0===r[j]&&(r[j]=!1),r[f]=s,void 0===r[h]&&(r[h]=!0),"adjacency"===o.p.treeGridModel&&(r[m]=t),"nested"===o.p.treeGridModel)if(null!==t){if(u=parseInt(l[b],10),(_=$.jgrid.from.call(o,o.p.data).greaterOrEquals(b,u,{stype:"integer"}).select()).length)for(x in _)_.hasOwnProperty(x)&&(_[x][v]=_[x][v]>u?parseInt(_[x][v],10)+2:_[x][v],_[x][b]=_[x][b]>=u?parseInt(_[x][b],10)+2:_[x][b]);r[v]=u,r[b]=u+1}else{if(u=parseInt($(o).jqGrid("getCol",b,!1,"max"),10),(_=$.jgrid.from.call(o,o.p.data).greater(v,u,{stype:"integer"}).select()).length)for(x in _)_.hasOwnProperty(x)&&(_[x][v]=parseInt(_[x][v],10)+2);if((_=$.jgrid.from.call(o,o.p.data).greater(b,u,{stype:"integer"}).select()).length)for(x in _)_.hasOwnProperty(x)&&(_[x][b]=parseInt(_[x][b],10)+2);r[v]=u+1,r[b]=u+2}(null===t||$(o).jqGrid("isNodeLoaded",l)||c)&&($(o).jqGrid("addRowData",e,r,a,w),$(o).jqGrid("setTreeNode",d,p)),l&&!l[g]&&i&&$(o.rows[q]).find("div.treeclick").click()}}}),$.fn.jqDrag=function(e){return i(this,e,"d")},$.fn.jqResize=function(e,t){return i(this,e,"r",t)},$.jqDnR={dnr:{},e:0,drag:function(e){return"d"==M.k?E.css({left:M.X+e.pageX-M.pX,top:M.Y+e.pageY-M.pY}):(E.css({width:Math.max(e.pageX-M.pX+M.W,0),height:Math.max(e.pageY-M.pY+M.H,0)}),M1&&E1.css({width:Math.max(e.pageX-M1.pX+M1.W,0),height:Math.max(e.pageY-M1.pY+M1.H,0)})),!1},stop:function(){$(document).off("mousemove",J.drag).off("mouseup",J.stop)}};var J=$.jqDnR,M=J.dnr,E=J.e,E1,M1,i=function(e,t,r,i){return e.each(function(){(t=t?$(t,e):e).on("mousedown",{e:e,k:r},function(e){var t=e.data,r={};if(E=t.e,E1=!!i&&$(i),"relative"!=E.css("position"))try{E.position(r)}catch(e){}if(M={X:r.left||f("left")||0,Y:r.top||f("top")||0,W:f("width")||E[0].scrollWidth||0,H:f("height")||E[0].scrollHeight||0,pX:e.pageX,pY:e.pageY,k:t.k},M1=!(!E1||"d"==t.k)&&{X:r.left||f1("left")||0,Y:r.top||f1("top")||0,W:E1[0].offsetWidth||f1("width")||0,H:E1[0].offsetHeight||f1("height")||0,pX:e.pageX,pY:e.pageY,k:t.k},$("input.hasDatepicker",E[0])[0])try{$("input.hasDatepicker",E[0]).datepicker("hide")}catch(e){}return $(document).mousemove($.jqDnR.drag).mouseup($.jqDnR.stop),!1})})},f=function(e){return parseInt(E.css(e),10)||!1},f1=function(e){return parseInt(E1.css(e),10)||!1};$.fn.tinyDraggable=function(e){var a=$.extend({handle:0,exclude:0},e);return this.each(function(){var r,i,o=$(this);(a.handle?$(a.handle,o):o).on({mousedown:function(e){if(!a.exclude||!~$.inArray(e.target,$(a.exclude,o))){e.preventDefault();var t=o.offset();r=e.pageX-t.left,i=e.pageY-t.top,$(document).on("mousemove.drag",function(e){o.offset({top:e.pageY-i,left:e.pageX-r})})}},mouseup:function(e){$(document).off("mousemove.drag")}})})},$.fn.jqm=function(e){var t={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:F,ajaxText:"",target:F,modal:F,toTop:F,onShow:F,onHide:F,onLoad:F};return this.each(function(){if(this._jqm)return H[this._jqm].c=$.extend({},H[this._jqm].c,e);s++,this._jqm=s,H[s]={c:$.extend(t,$.jqm.params,e),a:F,w:$(this).addClass("jqmID"+s),s:s},t.trigger&&$(this).jqmAddTrigger(t.trigger)})},$.fn.jqmAddClose=function(e){return hs(this,e,"jqmHide")},$.fn.jqmAddTrigger=function(e){return hs(this,e,"jqmShow")},$.fn.jqmShow=function(e){return this.each(function(){$.jqm.open(this._jqm,e)})},$.fn.jqmHide=function(e){return this.each(function(){$.jqm.close(this._jqm,e)})},$.jqm={hash:{},open:function(t,r){var i=H[t],o=i.c,a="."+o.closeClass,n=parseInt(i.w.css("z-index"));n=0<n?n:3e3;var l=$("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":n-1,opacity:o.overlay/100});if(i.a)return F;if(i.t=r,i.a=!0,i.w.css("z-index",n),o.modal?(A[0]||setTimeout(function(){new L("bind")},1),A.push(t)):0<o.overlay?o.closeoverlay&&i.w.jqmAddClose(l):l=F,i.o=l?l.addClass(o.overlayClass).prependTo("body"):F,o.ajax){var s=o.target||i.w,d=o.ajax;s="string"==typeof s?$(s,i.w):$(s),d="@"===d.substr(0,1)?$(r).attr(d.substring(1)):d,s.html(o.ajaxText).load(d,function(){o.onLoad&&o.onLoad.call(this,i),a&&i.w.jqmAddClose($(a,i.w)),e(i)})}else a&&i.w.jqmAddClose($(a,i.w));return o.toTop&&i.o&&i.w.before('<span id="jqmP'+i.w[0]._jqm+'"></span>').insertAfter(i.o),o.onShow?o.onShow(i):i.w.show(),e(i),F},close:function(e){var t=H[e];return t.a&&(t.a=F,A[0]&&(A.pop(),A[0]||new L("unbind")),t.c.toTop&&t.o&&$("#jqmP"+t.w[0]._jqm).after(t.w).remove(),t.c.onHide?t.c.onHide(t):(t.w.hide(),t.o&&t.o.remove())),F},params:{}};var s=0,H=$.jqm.hash,A=[],F=!1,e=function(e){void 0===e.c.focusField&&(e.c.focusField=0),0<=e.c.focusField&&f(e)},f=function(e){try{$(":input:visible",e.w)[parseInt(e.c.focusField,10)].focus()}catch(e){}},L=function(e){$(document)[e]("keypress",m)[e]("keydown",m)[e]("mousedown",m)},m=function(r){var e=H[A[A.length-1]],i=!$(r.target).parents(".jqmID"+e.s)[0];return i&&$(".jqmID"+e.s).each(function(){var e=$(this),t=e.offset();if(t.top<=r.pageY&&r.pageY<=t.top+e.height()&&t.left<=r.pageX&&r.pageX<=t.left+e.width())return i=!1}),!i},hs=function(e,t,r){return e.each(function(){var e=this._jqm;$(t).each(function(){this[r]||(this[r]=[],$(this).click(function(){for(var e in{jqmShow:1,jqmHide:1})for(var t in this[e])H[this[e][t]]&&H[this[e][t]].w[e](this);return F})),this[r].push(e)})})};$.fmatter={},$.extend($.fmatter,{isBoolean:function(e){return"boolean"==typeof e},isObject:function(e){return e&&("object"==typeof e||$.isFunction(e))||!1},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isValue:function(e){return this.isObject(e)||this.isString(e)||this.isNumber(e)||this.isBoolean(e)},isEmpty:function(e){return!(!this.isString(e)&&this.isValue(e))&&(!this.isValue(e)||""===(e=$.trim(e).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,"")))}}),$.fn.fmatter=function(e,t,r,i,o){var a=t;r=$.extend({},$.jgrid.getRegional(this,"formatter"),r);try{a=$.fn.fmatter[e].call(this,t,r,i,o)}catch(e){}return a},$.fmatter.util={NumberFormat:function(e,t){if($.fmatter.isNumber(e)||(e*=1),$.fmatter.isNumber(e)){var r,i=e<0,o=String(e),a=t.decimalSeparator||".";if($.fmatter.isNumber(t.decimalPlaces)){var n=t.decimalPlaces;if(r=(o=String(Number(Math.round(e+"e"+n)+"e-"+n))).lastIndexOf("."),0<n)for(r<0?r=(o+=a).length-1:"."!==a&&(o=o.replace(".",a));o.length-1-r<n;)o+="0"}if(t.thousandsSeparator){var l=t.thousandsSeparator;r=-1<(r=o.lastIndexOf(a))?r:o.length;var s,d=o.substring(r),p=-1;for(s=r;0<s;s--)++p%3==0&&s!==r&&(!i||1<s)&&(d=l+d),d=o.charAt(s-1)+d;o=d}return o=t.prefix?t.prefix+o:o,o=t.suffix?o+t.suffix:o}return e}},$.fn.fmatter.defaultFormat=function(e,t){return $.fmatter.isValue(e)&&""!==e?e:t.defaultValue||"&#160;"},$.fn.fmatter.email=function(e,t){return $.fmatter.isEmpty(e)?$.fn.fmatter.defaultFormat(e,t):'<a href="mailto:'+e+'">'+e+"</a>"},$.fn.fmatter.checkbox=function(e,t){var r,i=$.extend({},t.checkbox);return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(i=$.extend({},i,t.colModel.formatoptions)),r=!0===i.disabled?'disabled="disabled"':"",($.fmatter.isEmpty(e)||void 0===e)&&(e=$.fn.fmatter.defaultFormat(e,i)),'<input type="checkbox" '+((e=((e=String(e))+"").toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"")+' value="'+e+'" offval="no" '+r+"/>"},$.fn.fmatter.link=function(e,t){var r={target:t.target},i="";return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(r=$.extend({},r,t.colModel.formatoptions)),r.target&&(i="target="+r.target),$.fmatter.isEmpty(e)?$.fn.fmatter.defaultFormat(e,t):"<a "+i+' href="'+e+'">'+e+"</a>"},$.fn.fmatter.showlink=function(e,t){var r,i={baseLinkUrl:t.baseLinkUrl,showAction:t.showAction,addParam:t.addParam||"",target:t.target,idName:t.idName},o="";return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(i=$.extend({},i,t.colModel.formatoptions)),i.target&&(o="target="+i.target),r=i.baseLinkUrl+i.showAction+"?"+i.idName+"="+t.rowId+i.addParam,$.fmatter.isString(e)||$.fmatter.isNumber(e)?"<a "+o+' href="'+r+'">'+e+"</a>":$.fn.fmatter.defaultFormat(e,t)},$.fn.fmatter.integer=function(e,t){var r=$.extend({},t.integer);return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(r=$.extend({},r,t.colModel.formatoptions)),$.fmatter.isEmpty(e)?r.defaultValue:$.fmatter.util.NumberFormat(e,r)},$.fn.fmatter.number=function(e,t){var r=$.extend({},t.number);return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(r=$.extend({},r,t.colModel.formatoptions)),$.fmatter.isEmpty(e)?r.defaultValue:$.fmatter.util.NumberFormat(e,r)},$.fn.fmatter.currency=function(e,t){var r=$.extend({},t.currency);return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(r=$.extend({},r,t.colModel.formatoptions)),$.fmatter.isEmpty(e)?r.defaultValue:$.fmatter.util.NumberFormat(e,r)},$.fn.fmatter.date=function(e,t,r,i){var o=$.extend({},t.date);return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(o=$.extend({},o,t.colModel.formatoptions)),o.reformatAfterEdit||"edit"!==i?$.fmatter.isEmpty(e)?$.fn.fmatter.defaultFormat(e,t):$.jgrid.parseDate.call(this,o.srcformat,e,o.newformat,o):$.fn.fmatter.defaultFormat(e,t)},$.fn.fmatter.select=function(e,t){e=String(e);var r,i,o=!1,a=[];if(void 0!==t.colModel.formatoptions?(o=t.colModel.formatoptions.value,r=void 0===t.colModel.formatoptions.separator?":":t.colModel.formatoptions.separator,i=void 0===t.colModel.formatoptions.delimiter?";":t.colModel.formatoptions.delimiter):void 0!==t.colModel.editoptions&&(o=t.colModel.editoptions.value,r=void 0===t.colModel.editoptions.separator?":":t.colModel.editoptions.separator,i=void 0===t.colModel.editoptions.delimiter?";":t.colModel.editoptions.delimiter),o){var n,l=!0==(null!=t.colModel.editoptions&&!0===t.colModel.editoptions.multiple),s=[];if(l&&(s=e.split(","),s=$.map(s,function(e){return $.trim(e)})),$.fmatter.isString(o)){var d,p=o.split(i),c=0;for(d=0;d<p.length;d++)if(2<(n=p[d].split(r)).length&&(n[1]=$.map(n,function(e,t){if(0<t)return e}).join(r)),l)-1<$.inArray(n[0],s)&&(a[c]=n[1],c++);else if($.trim(n[0])===$.trim(e)){a[0]=n[1];break}}else $.fmatter.isObject(o)&&(l?a=$.map(s,function(e){return o[e]}):a[0]=o[e]||"")}return""===(e=a.join(", "))?$.fn.fmatter.defaultFormat(e,t):e},$.fn.fmatter.rowactions=function(e){var t=$(this).closest("tr.jqgrow"),r=t.attr("id"),i=$(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),o=$("#"+i),a=o[0],n=a.p,l=n.colModel[$.jgrid.getCellIndex(this)],s=l.frozen?$("tr#"+r+" td:eq("+$.jgrid.getCellIndex(this)+") > div",o):$(this).parent(),d={extraparam:{}},p=function(e){$.isFunction(d.afterRestore)&&d.afterRestore.call(a,e),s.find("div.ui-inline-edit,div.ui-inline-del").show(),s.find("div.ui-inline-save,div.ui-inline-cancel").hide()};if(void 0!==l.formatoptions){var c=$.extend(!0,{},l.formatoptions);d=$.extend(d,c)}void 0!==n.editOptions&&(d.editOptions=n.editOptions),void 0!==n.delOptions&&(d.delOptions=n.delOptions),t.hasClass("jqgrid-new-row")&&(d.extraparam[n.prmNames.oper]=n.prmNames.addoper);var u={keys:d.keys,oneditfunc:d.onEdit,successfunc:d.onSuccess,url:d.url,extraparam:d.extraparam,aftersavefunc:function(e,t){$.isFunction(d.afterSave)&&d.afterSave.call(a,e,t),s.find("div.ui-inline-edit,div.ui-inline-del").show(),s.find("div.ui-inline-save,div.ui-inline-cancel").hide()},errorfunc:d.onError,afterrestorefunc:p,restoreAfterError:d.restoreAfterError,mtype:d.mtype};switch(e){case"edit":o.jqGrid("editRow",r,u),s.find("div.ui-inline-edit,div.ui-inline-del").hide(),s.find("div.ui-inline-save,div.ui-inline-cancel").show(),o.triggerHandler("jqGridAfterGridComplete");break;case"save":o.jqGrid("saveRow",r,u)&&(s.find("div.ui-inline-edit,div.ui-inline-del").show(),s.find("div.ui-inline-save,div.ui-inline-cancel").hide(),o.triggerHandler("jqGridAfterGridComplete"));break;case"cancel":o.jqGrid("restoreRow",r,p),s.find("div.ui-inline-edit,div.ui-inline-del").show(),s.find("div.ui-inline-save,div.ui-inline-cancel").hide(),o.triggerHandler("jqGridAfterGridComplete");break;case"del":o.jqGrid("delGridRow",r,d.delOptions);break;case"formedit":o.jqGrid("setSelection",r),o.jqGrid("editGridRow",r,d.editOptions)}},$.fn.fmatter.actions=function(e,t){var r,i={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},o=t.rowId,a="",n=$.jgrid.getRegional(this,"nav"),l=$.jgrid.styleUI[t.styleUI||"jQueryUI"].fmatter,s=$.jgrid.styleUI[t.styleUI||"jQueryUI"].common;if(void 0!==t.colModel.formatoptions&&(i=$.extend(i,t.colModel.formatoptions)),void 0===o||$.fmatter.isEmpty(o))return"";var d="onmouseover=jQuery(this).addClass('"+s.hover+"'); onmouseout=jQuery(this).removeClass('"+s.hover+"');  ";return i.editformbutton?(r="id='jEditButton_"+o+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); "+d,a+="<div title='"+n.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+r+"><span class='"+s.icon_base+" "+l.icon_edit+"'></span></div>"):i.editbutton&&(r="id='jEditButton_"+o+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); "+d,a+="<div title='"+n.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+r+"><span class='"+s.icon_base+" "+l.icon_edit+"'></span></div>"),i.delbutton&&(r="id='jDeleteButton_"+o+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); "+d,a+="<div title='"+n.deltitle+"' style='float:left;' class='ui-pg-div ui-inline-del' "+r+"><span class='"+s.icon_base+" "+l.icon_del+"'></span></div>"),r="id='jSaveButton_"+o+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); "+d,a+="<div title='"+n.savetitle+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+r+"><span class='"+s.icon_base+" "+l.icon_save+"'></span></div>",r="id='jCancelButton_"+o+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); "+d,"<div style='margin-left:8px;'>"+(a+="<div title='"+n.canceltitle+"' style='float:left;display:none;' class='ui-pg-div ui-inline-cancel' "+r+"><span class='"+s.icon_base+" "+l.icon_cancel+"'></span></div>")+"</div>"},$.unformat=function(e,t,r,i){var o,a,n=t.colModel.formatter,l=t.colModel.formatoptions||{},s=/([\.\*\_\'\(\)\{\}\+\?\\])/g,d=t.colModel.unformat||$.fn.fmatter[n]&&$.fn.fmatter[n].unformat;if(void 0!==d&&$.isFunction(d))o=d.call(this,$(e).text(),t,e);else if(void 0!==n&&$.fmatter.isString(n)){var p,c=$.jgrid.getRegional(this,"formatter")||{};switch(n){case"integer":a=(l=$.extend({},c.integer,l)).thousandsSeparator.replace(s,"\\$1"),p=new RegExp(a,"g"),o=$(e).text().replace(p,"");break;case"number":a=(l=$.extend({},c.number,l)).thousandsSeparator.replace(s,"\\$1"),p=new RegExp(a,"g"),o=$(e).text().replace(p,"").replace(l.decimalSeparator,".");break;case"currency":a=(l=$.extend({},c.currency,l)).thousandsSeparator.replace(s,"\\$1"),p=new RegExp(a,"g"),o=$(e).text(),l.prefix&&l.prefix.length&&(o=o.substr(l.prefix.length)),l.suffix&&l.suffix.length&&(o=o.substr(0,o.length-l.suffix.length)),o=o.replace(p,"").replace(l.decimalSeparator,".");break;case"checkbox":var u=t.colModel.editoptions?t.colModel.editoptions.value.split(":"):["Yes","No"];o=$("input",e).is(":checked")?u[0]:u[1];break;case"select":o=$.unformat.select(e,t,r,i);break;case"actions":return"";default:o=$(e).text()}}return void 0!==o?o:!0===i?$(e).text():$.jgrid.htmlDecode($(e).html())},$.unformat.select=function(e,t,r,i){var o=[],a=$(e).text();if(!0===i)return a;var n=$.extend({},void 0!==t.colModel.formatoptions?t.colModel.formatoptions:t.colModel.editoptions),l=void 0===n.separator?":":n.separator,s=void 0===n.delimiter?";":n.delimiter;if(n.value){var d,p=n.value,c=!0===n.multiple,u=[];if(c&&(u=a.split(","),u=$.map(u,function(e){return $.trim(e)})),$.fmatter.isString(p)){var g,h=p.split(s),f=0;for(g=0;g<h.length;g++)if(2<(d=h[g].split(l)).length&&(d[1]=$.map(d,function(e,t){if(0<t)return e}).join(l)),c)-1<$.inArray($.trim(d[1]),u)&&(o[f]=d[0],f++);else if($.trim(d[1])===$.trim(a)){o[0]=d[0];break}}else($.fmatter.isObject(p)||$.isArray(p))&&(c||(u[0]=a),o=$.map(u,function(r){var i;if($.each(p,function(e,t){if(t===r)return i=e,!1}),void 0!==i)return i}));return o.join(", ")}return a||""},$.unformat.date=function(e,t){var r=$.jgrid.getRegional(this,"formatter.date")||{};return void 0!==t.formatoptions&&(r=$.extend({},r,t.formatoptions)),$.fmatter.isEmpty(e)?$.fn.fmatter.defaultFormat(e,t):$.jgrid.parseDate.call(this,r.newformat,e,r.srcformat,r)};var dragging,placeholders=$();$.fn.html5sortable=function(a){var e=String(a);return a=$.extend({connectWith:!1},a),this.each(function(){var t,r,i;if(/^enable|disable|destroy$/.test(e))return t=$(this).children($(this).data("items")).attr("draggable","enable"===e),void("destroy"===e&&t.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"));t=$(this).children(a.items);var o=$("<"+(/^ul|ol$/i.test(this.tagName)?"li":/^tbody$/i.test(this.tagName)?"tr":"div")+' class="sortable-placeholder '+a.placeholderClass+'">').html("&nbsp;");t.find(a.handle).mousedown(function(){r=!0}).mouseup(function(){r=!1}),$(this).data("items",a.items),placeholders=placeholders.add(o),a.connectWith&&$(a.connectWith).add(this).data("connectWith",a.connectWith),t.attr("draggable","true").on("dragstart.h5s",function(e){if(a.handle&&!r)return!1;r=!1;var t=e.originalEvent.dataTransfer;t.effectAllowed="move",t.setData("Text","dummy"),i=(dragging=$(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){dragging&&(dragging.removeClass("sortable-dragging").show(),placeholders.detach(),i!==dragging.index()&&dragging.parent().trigger("sortupdate",{item:dragging,startindex:i,endindex:dragging.index()}),dragging=null)}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,o]).on("dragover.h5s dragenter.h5s drop.h5s",function(e){return!t.is(dragging)&&a.connectWith!==$(dragging).parent().data("connectWith")||("drop"===e.type?(e.stopPropagation(),placeholders.filter(":visible").after(dragging),dragging.trigger("dragend.h5s")):(e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move",t.is(this)?(a.forcePlaceholderSize&&o.height(dragging.outerHeight()),dragging.hide(),$(this)[o.index()<$(this).index()?"after":"before"](o),placeholders.not(o).detach()):placeholders.is(this)||$(this).children(a.items).length||(placeholders.detach(),$(this).append(o))),!1)})})},$.extend($.jgrid,{stringify:function(e){return JSON.stringify(e,function(e,t){return"function"==typeof t?t.toString():t})},parseFunc:function(str){return JSON.parse(str,function(key,value){if("string"==typeof value&&-1!==value.indexOf("function")){var sv=value.split(" ");return sv[0]=$.trim(sv[0].toLowerCase()),0===sv[0].indexOf("function")&&"}"===value.trim().slice(-1)?eval("("+value+")"):value}return value})},encode:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},jsonToXML:function(e,t){var s=$.extend({xmlDecl:'<?xml version="1.0" encoding="UTF-8" ?>\n',attr_prefix:"-",encode:!0},t||{}),d=this,p=function(e,t){return"#text"===e?s.encode?d.encode(t):t:"function"==typeof t?"<"+e+"><![CDATA["+t+"]]></"+e+">\n":""===t?"<"+e+">__EMPTY_STRING_</"+e+">\n":"<"+e+">"+(s.encode?d.encode(t):t)+"</"+e+">\n"},c=function(e,t){for(var r=[],i=0;i<t.length;i++){var o=t[i];void 0===o||null==o?r[r.length]="<"+e+" />":"object"==typeof o&&o.constructor==Array?r[r.length]=c(e,o):r[r.length]="object"==typeof o?u(e,o):p(e,o)}return r.length||(r[0]="<"+e+">__EMPTY_ARRAY_</"+e+">\n"),r.join("")},u=function(e,t){var r=[],i=[];for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];o.charAt(0)!==s.attr_prefix?null==a?r[r.length]="<"+o+" />":"object"==typeof a&&a.constructor===Array?r[r.length]=c(o,a):r[r.length]="object"==typeof a?u(o,a):p(o,a):i[i.length]=" "+o.substring(1)+'="'+(s.encode?d.encode(a):a)+'"'}var n=i.join(""),l=r.join("");return null==e||(l=0<r.length?l.match(/\n/)?"<"+e+n+">\n"+l+"</"+e+">\n":"<"+e+n+">"+l+"</"+e+">\n":"<"+e+n+" />\n"),l},r=u(null,e);return s.xmlDecl+r},xmlToJSON:function(root,options){var o=$.extend({force_array:[],attr_prefix:"-"},options||{});if(root){var __force_array={};if(o.force_array)for(var i=0;i<o.force_array.length;i++)__force_array[o.force_array[i]]=1;"string"==typeof root&&(root=$.parseXML(root)),root.documentElement&&(root=root.documentElement);var addNode=function(hash,key,cnts,val){if("string"==typeof val)if(-1!==val.indexOf("function"))val=eval("("+val+")");else switch(val){case"__EMPTY_ARRAY_":val=[];break;case"__EMPTY_STRING_":val="";break;case"false":val=!1;break;case"true":val=!0}__force_array[key]?(1===cnts&&(hash[key]=[]),hash[key][hash[key].length]=val):1===cnts?hash[key]=val:2===cnts?hash[key]=[hash[key],val]:hash[key][hash[key].length]=val},parseElement=function(e){if(7!==e.nodeType){if(3===e.nodeType||4===e.nodeType){if(null==e.nodeValue.match(/[^\x00-\x20]/))return;return e.nodeValue}var t,r,i,a,n={};if(e.attributes&&e.attributes.length)for(t={},r=0;r<e.attributes.length;r++)"string"==typeof(i=e.attributes[r].nodeName)&&(a=e.attributes[r].nodeValue)&&(void 0===n[i=o.attr_prefix+i]&&(n[i]=0),n[i]++,addNode(t,i,n[i],a));if(e.childNodes&&e.childNodes.length){var l=!0;for(t&&(l=!1),r=0;r<e.childNodes.length&&l;r++){var s=e.childNodes[r].nodeType;3!==s&&4!==s&&(l=!1)}if(l)for(t||(t=""),r=0;r<e.childNodes.length;r++)t+=e.childNodes[r].nodeValue;else for(t||(t={}),r=0;r<e.childNodes.length;r++)"string"==typeof(i=e.childNodes[r].nodeName)&&(a=parseElement(e.childNodes[r]))&&(void 0===n[i]&&(n[i]=0),n[i]++,addNode(t,i,n[i],a))}return t}},json=parseElement(root);if(__force_array[root.nodeName]&&(json=[json]),11!==root.nodeType){var tmp={};tmp[root.nodeName]=json,json=tmp}return json}},saveAs:function(e,t,r){r=$.extend(!0,{type:"plain/text;charset=utf-8"},r||{});var i,o,a=[];t=null==t||""===t?"jqGridFile.txt":t,$.isArray(e)?a=e:a[0]=e;try{i=new File(a,t,r)}catch(e){i=new Blob(a,r)}if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(i,t);else{o=URL.createObjectURL(i);var n=document.createElement("a");n.href=o,n.download=t,document.body.appendChild(n),n.click(),setTimeout(function(){document.body.removeChild(n),window.URL.revokeObjectURL(o)},0)}}}),$.jgrid=$.jgrid||{},$.extend($.jgrid,{formatCell:function(e,t,r,i,o,a){var n;if(void 0!==i.formatter){var l={rowId:"",colModel:i,gid:o.p.id,pos:t,styleUI:"",isExported:!0,exporttype:a};n=$.isFunction(i.formatter)?i.formatter.call(o,e,l,r):$.fmatter?$.fn.fmatter.call(o,i.formatter,e,l,r):e}else n=e;return n},formatCellCsv:function(t,e){t=null==t?"":String(t);try{t=t.replace(e._regexsep,e.separatorReplace).replace(/\r\n/g,e.replaceNewLine).replace(/\n/g,e.replaceNewLine)}catch(e){t=""}return e.escquote&&(t=t.replace(e._regexquot,e.escquote+e.quote)),-1!==t.indexOf(e.separator)&&-1!==t.indexOf(e.qoute)||(t=e.quote+t+e.quote),t},excelCellPos:function(e){for(var t="A".charCodeAt(0),r="Z".charCodeAt(0)-t+1,i="";0<=e;)i=String.fromCharCode(e%r+t)+i,e=Math.floor(e/r)-1;return i},makeNode:function(e,t,r){var i=e.createElement(t);return r&&(r.attr&&$(i).attr(r.attr),r.children&&$.each(r.children,function(e,t){i.appendChild(t)}),r.text&&i.appendChild(e.createTextNode(r.text))),i},xmlToZip:function(o,e){var a,n,l,s,d,p,c=this,u=new XMLSerializer,g=-1===u.serializeToString($.parseXML($.jgrid.excelStrings["xl/worksheets/sheet1.xml"])).indexOf("xmlns:r"),h=[];$.each(e,function(e,t){if($.isPlainObject(t))a=o.folder(e),c.xmlToZip(a,t);else{if(g){for(n=t.childNodes[0],l=n.attributes.length-1;0<=l;l--){var r=n.attributes[l].nodeName,i=n.attributes[l].nodeValue;-1!==r.indexOf(":")&&(h.push({name:r,value:i}),n.removeAttribute(r))}for(l=0,s=h.length;l<s;l++)(d=t.createAttribute(h[l].name.replace(":","_dt_b_namespace_token_"))).value=h[l].value,n.setAttributeNode(d)}p=u.serializeToString(t),g&&(-1===p.indexOf("<?xml")&&(p='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+p),p=p.replace(/_dt_b_namespace_token_/g,":")),p=p.replace(/<row xmlns="" /g,"<row ").replace(/<cols xmlns="">/g,"<cols>").replace(/<mergeCells xmlns="" /g,"<mergeCells "),o.file(e,p)}})},excelStrings:{"_rels/.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',"xl/_rels/workbook.xml.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/></Relationships>',"[Content_Types].xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="jpeg" ContentType="image/jpeg" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /></Types>',"xl/workbook.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="24816"/><workbookPr showInkAnnotation="0" autoCompressPictures="0"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="25600" windowHeight="19020" tabRatio="500"/></bookViews><sheets><sheet name="Sheet1" sheetId="1" r:id="rId1"/></sheets></workbook>',"xl/worksheets/sheet1.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><sheetData/></worksheet>',"xl/styles.xml":'<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="7"><numFmt numFmtId="164" formatCode="#,##0.00_- [$$-45C]"/><numFmt numFmtId="165" formatCode="&quot;£&quot;#,##0.00"/><numFmt numFmtId="166" formatCode="[$€-2] #,##0.00"/><numFmt numFmtId="167" formatCode="0.0%"/><numFmt numFmtId="168" formatCode="#,##0;(#,##0)"/><numFmt numFmtId="169" formatCode="#,##0.00;(#,##0.00)"/><numFmt numFmtId="170" formatCode="yyyy/mm/dd;@"/></numFmts><fonts count="5" x14ac:knownFonts="1"><font><sz val="11" /><name val="Calibri" /></font><font><sz val="11" /><name val="Calibri" /><color rgb="FFFFFFFF" /></font><font><sz val="11" /><name val="Calibri" /><b /></font><font><sz val="11" /><name val="Calibri" /><i /></font><font><sz val="11" /><name val="Calibri" /><u /></font></fonts><fills count="6"><fill><patternFill patternType="none" /></fill><fill/><fill><patternFill patternType="solid"><fgColor rgb="FFD9D9D9" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="FFD99795" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6efce" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6cfef" /><bgColor indexed="64" /></patternFill></fill></fills><borders count="2"><border><left /><right /><top /><bottom /><diagonal /></border><border diagonalUp="false" diagonalDown="false"><left style="thin"><color auto="1" /></left><right style="thin"><color auto="1" /></right><top style="thin"><color auto="1" /></top><bottom style="thin"><color auto="1" /></bottom><diagonal /></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" /></cellStyleXfs><cellXfs count="67"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="left"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="center"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="right"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="fill"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment textRotation="90"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment wrapText="1"/></xf><xf numFmtId="9"   fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="164" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="165" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="166" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="167" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="168" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="169" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="3" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="4" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="1" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="2" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="170" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0" /></cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4" /></styleSheet>'},excelParsers:[{match:/^\-?\d+\.\d%$/,style:60,fmt:function(e){return e/100}},{match:/^\-?\d+\.?\d*%$/,style:56,fmt:function(e){return e/100}},{match:/^\-?\$[\d,]+.?\d*$/,style:57},{match:/^\-?£[\d,]+.?\d*$/,style:58},{match:/^\-?€[\d,]+.?\d*$/,style:59},{match:/^\-?\d+$/,style:65},{match:/^\-?\d+\.\d{2}$/,style:66},{match:/^\([\d,]+\)$/,style:61,fmt:function(e){return-1*e.replace(/[\(\)]/g,"")}},{match:/^\([\d,]+\.\d{2}\)$/,style:62,fmt:function(e){return-1*e.replace(/[\(\)]/g,"")}},{match:/^\-?[\d,]+$/,style:63},{match:/^\-?[\d,]+\.\d{2}$/,style:64},{match:/^\d{4}\-\d{2}\-\d{2}$/,style:67}]}),$.jgrid.extend({exportToCsv:function(x){x=$.extend(!0,{separator:",",separatorReplace:" ",quote:'"',escquote:'"',newLine:"\r\n",replaceNewLine:" ",includeCaption:!0,includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,fileName:"jqGridExport.csv",mimetype:"text/csv;charset=utf-8",returnAsString:!1},x||{});var I="";if(this.each(function(){x._regexsep=new RegExp(x.separator,"g"),x._regexquot=new RegExp(x.quote,"g");var e,t,r,i,q=this,o=this.addLocalData(!0),a=o.length,n=q.p.colModel,l=n.length,s=q.p.colNames,d=0,p="",c="",u="",g="",h="",f=[];var m,v=[];if($.each(n,function(e,t){t._expcol=!0,void 0===t.exportcol?t.hidden&&(t._expcol=!1):t._expcol=t.exportcol,"cb"!==t.name&&"rn"!==t.name&&"subgrid"!==t.name||(t._expcol=!1),t._expcol&&(f.push($.jgrid.formatCellCsv(s[e],x)),v.push(t.name))}),x.includeLabels&&(h=f.join(x.separator)+x.newLine),x.collen=f.length,q.p.grouping){var b=!!q.p.groupingView._locgr;q.p.groupingView._locgr=!1,p+=function(c,u){var g="",h=q.p.groupingView,f=[],m=h.groupField.length,v=q.p.colModel,b=v.length,j=0;function y(e,t,r,i){var o,a,n=function(e,t,r){var i,o=!1;if(0===t)o=r[e];else{var a=r[e].idx;if(0===a)o=r[e];else for(i=e;0<=i;i--)if(r[i].idx===a-t){o=r[i];break}}return o}(e,t,r),l=n.cnt,s=new Array(u.collen),d=0;for(a=i;a<b;a++)if(v[a]._excol){var p="{0}";$.each(n.summary,function(){if(this.nm===v[a].name){v[a].summaryTpl&&(p=v[a].summaryTpl),"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&0<l&&(this.v=this.v/l));try{this.groupCount=n.cnt,this.groupIndex=n.dataIndex,this.groupValue=n.value,o=q.formatter("",this.v,a,this)}catch(e){o=this.v}return s[d]=$.jgrid.formatCellCsv($.jgrid.stripHtml($.jgrid.template(p,o)),u),!1}}),d++}return s}$.each(v,function(e,t){var r;for(r=0;r<m;r++)if(h.groupField[r]===t.name){f[r]=e;break}});var w,_,x=$.makeArray(h.groupSummary);if(x.reverse(),"local"===q.p.datatype&&!q.p.loadonce){$(q).jqGrid("groupingSetup");for(var e=$.jgrid.getMethod("groupingPrepare"),t=0;t<a;t++)e.call($(q),o[t],t)}return $.each(h.groups,function(e,t){j++;try{w=$.isArray(h.formatDisplayField)&&$.isFunction(h.formatDisplayField[t.idx])?h.formatDisplayField[t.idx].call(q,t.displayValue,t.value,q.p.colModel[f[t.idx]],t.idx,h):q.formatter("",t.displayValue,f[t.idx],t.value)}catch(e){w=t.displayValue}var r,i="";if("string"!=typeof(i=$.isFunction(h.groupText[t.idx])?h.groupText[t.idx].call(q,w,t.cnt,t.summary):$.jgrid.template(h.groupText[t.idx],w,t.cnt,t.summary))&&"number"!=typeof i&&(i=w),(r="header"===h.groupSummaryPos[t.idx]?y(e,0,h.groups,0):new Array(u.collen))[0]=$.jgrid.formatCellCsv($.jgrid.stripHtml(i),u),g+=r.join(u.separator)+u.newLine,m-1===t.idx){var o,a,n,l=h.groups[e+1],s=t.startRow,d=void 0!==l?l.startRow:h.groups[e].startRow+h.groups[e].cnt;for(o=s;o<d&&c[o-0];o++){for(n=c[o-0],a=_=0;a<v.length;a++)v[a]._expcol&&(r[_]=$.jgrid.formatCellCsv($.jgrid.formatCell(n[v[a].name],a,n,v[a],q,"csv"),u),_++);g+=r.join(u.separator)+u.newLine}if("header"!==h.groupSummaryPos[t.idx]){var p;if(void 0!==l){for(p=0;p<h.groupField.length&&l.dataIndex!==h.groupField[p];p++);j=h.groupField.length-p}for(a=0;a<j;a++)x[a]&&(r=y(e,a,h.groups,0),g+=r.join(u.separator)+u.newLine);j=p}}}),g}(o,x),q.p.groupingView._locgr=b}else for(;d<a;){for(t=o[d],r=[],e=i=0;e<l;e++)n[e]._expcol&&(r[i]=$.jgrid.formatCellCsv($.jgrid.formatCell(t[n[e].name],e,t,n[e],q,"csv"),x),i++);p+=r.join(x.separator)+x.newLine,d++}if(o=null,r=new Array(x.collen),x.includeCaption&&q.p.caption){for(d=x.collen;--d;)r[d]="";r[0]=$.jgrid.formatCellCsv(q.p.caption,x),c+=r.join(x.separator)+x.newLine}if(x.includeGroupHeader&&q.p.groupHeader&&q.p.groupHeader.length){var j=q.p.groupHeader;for(e=0;e<j.length;e++){var y=j[e].groupHeaders;for(r=[],m=d=0;m<v.length;m++){for(r[d]="",i=0;i<y.length;i++)y[i].startColumnName===v[m]&&(r[d]=$.jgrid.formatCellCsv(y[i].titleText,x));d++}u+=r.join(x.separator)+x.newLine}}if(x.includeFooter&&q.p.footerrow&&$(".ui-jqgrid-ftable",this.sDiv).length){var w=$(q).jqGrid("footerData","get");for(e=0,r=[];e<x.collen;){var _=v[e];w.hasOwnProperty(_)&&r.push($.jgrid.formatCellCsv($.jgrid.stripHtml(w[_]),x)),e++}g+=r.join(x.separator)+x.newLine}I=c+u+h+p+g}),x.returnAsString)return I;$.jgrid.saveAs(I,x.fileName,{type:x.mimetype})},exportToExcel:function(R){R=$.extend(!0,{includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,fileName:"jqGridExport.xlsx",mimetype:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",maxlength:40,onBeforeExport:null,replaceStr:null},R||{}),this.each(function(){var e,t,y=this,r=$.jgrid.excelStrings,c=0,u=$.parseXML(r["xl/worksheets/sheet1.xml"]),g=u.getElementsByTagName("sheetData")[0],i={_rels:{".rels":$.parseXML(r["_rels/.rels"])},xl:{_rels:{"workbook.xml.rels":$.parseXML(r["xl/_rels/workbook.xml.rels"])},"workbook.xml":$.parseXML(r["xl/workbook.xml"]),"styles.xml":$.parseXML(r["xl/styles.xml"]),worksheets:{"sheet1.xml":u}},"[Content_Types].xml":$.parseXML(r["[Content_Types].xml"])},w=y.p.colModel,o=0,_={body:y.addLocalData(!0),header:[],footer:[],width:[],map:[]};for(e=0,t=w.length;e<t;e++)w[e]._expcol=!0,void 0===w[e].exportcol?w[e].hidden&&(w[e]._expcol=!1):w[e]._expcol=w[e].exportcol,"cb"!==w[e].name&&"rn"!==w[e].name&&"subgrid"!==w[e].name&&w[e]._expcol&&(_.header[o]=w[e].name,_.width[o]=5,_.map[o]=e,o++);var h,f,m=$.isFunction(R.replaceStr)?R.replaceStr:function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/[\x00-\x09\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,"")},x=function(e,t){h=c+1,f=$.jgrid.makeNode(u,"row",{attr:{r:h}});for(var r=0;r<_.header.length;r++){var i,o,a=$.jgrid.excelCellPos(r)+""+h,n=$.isArray(e)&&t?y.p.colNames[_.map[r]]:e[_.header[r]];null==n&&(n=""),t||(n=$.jgrid.formatCell(n,_.map[r],e,w[_.map[r]],y,"excel")),_.width[r]=Math.max(_.width[r],Math.min(parseInt(n.toString().length,10),R.maxlength)),n.match&&(o=n.match(/^-?([1-9]\d+)(\.(\d+))?$/)),i=null;for(var l=0,s=$.jgrid.excelParsers.length;l<s;l++){var d=$.jgrid.excelParsers[l];if(n.match&&!n.match(/^0\d+/)&&n.match(d.match)){n=n.replace(/[^\d\.\-]/g,""),d.fmt&&(n=d.fmt(n)),i=67===d.style?$.jgrid.makeNode(u,"c",{attr:{t:"d",r:a,s:d.style},children:[$.jgrid.makeNode(u,"v",{text:n})]}):$.jgrid.makeNode(u,"c",{attr:{r:a,s:d.style},children:[$.jgrid.makeNode(u,"v",{text:n})]}),f.appendChild(i);break}}if(!i){if("number"==typeof n&&n.toString().length<=15||o&&o[1].length+(o[2]?o[3].length:0)<=15)i=$.jgrid.makeNode(u,"c",{attr:{t:"n",r:a},children:[$.jgrid.makeNode(u,"v",{text:n})]});else{var p=n.replace?m(n):n;i=$.jgrid.makeNode(u,"c",{attr:{t:"inlineStr",r:a},children:{row:$.jgrid.makeNode(u,"is",{children:{row:$.jgrid.makeNode(u,"t",{text:p})}})}})}f.appendChild(i)}}g.appendChild(f),c++};if($("sheets sheet",i.xl["workbook.xml"]).attr("name",R.sheetName),R.includeGroupHeader&&y.p.groupHeader&&y.p.groupHeader.length){var a,n,l=y.p.groupHeader,s=[],d=0;for(n=0;n<l.length;n++){var p=l[n].groupHeaders,v={};for(d++,e=e=0;e<_.header.length;e++){v[a=_.header[e]]="";for(var b=0;b<p.length;b++)if(p[b].startColumnName===a){v[a]=p[b].titleText;var j=$.jgrid.excelCellPos(e)+d,q=$.jgrid.excelCellPos(e+p[b].numberOfColumns-1)+d;s.push({ref:j+":"+q})}}x(v,!0)}$("row c",u).attr("s","2");var I=$.jgrid.makeNode(u,"mergeCells",{attr:{count:s.length}});for($("worksheet",u).append(I),o=0;o<s.length;o++)I.appendChild($.jgrid.makeNode(u,"mergeCell",{attr:s[o]}))}if(R.includeLabels&&(x(_.header,!0),$("row:last c",u).attr("s","2")),y.p.grouping){var D=!!y.p.groupingView._locgr;y.p.groupingView._locgr=!1,function(c){var u=y.p.groupingView,g=[],h=u.groupField.length,p=w.length,f=0;function m(e,t,r,i){var o,a,n=function(e,t,r){var i,o=!1;if(0===t)o=r[e];else{var a=r[e].idx;if(0===a)o=r[e];else for(i=e;0<=i;i--)if(r[i].idx===a-t){o=r[i];break}}return o}(e,t,r),l=n.cnt,s=v(_.header);for(a=i;a<p;a++)if(w[a]._expcol){var d="{0}";$.each(n.summary,function(){if(this.nm===w[a].name){w[a].summaryTpl&&(d=w[a].summaryTpl),"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&0<l&&(this.v=this.v/l));try{this.groupCount=n.cnt,this.groupIndex=n.dataIndex,this.groupValue=n.value,o=y.formatter("",this.v,a,this)}catch(e){o=this.v}return s[this.nm]=$.jgrid.stripHtml($.jgrid.template(d,o)),!1}})}return s}function v(e){for(var t={},r=0;r<e.length;r++)t[e[r]]="";return t}$.each(w,function(e,t){var r;for(r=0;r<h;r++)if(u.groupField[r]===t.name){g[r]=e;break}});var b,j=$.makeArray(u.groupSummary);if(j.reverse(),"local"===y.p.datatype&&!y.p.loadonce){$(y).jqGrid("groupingSetup");for(var e=$.jgrid.getMethod("groupingPrepare"),t=0;t<_.body.length;t++)e.call($(y),_.body[t],t)}$.each(u.groups,function(e,t){f++;try{b=$.isArray(u.formatDisplayField)&&$.isFunction(u.formatDisplayField[t.idx])?u.formatDisplayField[t.idx].call(y,t.displayValue,t.value,y.p.colModel[g[t.idx]],t.idx,u):y.formatter("",t.displayValue,g[t.idx],t.value)}catch(e){b=t.displayValue}var r,i="";if("string"!=typeof(i=$.isFunction(u.groupText[t.idx])?u.groupText[t.idx].call(y,b,t.cnt,t.summary):$.jgrid.template(u.groupText[t.idx],b,t.cnt,t.summary))&&"number"!=typeof i&&(i=b),(r="header"===u.groupSummaryPos[t.idx]?m(e,0,u.groups,0):v(_.header))[Object.keys(r)[0]]=$.jgrid.stripHtml(new Array(5*t.idx).join(" ")+i),x(r,!0),h-1===t.idx){var o,a,n=u.groups[e+1],l=t.startRow,s=void 0!==n?n.startRow:u.groups[e].startRow+u.groups[e].cnt;for(o=l;o<s&&c[o-0];o++){var d=c[o-0];x(d,!1)}if("header"!==u.groupSummaryPos[t.idx]){var p;if(void 0!==n){for(p=0;p<u.groupField.length&&n.dataIndex!==u.groupField[p];p++);f=u.groupField.length-p}for(a=0;a<f;a++)j[a]&&(r=m(e,a,u.groups,0),x(r,!0));f=p}}})}(_.body),y.p.groupingView._locgr=D}else for(var C=0,F=_.body.length;C<F;C++)x(_.body[C],!1);if(R.includeFooter||y.p.footerrow){for(o in _.footer=$(y).jqGrid("footerData","get"),_.footer)_.footer.hasOwnProperty(o)&&(_.footer[o]=$.jgrid.stripHtml(_.footer[o]));x(_.footer,!0),$("row:last c",u).attr("s","2")}var G=$.jgrid.makeNode(u,"cols");for($("worksheet",u).prepend(G),o=0,t=_.width.length;o<t;o++)G.appendChild($.jgrid.makeNode(u,"col",{attr:{min:o+1,max:o+1,width:_.width[o],customWidth:1}}));$.isFunction(R.onBeforeExport)&&R.onBeforeExport(i),_=null;try{var k=new JSZip,S={type:"blob",mimeType:R.mimetype};$.jgrid.xmlToZip(k,i),k.generateAsync?k.generateAsync(S).then(function(e){$.jgrid.saveAs(e,R.fileName,{type:R.mimetype})}):$.jgrid.saveAs(k.generate(S),R.fileName,{type:R.mimetype})}catch(e){throw e}})},exportToPdf:function(j){return j=$.extend(!0,{title:null,orientation:"portrait",pageSize:"A4",description:null,onBeforeExport:null,download:"download",includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,fileName:"jqGridExport.pdf",mimetype:"application/pdf"},j||{}),this.each(function(){var e,t,r,i,o,_=this,x=[],a=_.p.colModel,n={},l=_.addLocalData(!0),q=[],s=0,d=[],p=[],c=[],I={};for(e=0,t=a.length;e<t;e++)a[e]._expcol=!0,void 0===a[e].exportcol?a[e].hidden&&(a[e]._expcol=!1):a[e]._expcol=a[e].exportcol,"cb"!==a[e].name&&"rn"!==a[e].name&&"subgrid"!==a[e].name&&a[e]._expcol&&(n={text:_.p.colNames[e],style:"tableHeader"},p.push(n),q[s]=a[e].name,d[s]=e,c.push(a[e].width),I[a[e].name]=a[e].align||"left",s++);if(j.includeGroupHeader&&_.p.groupHeader&&_.p.groupHeader.length)for(o=_.p.groupHeader,s=0;s<o.length;s++){var u=[],g=o[s].groupHeaders;for(r=0;r<q.length;r++){for(n={text:"",style:"tableHeader"},i=0;i<g.length;i++)g[i].startColumnName===q[r]&&(n={text:g[i].titleText,colSpan:g[i].numberOfColumns,style:"tableHeader"});u.push(n),e++}x.push(u)}if(j.includeLabels&&x.push(p),_.p.grouping){var h=!!_.p.groupingView._locgr;_.p.groupingView._locgr=!1,function(c){var u=_.p.groupingView,g=[],h=u.groupField.length,p=_.p.colModel,f=p.length,m=0;function v(e,t){for(var r=0,i=[],o=0;o<q.length;o++)n={text:null==e[q[o]]?"":t?$.jgrid.formatCell(e[q[o]]+"",d[r],l[s],p[d[r]],_,"pdf"):e[q[o]],alignment:I[o],style:"tableBody"},i.push(n),r++;return i}function b(e,t,r,i){var o,a,n=function(e,t,r){var i,o=!1;if(0===t)o=r[e];else{var a=r[e].idx;if(0===a)o=r[e];else for(i=e;0<=i;i--)if(r[i].idx===a-t){o=r[i];break}}return o}(e,t,r),l=n.cnt,s=j(q);for(a=i;a<f;a++)if(p[a]._expcol){var d="{0}";$.each(n.summary,function(){if(this.nm===p[a].name){p[a].summaryTpl&&(d=p[a].summaryTpl),"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&0<l&&(this.v=this.v/l));try{this.groupCount=n.cnt,this.groupIndex=n.dataIndex,this.groupValue=n.value,o=_.formatter("",this.v,a,this)}catch(e){o=this.v}return s[this.nm]=$.jgrid.stripHtml($.jgrid.template(d,o)),!1}})}return s}function j(e){for(var t={},r=0;r<e.length;r++)t[e[r]]="";return t}$.each(p,function(e,t){var r;for(r=0;r<h;r++)if(u.groupField[r]===t.name){g[r]=e;break}});var y,w=$.makeArray(u.groupSummary);if(w.reverse(),"local"===_.p.datatype&&!_.p.loadonce){$(_).jqGrid("groupingSetup");for(var e=$.jgrid.getMethod("groupingPrepare"),t=0;t<l.length;t++)e.call($(_),l[t],t)}$.each(u.groups,function(e,t){m++;try{y=$.isArray(u.formatDisplayField)&&$.isFunction(u.formatDisplayField[t.idx])?u.formatDisplayField[t.idx].call(_,t.displayValue,t.value,_.p.colModel[g[t.idx]],t.idx,u):_.formatter("",t.displayValue,g[t.idx],t.value)}catch(e){y=t.displayValue}var r,i="";if("string"!=typeof(i=$.isFunction(u.groupText[t.idx])?u.groupText[t.idx].call(_,y,t.cnt,t.summary):$.jgrid.template(u.groupText[t.idx],y,t.cnt,t.summary))&&"number"!=typeof i&&(i=y),(r="header"===u.groupSummaryPos[t.idx]?b(e,0,u.groups,0):j(q))[Object.keys(r)[0]]=$.jgrid.stripHtml(new Array(5*t.idx).join(" ")+i),x.push(v(r,!1)),h-1===t.idx){var o,a,n=u.groups[e+1],l=t.startRow,s=void 0!==n?n.startRow:u.groups[e].startRow+u.groups[e].cnt;for(o=l;o<s&&c[o-0];o++){var d=c[o-0];x.push(v(d,!0))}if("header"!==u.groupSummaryPos[t.idx]){var p;if(void 0!==n){for(p=0;p<u.groupField.length&&n.dataIndex!==u.groupField[p];p++);m=u.groupField.length-p}for(a=0;a<m;a++)w[a]&&(r=b(e,a,u.groups,0),x.push(v(r,!1)));m=p}}})}(l),_.p.groupingView._locgr=h}else{var f;for(s=0,t=l.length;s<t;s++){for(i=0,p=[],f=l[s],r=0;r<q.length;r++)n={text:null==f[q[r]]?"":$.jgrid.formatCell(f[q[r]]+"",d[i],l[s],a[d[i]],_,"pdf"),alignment:I[q[r]],style:"tableBody"},p.push(n),i++;x.push(p)}}if(j.includeFooter&&_.p.footerrow){var m=$(_).jqGrid("footerData","get");for(p=[],r=0;r<q.length;r++)n={text:$.jgrid.stripHtml(m[q[r]]),style:"tableFooter",alignment:I[q[r]]},p.push(n);x.push(p)}var v={pageSize:j.pageSize,pageOrientation:j.orientation,content:[{style:"tableExample",widths:c,table:{headerRows:null!=o?0:1,body:x}}],styles:{tableHeader:{bold:!0,fontSize:11,color:"#2e6e9e",fillColor:"#dfeffc",alignment:"center"},tableBody:{fontSize:10},tableFooter:{bold:!0,fontSize:11,color:"#2e6e9e",fillColor:"#dfeffc"},title:{alignment:"center",fontSize:15},description:{}},defaultStyle:{fontSize:10}};j.description&&v.content.unshift({text:j.description,style:"description",margin:[0,0,0,12]}),j.title&&v.content.unshift({text:j.title,style:"title",margin:[0,0,0,12]}),$.isFunction(j.onBeforeExport)&&j.onBeforeExport.call(_,v);try{var b=pdfMake.createPdf(v);"open"===j.download?b.open():b.getBuffer(function(e){$.jgrid.saveAs(e,j.fileName,{type:j.mimetype})})}catch(e){throw e}})},exportToHtml:function(d){var p;return d=$.extend(!0,{title:"",onBeforeExport:null,includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,tableClass:"jqgridprint",autoPrint:!1,topText:"",bottomText:"",returnAsString:!1},d||{}),this.each(function(){var e,_=this,c=_.p.colModel,t=0,x={body:_.addLocalData(!0),header:[],footer:[],width:[],map:[],align:[]};for(e=0,n=c.length;e<n;e++)c[e]._expcol=!0,void 0===c[e].exportcol?c[e].hidden&&(c[e]._expcol=!1):c[e]._expcol=c[e].exportcol,"cb"!==c[e].name&&"rn"!==c[e].name&&"subgrid"!==c[e].name&&c[e]._expcol&&(x.header[t]=c[e].name,x.width[t]=c[e].width,x.map[t]=e,x.align[t]=c[e].align||"left",t++);var r=document.createElement("a"),i=function(e){r.href=e;var t=r.host;return-1===t.indexOf("/")&&0!==r.pathname.indexOf("/")&&(t+="/"),r.protocol+"//"+t+r.pathname+r.search},q=function(e,t,r,i,o){for(var a,n,l="<tr>",s=0,d=x.header.length;s<d&&(n=o?' colspan= "'+x.header.length+'" style=text-align:left':!0===i?" style=width:"+x.width[s]+"px;text-align:"+x.align[s]+";":" style=text-align:"+x.align[s]+";",a=x.header[s],e.hasOwnProperty(a)&&(l+="<"+t+n+">"+(r?$.jgrid.formatCell(e[a],x.map[s],e,c[x.map[s]],_,"html"):e[a])+"</"+t+">"),!o);s++);return l+"</tr>"};var o='<table class="'+d.tableClass+'">';if(d.includeLabels&&(o+="<thead>"+function(e,t,r){for(var i="<tr>",o=0,a=e.length;o<a;o++)i+="<"+t+(!0===r?" style=width:"+x.width[o]+"px;":"")+">"+_.p.colNames[x.map[o]]+"</"+t+">";return i+"</tr>"}(x.header,"th",!0)+"</thead>"),o+="<tbody>",_.p.grouping){var a=!!_.p.groupingView._locgr;_.p.groupingView._locgr=!1,o+=function(u){var g=_.p.groupingView,h=[],f=g.groupField.length,p=c.length,m=0,v="";function b(e,t,r,i){var o,a,n=function(e,t,r){var i,o=!1;if(0===t)o=r[e];else{var a=r[e].idx;if(0===a)o=r[e];else for(i=e;0<=i;i--)if(r[i].idx===a-t){o=r[i];break}}return o}(e,t,r),l=n.cnt,s=j(x.header);for(a=i;a<p;a++)if(c[a]._expcol){var d="{0}";$.each(n.summary,function(){if(this.nm===c[a].name){c[a].summaryTpl&&(d=c[a].summaryTpl),"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&0<l&&(this.v=this.v/l));try{this.groupCount=n.cnt,this.groupIndex=n.dataIndex,this.groupValue=n.value,o=_.formatter("",this.v,a,this)}catch(e){o=this.v}return s[this.nm]=$.jgrid.stripHtml($.jgrid.template(d,o)),!1}})}return s}function j(e){for(var t={},r=0;r<e.length;r++)t[e[r]]="";return t}$.each(c,function(e,t){var r;for(r=0;r<f;r++)if(g.groupField[r]===t.name){h[r]=e;break}});var y,w=$.makeArray(g.groupSummary);if(w.reverse(),"local"===_.p.datatype&&!_.p.loadonce){$(_).jqGrid("groupingSetup");for(var e=$.jgrid.getMethod("groupingPrepare"),t=0;t<x.body.length;t++)e.call($(_),x.body[t],t)}return $.each(g.groups,function(e,t){m++;try{y=$.isArray(g.formatDisplayField)&&$.isFunction(g.formatDisplayField[t.idx])?g.formatDisplayField[t.idx].call(_,t.displayValue,t.value,_.p.colModel[h[t.idx]],t.idx,g):_.formatter("",t.displayValue,h[t.idx],t.value)}catch(e){y=t.displayValue}var r="";"string"!=typeof(r=$.isFunction(g.groupText[t.idx])?g.groupText[t.idx].call(_,y,t.cnt,t.summary):$.jgrid.template(g.groupText[t.idx],y,t.cnt,t.summary))&&"number"!=typeof r&&(r=y);var i,o=!1;if("header"===g.groupSummaryPos[t.idx]?i=b(e,0,g.groups,0):(i=j(x.header),o=!0),i[Object.keys(i)[0]]=new Array(5*t.idx).join(" ")+r,v+=q(i,"td",!1,1===m,o),f-1===t.idx){var a,n,l=g.groups[e+1],s=t.startRow,d=void 0!==l?l.startRow:g.groups[e].startRow+g.groups[e].cnt;for(a=s;a<d&&u[a-0];a++){var p=u[a-0];v+=q(p,"td",!1)}if("header"!==g.groupSummaryPos[t.idx]){var c;if(void 0!==l){for(c=0;c<g.groupField.length&&l.dataIndex!==g.groupField[c];c++);m=g.groupField.length-c}for(n=0;n<m;n++)w[n]&&(i=b(e,n,g.groups,0),v+=q(i,"td",!1));m=c}}}),v}(x.body),_.p.groupingView._locgr=a}else{t=0;for(var n=x.body.length;t<n;t++)o+=q(x.body[t],"td",!0,0===t)}if(d.includeFooter&&_.p.footerrow&&(x.footer=$(_).jqGrid("footerData","get",null,!1),o+=q(x.footer,"td",!1)),o+="</tbody>",o+="</table>",d.returnAsString)p=o;else{var l=window.open("","");l.document.close();var s=d.title?"<title>"+d.title+"</title>":"";$("style, link").each(function(){var e;s+=("link"===(e=$(this).clone()[0]).nodeName.toLowerCase()&&(e.href=i(e.href)),e.outerHTML)});try{l.document.head.innerHTML=s}catch(e){$(l.document.head).html(s)}l.document.body.innerHTML=(d.title?"<h1>"+d.title+"</h1>":"")+"<div>"+(d.topText||"")+"</div>"+o+"<div>"+(d.bottomText||"")+"</div>",$(l.document.body).addClass("html-view"),$("img",l.document.body).each(function(e,t){t.setAttribute("src",i(t.getAttribute("src")))}),d.onBeforeExport&&d.onBeforeExport(l),Boolean(l.chrome)?d.autoPrint&&(l.print(),l.close()):setTimeout(function(){d.autoPrint&&(l.print(),l.close())},1e3)}}),p}})});